"use strict";const ge=require("electron"),be=require("path"),vt=require("fs"),pc=require("constants"),gr=require("stream"),ta=require("util"),xl=require("assert"),Mr=require("child_process"),Ll=require("events"),vr=require("crypto"),Ul=require("tty"),Br=require("os"),Et=require("url"),kl=require("zlib"),mc=require("http");var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},St={},Qr={},br={},Oa;function ze(){return Oa||(Oa=1,br.fromCallback=function(e){return Object.defineProperty(function(...d){if(typeof d[d.length-1]=="function")e.apply(this,d);else return new Promise((h,c)=>{d.push((f,u)=>f!=null?c(f):h(u)),e.apply(this,d)})},"name",{value:e.name})},br.fromPromise=function(e){return Object.defineProperty(function(...d){const h=d[d.length-1];if(typeof h!="function")return e.apply(this,d);d.pop(),e.apply(this,d).then(c=>h(null,c),h)},"name",{value:e.name})}),br}var Zr,Ia;function gc(){if(Ia)return Zr;Ia=1;var e=pc,d=process.cwd,h=null,c=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return h||(h=d.call(process)),h};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var f=process.chdir;process.chdir=function(a){h=null,f.call(process,a)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,f)}Zr=u;function u(a){e.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&l(a),a.lutimes||o(a),a.chown=r(a.chown),a.fchown=r(a.fchown),a.lchown=r(a.lchown),a.chmod=s(a.chmod),a.fchmod=s(a.fchmod),a.lchmod=s(a.lchmod),a.chownSync=n(a.chownSync),a.fchownSync=n(a.fchownSync),a.lchownSync=n(a.lchownSync),a.chmodSync=i(a.chmodSync),a.fchmodSync=i(a.fchmodSync),a.lchmodSync=i(a.lchmodSync),a.stat=p(a.stat),a.fstat=p(a.fstat),a.lstat=p(a.lstat),a.statSync=g(a.statSync),a.fstatSync=g(a.fstatSync),a.lstatSync=g(a.lstatSync),a.chmod&&!a.lchmod&&(a.lchmod=function(m,w,T){T&&process.nextTick(T)},a.lchmodSync=function(){}),a.chown&&!a.lchown&&(a.lchown=function(m,w,T,P){P&&process.nextTick(P)},a.lchownSync=function(){}),c==="win32"&&(a.rename=typeof a.rename!="function"?a.rename:(function(m){function w(T,P,I){var b=Date.now(),O=0;m(T,P,function S(R){if(R&&(R.code==="EACCES"||R.code==="EPERM"||R.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){a.stat(P,function(v,k){v&&v.code==="ENOENT"?m(T,P,S):I(R)})},O),O<100&&(O+=10);return}I&&I(R)})}return Object.setPrototypeOf&&Object.setPrototypeOf(w,m),w})(a.rename)),a.read=typeof a.read!="function"?a.read:(function(m){function w(T,P,I,b,O,S){var R;if(S&&typeof S=="function"){var v=0;R=function(k,q,L){if(k&&k.code==="EAGAIN"&&v<10)return v++,m.call(a,T,P,I,b,O,R);S.apply(this,arguments)}}return m.call(a,T,P,I,b,O,R)}return Object.setPrototypeOf&&Object.setPrototypeOf(w,m),w})(a.read),a.readSync=typeof a.readSync!="function"?a.readSync:(function(m){return function(w,T,P,I,b){for(var O=0;;)try{return m.call(a,w,T,P,I,b)}catch(S){if(S.code==="EAGAIN"&&O<10){O++;continue}throw S}}})(a.readSync);function l(m){m.lchmod=function(w,T,P){m.open(w,e.O_WRONLY|e.O_SYMLINK,T,function(I,b){if(I){P&&P(I);return}m.fchmod(b,T,function(O){m.close(b,function(S){P&&P(O||S)})})})},m.lchmodSync=function(w,T){var P=m.openSync(w,e.O_WRONLY|e.O_SYMLINK,T),I=!0,b;try{b=m.fchmodSync(P,T),I=!1}finally{if(I)try{m.closeSync(P)}catch{}else m.closeSync(P)}return b}}function o(m){e.hasOwnProperty("O_SYMLINK")&&m.futimes?(m.lutimes=function(w,T,P,I){m.open(w,e.O_SYMLINK,function(b,O){if(b){I&&I(b);return}m.futimes(O,T,P,function(S){m.close(O,function(R){I&&I(S||R)})})})},m.lutimesSync=function(w,T,P){var I=m.openSync(w,e.O_SYMLINK),b,O=!0;try{b=m.futimesSync(I,T,P),O=!1}finally{if(O)try{m.closeSync(I)}catch{}else m.closeSync(I)}return b}):m.futimes&&(m.lutimes=function(w,T,P,I){I&&process.nextTick(I)},m.lutimesSync=function(){})}function s(m){return m&&function(w,T,P){return m.call(a,w,T,function(I){y(I)&&(I=null),P&&P.apply(this,arguments)})}}function i(m){return m&&function(w,T){try{return m.call(a,w,T)}catch(P){if(!y(P))throw P}}}function r(m){return m&&function(w,T,P,I){return m.call(a,w,T,P,function(b){y(b)&&(b=null),I&&I.apply(this,arguments)})}}function n(m){return m&&function(w,T,P){try{return m.call(a,w,T,P)}catch(I){if(!y(I))throw I}}}function p(m){return m&&function(w,T,P){typeof T=="function"&&(P=T,T=null);function I(b,O){O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),P&&P.apply(this,arguments)}return T?m.call(a,w,T,I):m.call(a,w,I)}}function g(m){return m&&function(w,T){var P=T?m.call(a,w,T):m.call(a,w);return P&&(P.uid<0&&(P.uid+=4294967296),P.gid<0&&(P.gid+=4294967296)),P}}function y(m){if(!m||m.code==="ENOSYS")return!0;var w=!process.getuid||process.getuid()!==0;return!!(w&&(m.code==="EINVAL"||m.code==="EPERM"))}}return Zr}var en,Da;function vc(){if(Da)return en;Da=1;var e=gr.Stream;en=d;function d(h){return{ReadStream:c,WriteStream:f};function c(u,a){if(!(this instanceof c))return new c(u,a);e.call(this);var l=this;this.path=u,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,a=a||{};for(var o=Object.keys(a),s=0,i=o.length;s<i;s++){var r=o[s];this[r]=a[r]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){l._read()});return}h.open(this.path,this.flags,this.mode,function(n,p){if(n){l.emit("error",n),l.readable=!1;return}l.fd=p,l.emit("open",p),l._read()})}function f(u,a){if(!(this instanceof f))return new f(u,a);e.call(this),this.path=u,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,a=a||{};for(var l=Object.keys(a),o=0,s=l.length;o<s;o++){var i=l[o];this[i]=a[i]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=h.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return en}var tn,Na;function Ec(){if(Na)return tn;Na=1,tn=d;var e=Object.getPrototypeOf||function(h){return h.__proto__};function d(h){if(h===null||typeof h!="object")return h;if(h instanceof Object)var c={__proto__:e(h)};else var c=Object.create(null);return Object.getOwnPropertyNames(h).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(h,f))}),c}return tn}var Pr,Fa;function Ve(){if(Fa)return Pr;Fa=1;var e=vt,d=gc(),h=vc(),c=Ec(),f=ta,u,a;typeof Symbol=="function"&&typeof Symbol.for=="function"?(u=Symbol.for("graceful-fs.queue"),a=Symbol.for("graceful-fs.previous")):(u="___graceful-fs.queue",a="___graceful-fs.previous");function l(){}function o(m,w){Object.defineProperty(m,u,{get:function(){return w}})}var s=l;if(f.debuglog?s=f.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(s=function(){var m=f.format.apply(f,arguments);m="GFS4: "+m.split(/\n/).join(`
GFS4: `),console.error(m)}),!e[u]){var i=tt[u]||[];o(e,i),e.close=(function(m){function w(T,P){return m.call(e,T,function(I){I||g(),typeof P=="function"&&P.apply(this,arguments)})}return Object.defineProperty(w,a,{value:m}),w})(e.close),e.closeSync=(function(m){function w(T){m.apply(e,arguments),g()}return Object.defineProperty(w,a,{value:m}),w})(e.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){s(e[u]),xl.equal(e[u].length,0)})}tt[u]||o(tt,e[u]),Pr=r(c(e)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!e.__patched&&(Pr=r(e),e.__patched=!0);function r(m){d(m),m.gracefulify=r,m.createReadStream=de,m.createWriteStream=ie;var w=m.readFile;m.readFile=T;function T(Q,ve,_){return typeof ve=="function"&&(_=ve,ve=null),E(Q,ve,_);function E(H,F,ce,he){return w(H,F,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?n([E,[H,F,ce],pe,he||Date.now(),Date.now()]):typeof ce=="function"&&ce.apply(this,arguments)})}}var P=m.writeFile;m.writeFile=I;function I(Q,ve,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ve,_,E);function H(F,ce,he,pe,Ae){return P(F,ce,he,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?n([H,[F,ce,he,pe],ye,Ae||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var b=m.appendFile;b&&(m.appendFile=O);function O(Q,ve,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ve,_,E);function H(F,ce,he,pe,Ae){return b(F,ce,he,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?n([H,[F,ce,he,pe],ye,Ae||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var S=m.copyFile;S&&(m.copyFile=R);function R(Q,ve,_,E){return typeof _=="function"&&(E=_,_=0),H(Q,ve,_,E);function H(F,ce,he,pe,Ae){return S(F,ce,he,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?n([H,[F,ce,he,pe],ye,Ae||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var v=m.readdir;m.readdir=q;var k=/^v[0-5]\./;function q(Q,ve,_){typeof ve=="function"&&(_=ve,ve=null);var E=k.test(process.version)?function(ce,he,pe,Ae){return v(ce,H(ce,he,pe,Ae))}:function(ce,he,pe,Ae){return v(ce,he,H(ce,he,pe,Ae))};return E(Q,ve,_);function H(F,ce,he,pe){return function(Ae,ye){Ae&&(Ae.code==="EMFILE"||Ae.code==="ENFILE")?n([E,[F,ce,he],Ae,pe||Date.now(),Date.now()]):(ye&&ye.sort&&ye.sort(),typeof he=="function"&&he.call(this,Ae,ye))}}}if(process.version.substr(0,4)==="v0.8"){var L=h(m);D=L.ReadStream,V=L.WriteStream}var $=m.ReadStream;$&&(D.prototype=Object.create($.prototype),D.prototype.open=G);var x=m.WriteStream;x&&(V.prototype=Object.create(x.prototype),V.prototype.open=te),Object.defineProperty(m,"ReadStream",{get:function(){return D},set:function(Q){D=Q},enumerable:!0,configurable:!0}),Object.defineProperty(m,"WriteStream",{get:function(){return V},set:function(Q){V=Q},enumerable:!0,configurable:!0});var N=D;Object.defineProperty(m,"FileReadStream",{get:function(){return N},set:function(Q){N=Q},enumerable:!0,configurable:!0});var j=V;Object.defineProperty(m,"FileWriteStream",{get:function(){return j},set:function(Q){j=Q},enumerable:!0,configurable:!0});function D(Q,ve){return this instanceof D?($.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function G(){var Q=this;Ee(Q.path,Q.flags,Q.mode,function(ve,_){ve?(Q.autoClose&&Q.destroy(),Q.emit("error",ve)):(Q.fd=_,Q.emit("open",_),Q.read())})}function V(Q,ve){return this instanceof V?(x.apply(this,arguments),this):V.apply(Object.create(V.prototype),arguments)}function te(){var Q=this;Ee(Q.path,Q.flags,Q.mode,function(ve,_){ve?(Q.destroy(),Q.emit("error",ve)):(Q.fd=_,Q.emit("open",_))})}function de(Q,ve){return new m.ReadStream(Q,ve)}function ie(Q,ve){return new m.WriteStream(Q,ve)}var _e=m.open;m.open=Ee;function Ee(Q,ve,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ve,_,E);function H(F,ce,he,pe,Ae){return _e(F,ce,he,function(ye,We){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?n([H,[F,ce,he,pe],ye,Ae||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return m}function n(m){s("ENQUEUE",m[0].name,m[1]),e[u].push(m),y()}var p;function g(){for(var m=Date.now(),w=0;w<e[u].length;++w)e[u][w].length>2&&(e[u][w][3]=m,e[u][w][4]=m);y()}function y(){if(clearTimeout(p),p=void 0,e[u].length!==0){var m=e[u].shift(),w=m[0],T=m[1],P=m[2],I=m[3],b=m[4];if(I===void 0)s("RETRY",w.name,T),w.apply(null,T);else if(Date.now()-I>=6e4){s("TIMEOUT",w.name,T);var O=T.pop();typeof O=="function"&&O.call(null,P)}else{var S=Date.now()-b,R=Math.max(b-I,1),v=Math.min(R*1.2,100);S>=v?(s("RETRY",w.name,T),w.apply(null,T.concat([I]))):e[u].push(m)}p===void 0&&(p=setTimeout(y,0))}}return Pr}var xa;function Bt(){return xa||(xa=1,(function(e){const d=ze().fromCallback,h=Ve(),c=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(f=>typeof h[f]=="function");Object.assign(e,h),c.forEach(f=>{e[f]=d(h[f])}),e.exists=function(f,u){return typeof u=="function"?h.exists(f,u):new Promise(a=>h.exists(f,a))},e.read=function(f,u,a,l,o,s){return typeof s=="function"?h.read(f,u,a,l,o,s):new Promise((i,r)=>{h.read(f,u,a,l,o,(n,p,g)=>{if(n)return r(n);i({bytesRead:p,buffer:g})})})},e.write=function(f,u,...a){return typeof a[a.length-1]=="function"?h.write(f,u,...a):new Promise((l,o)=>{h.write(f,u,...a,(s,i,r)=>{if(s)return o(s);l({bytesWritten:i,buffer:r})})})},typeof h.writev=="function"&&(e.writev=function(f,u,...a){return typeof a[a.length-1]=="function"?h.writev(f,u,...a):new Promise((l,o)=>{h.writev(f,u,...a,(s,i,r)=>{if(s)return o(s);l({bytesWritten:i,buffers:r})})})}),typeof h.realpath.native=="function"?e.realpath.native=d(h.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Qr)),Qr}var Or={},rn={},La;function yc(){if(La)return rn;La=1;const e=be;return rn.checkPath=function(h){if(process.platform==="win32"&&/[<>:"|?*]/.test(h.replace(e.parse(h).root,""))){const f=new Error(`Path contains invalid characters: ${h}`);throw f.code="EINVAL",f}},rn}var Ua;function wc(){if(Ua)return Or;Ua=1;const e=Bt(),{checkPath:d}=yc(),h=c=>{const f={mode:511};return typeof c=="number"?c:{...f,...c}.mode};return Or.makeDir=async(c,f)=>(d(c),e.mkdir(c,{mode:h(f),recursive:!0})),Or.makeDirSync=(c,f)=>(d(c),e.mkdirSync(c,{mode:h(f),recursive:!0})),Or}var nn,ka;function at(){if(ka)return nn;ka=1;const e=ze().fromPromise,{makeDir:d,makeDirSync:h}=wc(),c=e(d);return nn={mkdirs:c,mkdirsSync:h,mkdirp:c,mkdirpSync:h,ensureDir:c,ensureDirSync:h},nn}var an,qa;function It(){if(qa)return an;qa=1;const e=ze().fromPromise,d=Bt();function h(c){return d.access(c).then(()=>!0).catch(()=>!1)}return an={pathExists:e(h),pathExistsSync:d.existsSync},an}var on,$a;function ql(){if($a)return on;$a=1;const e=Ve();function d(c,f,u,a){e.open(c,"r+",(l,o)=>{if(l)return a(l);e.futimes(o,f,u,s=>{e.close(o,i=>{a&&a(s||i)})})})}function h(c,f,u){const a=e.openSync(c,"r+");return e.futimesSync(a,f,u),e.closeSync(a)}return on={utimesMillis:d,utimesMillisSync:h},on}var sn,Ma;function Ht(){if(Ma)return sn;Ma=1;const e=Bt(),d=be,h=ta;function c(n,p,g){const y=g.dereference?m=>e.stat(m,{bigint:!0}):m=>e.lstat(m,{bigint:!0});return Promise.all([y(n),y(p).catch(m=>{if(m.code==="ENOENT")return null;throw m})]).then(([m,w])=>({srcStat:m,destStat:w}))}function f(n,p,g){let y;const m=g.dereference?T=>e.statSync(T,{bigint:!0}):T=>e.lstatSync(T,{bigint:!0}),w=m(n);try{y=m(p)}catch(T){if(T.code==="ENOENT")return{srcStat:w,destStat:null};throw T}return{srcStat:w,destStat:y}}function u(n,p,g,y,m){h.callbackify(c)(n,p,y,(w,T)=>{if(w)return m(w);const{srcStat:P,destStat:I}=T;if(I){if(s(P,I)){const b=d.basename(n),O=d.basename(p);return g==="move"&&b!==O&&b.toLowerCase()===O.toLowerCase()?m(null,{srcStat:P,destStat:I,isChangingCase:!0}):m(new Error("Source and destination must not be the same."))}if(P.isDirectory()&&!I.isDirectory())return m(new Error(`Cannot overwrite non-directory '${p}' with directory '${n}'.`));if(!P.isDirectory()&&I.isDirectory())return m(new Error(`Cannot overwrite directory '${p}' with non-directory '${n}'.`))}return P.isDirectory()&&i(n,p)?m(new Error(r(n,p,g))):m(null,{srcStat:P,destStat:I})})}function a(n,p,g,y){const{srcStat:m,destStat:w}=f(n,p,y);if(w){if(s(m,w)){const T=d.basename(n),P=d.basename(p);if(g==="move"&&T!==P&&T.toLowerCase()===P.toLowerCase())return{srcStat:m,destStat:w,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(m.isDirectory()&&!w.isDirectory())throw new Error(`Cannot overwrite non-directory '${p}' with directory '${n}'.`);if(!m.isDirectory()&&w.isDirectory())throw new Error(`Cannot overwrite directory '${p}' with non-directory '${n}'.`)}if(m.isDirectory()&&i(n,p))throw new Error(r(n,p,g));return{srcStat:m,destStat:w}}function l(n,p,g,y,m){const w=d.resolve(d.dirname(n)),T=d.resolve(d.dirname(g));if(T===w||T===d.parse(T).root)return m();e.stat(T,{bigint:!0},(P,I)=>P?P.code==="ENOENT"?m():m(P):s(p,I)?m(new Error(r(n,g,y))):l(n,p,T,y,m))}function o(n,p,g,y){const m=d.resolve(d.dirname(n)),w=d.resolve(d.dirname(g));if(w===m||w===d.parse(w).root)return;let T;try{T=e.statSync(w,{bigint:!0})}catch(P){if(P.code==="ENOENT")return;throw P}if(s(p,T))throw new Error(r(n,g,y));return o(n,p,w,y)}function s(n,p){return p.ino&&p.dev&&p.ino===n.ino&&p.dev===n.dev}function i(n,p){const g=d.resolve(n).split(d.sep).filter(m=>m),y=d.resolve(p).split(d.sep).filter(m=>m);return g.reduce((m,w,T)=>m&&y[T]===w,!0)}function r(n,p,g){return`Cannot ${g} '${n}' to a subdirectory of itself, '${p}'.`}return sn={checkPaths:u,checkPathsSync:a,checkParentPaths:l,checkParentPathsSync:o,isSrcSubdir:i,areIdentical:s},sn}var ln,Ba;function _c(){if(Ba)return ln;Ba=1;const e=Ve(),d=be,h=at().mkdirs,c=It().pathExists,f=ql().utimesMillis,u=Ht();function a(q,L,$,x){typeof $=="function"&&!x?(x=$,$={}):typeof $=="function"&&($={filter:$}),x=x||function(){},$=$||{},$.clobber="clobber"in $?!!$.clobber:!0,$.overwrite="overwrite"in $?!!$.overwrite:$.clobber,$.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),u.checkPaths(q,L,"copy",$,(N,j)=>{if(N)return x(N);const{srcStat:D,destStat:G}=j;u.checkParentPaths(q,D,L,"copy",V=>V?x(V):$.filter?o(l,G,q,L,$,x):l(G,q,L,$,x))})}function l(q,L,$,x,N){const j=d.dirname($);c(j,(D,G)=>{if(D)return N(D);if(G)return i(q,L,$,x,N);h(j,V=>V?N(V):i(q,L,$,x,N))})}function o(q,L,$,x,N,j){Promise.resolve(N.filter($,x)).then(D=>D?q(L,$,x,N,j):j(),D=>j(D))}function s(q,L,$,x,N){return x.filter?o(i,q,L,$,x,N):i(q,L,$,x,N)}function i(q,L,$,x,N){(x.dereference?e.stat:e.lstat)(L,(D,G)=>D?N(D):G.isDirectory()?I(G,q,L,$,x,N):G.isFile()||G.isCharacterDevice()||G.isBlockDevice()?r(G,q,L,$,x,N):G.isSymbolicLink()?v(q,L,$,x,N):G.isSocket()?N(new Error(`Cannot copy a socket file: ${L}`)):G.isFIFO()?N(new Error(`Cannot copy a FIFO pipe: ${L}`)):N(new Error(`Unknown file: ${L}`)))}function r(q,L,$,x,N,j){return L?n(q,$,x,N,j):p(q,$,x,N,j)}function n(q,L,$,x,N){if(x.overwrite)e.unlink($,j=>j?N(j):p(q,L,$,x,N));else return x.errorOnExist?N(new Error(`'${$}' already exists`)):N()}function p(q,L,$,x,N){e.copyFile(L,$,j=>j?N(j):x.preserveTimestamps?g(q.mode,L,$,N):T($,q.mode,N))}function g(q,L,$,x){return y(q)?m($,q,N=>N?x(N):w(q,L,$,x)):w(q,L,$,x)}function y(q){return(q&128)===0}function m(q,L,$){return T(q,L|128,$)}function w(q,L,$,x){P(L,$,N=>N?x(N):T($,q,x))}function T(q,L,$){return e.chmod(q,L,$)}function P(q,L,$){e.stat(q,(x,N)=>x?$(x):f(L,N.atime,N.mtime,$))}function I(q,L,$,x,N,j){return L?O($,x,N,j):b(q.mode,$,x,N,j)}function b(q,L,$,x,N){e.mkdir($,j=>{if(j)return N(j);O(L,$,x,D=>D?N(D):T($,q,N))})}function O(q,L,$,x){e.readdir(q,(N,j)=>N?x(N):S(j,q,L,$,x))}function S(q,L,$,x,N){const j=q.pop();return j?R(q,j,L,$,x,N):N()}function R(q,L,$,x,N,j){const D=d.join($,L),G=d.join(x,L);u.checkPaths(D,G,"copy",N,(V,te)=>{if(V)return j(V);const{destStat:de}=te;s(de,D,G,N,ie=>ie?j(ie):S(q,$,x,N,j))})}function v(q,L,$,x,N){e.readlink(L,(j,D)=>{if(j)return N(j);if(x.dereference&&(D=d.resolve(process.cwd(),D)),q)e.readlink($,(G,V)=>G?G.code==="EINVAL"||G.code==="UNKNOWN"?e.symlink(D,$,N):N(G):(x.dereference&&(V=d.resolve(process.cwd(),V)),u.isSrcSubdir(D,V)?N(new Error(`Cannot copy '${D}' to a subdirectory of itself, '${V}'.`)):q.isDirectory()&&u.isSrcSubdir(V,D)?N(new Error(`Cannot overwrite '${V}' with '${D}'.`)):k(D,$,N)));else return e.symlink(D,$,N)})}function k(q,L,$){e.unlink(L,x=>x?$(x):e.symlink(q,L,$))}return ln=a,ln}var un,Ha;function Ac(){if(Ha)return un;Ha=1;const e=Ve(),d=be,h=at().mkdirsSync,c=ql().utimesMillisSync,f=Ht();function u(S,R,v){typeof v=="function"&&(v={filter:v}),v=v||{},v.clobber="clobber"in v?!!v.clobber:!0,v.overwrite="overwrite"in v?!!v.overwrite:v.clobber,v.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:k,destStat:q}=f.checkPathsSync(S,R,"copy",v);return f.checkParentPathsSync(S,k,R,"copy"),a(q,S,R,v)}function a(S,R,v,k){if(k.filter&&!k.filter(R,v))return;const q=d.dirname(v);return e.existsSync(q)||h(q),o(S,R,v,k)}function l(S,R,v,k){if(!(k.filter&&!k.filter(R,v)))return o(S,R,v,k)}function o(S,R,v,k){const L=(k.dereference?e.statSync:e.lstatSync)(R);if(L.isDirectory())return w(L,S,R,v,k);if(L.isFile()||L.isCharacterDevice()||L.isBlockDevice())return s(L,S,R,v,k);if(L.isSymbolicLink())return b(S,R,v,k);throw L.isSocket()?new Error(`Cannot copy a socket file: ${R}`):L.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${R}`):new Error(`Unknown file: ${R}`)}function s(S,R,v,k,q){return R?i(S,v,k,q):r(S,v,k,q)}function i(S,R,v,k){if(k.overwrite)return e.unlinkSync(v),r(S,R,v,k);if(k.errorOnExist)throw new Error(`'${v}' already exists`)}function r(S,R,v,k){return e.copyFileSync(R,v),k.preserveTimestamps&&n(S.mode,R,v),y(v,S.mode)}function n(S,R,v){return p(S)&&g(v,S),m(R,v)}function p(S){return(S&128)===0}function g(S,R){return y(S,R|128)}function y(S,R){return e.chmodSync(S,R)}function m(S,R){const v=e.statSync(S);return c(R,v.atime,v.mtime)}function w(S,R,v,k,q){return R?P(v,k,q):T(S.mode,v,k,q)}function T(S,R,v,k){return e.mkdirSync(v),P(R,v,k),y(v,S)}function P(S,R,v){e.readdirSync(S).forEach(k=>I(k,S,R,v))}function I(S,R,v,k){const q=d.join(R,S),L=d.join(v,S),{destStat:$}=f.checkPathsSync(q,L,"copy",k);return l($,q,L,k)}function b(S,R,v,k){let q=e.readlinkSync(R);if(k.dereference&&(q=d.resolve(process.cwd(),q)),S){let L;try{L=e.readlinkSync(v)}catch($){if($.code==="EINVAL"||$.code==="UNKNOWN")return e.symlinkSync(q,v);throw $}if(k.dereference&&(L=d.resolve(process.cwd(),L)),f.isSrcSubdir(q,L))throw new Error(`Cannot copy '${q}' to a subdirectory of itself, '${L}'.`);if(e.statSync(v).isDirectory()&&f.isSrcSubdir(L,q))throw new Error(`Cannot overwrite '${L}' with '${q}'.`);return O(q,v)}else return e.symlinkSync(q,v)}function O(S,R){return e.unlinkSync(R),e.symlinkSync(S,R)}return un=u,un}var cn,ja;function ra(){if(ja)return cn;ja=1;const e=ze().fromCallback;return cn={copy:e(_c()),copySync:Ac()},cn}var fn,Ga;function Rc(){if(Ga)return fn;Ga=1;const e=Ve(),d=be,h=xl,c=process.platform==="win32";function f(g){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(m=>{g[m]=g[m]||e[m],m=m+"Sync",g[m]=g[m]||e[m]}),g.maxBusyTries=g.maxBusyTries||3}function u(g,y,m){let w=0;typeof y=="function"&&(m=y,y={}),h(g,"rimraf: missing path"),h.strictEqual(typeof g,"string","rimraf: path should be a string"),h.strictEqual(typeof m,"function","rimraf: callback function required"),h(y,"rimraf: invalid options argument provided"),h.strictEqual(typeof y,"object","rimraf: options should be object"),f(y),a(g,y,function T(P){if(P){if((P.code==="EBUSY"||P.code==="ENOTEMPTY"||P.code==="EPERM")&&w<y.maxBusyTries){w++;const I=w*100;return setTimeout(()=>a(g,y,T),I)}P.code==="ENOENT"&&(P=null)}m(P)})}function a(g,y,m){h(g),h(y),h(typeof m=="function"),y.lstat(g,(w,T)=>{if(w&&w.code==="ENOENT")return m(null);if(w&&w.code==="EPERM"&&c)return l(g,y,w,m);if(T&&T.isDirectory())return s(g,y,w,m);y.unlink(g,P=>{if(P){if(P.code==="ENOENT")return m(null);if(P.code==="EPERM")return c?l(g,y,P,m):s(g,y,P,m);if(P.code==="EISDIR")return s(g,y,P,m)}return m(P)})})}function l(g,y,m,w){h(g),h(y),h(typeof w=="function"),y.chmod(g,438,T=>{T?w(T.code==="ENOENT"?null:m):y.stat(g,(P,I)=>{P?w(P.code==="ENOENT"?null:m):I.isDirectory()?s(g,y,m,w):y.unlink(g,w)})})}function o(g,y,m){let w;h(g),h(y);try{y.chmodSync(g,438)}catch(T){if(T.code==="ENOENT")return;throw m}try{w=y.statSync(g)}catch(T){if(T.code==="ENOENT")return;throw m}w.isDirectory()?n(g,y,m):y.unlinkSync(g)}function s(g,y,m,w){h(g),h(y),h(typeof w=="function"),y.rmdir(g,T=>{T&&(T.code==="ENOTEMPTY"||T.code==="EEXIST"||T.code==="EPERM")?i(g,y,w):T&&T.code==="ENOTDIR"?w(m):w(T)})}function i(g,y,m){h(g),h(y),h(typeof m=="function"),y.readdir(g,(w,T)=>{if(w)return m(w);let P=T.length,I;if(P===0)return y.rmdir(g,m);T.forEach(b=>{u(d.join(g,b),y,O=>{if(!I){if(O)return m(I=O);--P===0&&y.rmdir(g,m)}})})})}function r(g,y){let m;y=y||{},f(y),h(g,"rimraf: missing path"),h.strictEqual(typeof g,"string","rimraf: path should be a string"),h(y,"rimraf: missing options"),h.strictEqual(typeof y,"object","rimraf: options should be object");try{m=y.lstatSync(g)}catch(w){if(w.code==="ENOENT")return;w.code==="EPERM"&&c&&o(g,y,w)}try{m&&m.isDirectory()?n(g,y,null):y.unlinkSync(g)}catch(w){if(w.code==="ENOENT")return;if(w.code==="EPERM")return c?o(g,y,w):n(g,y,w);if(w.code!=="EISDIR")throw w;n(g,y,w)}}function n(g,y,m){h(g),h(y);try{y.rmdirSync(g)}catch(w){if(w.code==="ENOTDIR")throw m;if(w.code==="ENOTEMPTY"||w.code==="EEXIST"||w.code==="EPERM")p(g,y);else if(w.code!=="ENOENT")throw w}}function p(g,y){if(h(g),h(y),y.readdirSync(g).forEach(m=>r(d.join(g,m),y)),c){const m=Date.now();do try{return y.rmdirSync(g,y)}catch{}while(Date.now()-m<500)}else return y.rmdirSync(g,y)}return fn=u,u.sync=r,fn}var dn,Wa;function Hr(){if(Wa)return dn;Wa=1;const e=Ve(),d=ze().fromCallback,h=Rc();function c(u,a){if(e.rm)return e.rm(u,{recursive:!0,force:!0},a);h(u,a)}function f(u){if(e.rmSync)return e.rmSync(u,{recursive:!0,force:!0});h.sync(u)}return dn={remove:d(c),removeSync:f},dn}var hn,Va;function Tc(){if(Va)return hn;Va=1;const e=ze().fromPromise,d=Bt(),h=be,c=at(),f=Hr(),u=e(async function(o){let s;try{s=await d.readdir(o)}catch{return c.mkdirs(o)}return Promise.all(s.map(i=>f.remove(h.join(o,i))))});function a(l){let o;try{o=d.readdirSync(l)}catch{return c.mkdirsSync(l)}o.forEach(s=>{s=h.join(l,s),f.removeSync(s)})}return hn={emptyDirSync:a,emptydirSync:a,emptyDir:u,emptydir:u},hn}var pn,Ya;function Sc(){if(Ya)return pn;Ya=1;const e=ze().fromCallback,d=be,h=Ve(),c=at();function f(a,l){function o(){h.writeFile(a,"",s=>{if(s)return l(s);l()})}h.stat(a,(s,i)=>{if(!s&&i.isFile())return l();const r=d.dirname(a);h.stat(r,(n,p)=>{if(n)return n.code==="ENOENT"?c.mkdirs(r,g=>{if(g)return l(g);o()}):l(n);p.isDirectory()?o():h.readdir(r,g=>{if(g)return l(g)})})})}function u(a){let l;try{l=h.statSync(a)}catch{}if(l&&l.isFile())return;const o=d.dirname(a);try{h.statSync(o).isDirectory()||h.readdirSync(o)}catch(s){if(s&&s.code==="ENOENT")c.mkdirsSync(o);else throw s}h.writeFileSync(a,"")}return pn={createFile:e(f),createFileSync:u},pn}var mn,za;function Cc(){if(za)return mn;za=1;const e=ze().fromCallback,d=be,h=Ve(),c=at(),f=It().pathExists,{areIdentical:u}=Ht();function a(o,s,i){function r(n,p){h.link(n,p,g=>{if(g)return i(g);i(null)})}h.lstat(s,(n,p)=>{h.lstat(o,(g,y)=>{if(g)return g.message=g.message.replace("lstat","ensureLink"),i(g);if(p&&u(y,p))return i(null);const m=d.dirname(s);f(m,(w,T)=>{if(w)return i(w);if(T)return r(o,s);c.mkdirs(m,P=>{if(P)return i(P);r(o,s)})})})})}function l(o,s){let i;try{i=h.lstatSync(s)}catch{}try{const p=h.lstatSync(o);if(i&&u(p,i))return}catch(p){throw p.message=p.message.replace("lstat","ensureLink"),p}const r=d.dirname(s);return h.existsSync(r)||c.mkdirsSync(r),h.linkSync(o,s)}return mn={createLink:e(a),createLinkSync:l},mn}var gn,Xa;function bc(){if(Xa)return gn;Xa=1;const e=be,d=Ve(),h=It().pathExists;function c(u,a,l){if(e.isAbsolute(u))return d.lstat(u,o=>o?(o.message=o.message.replace("lstat","ensureSymlink"),l(o)):l(null,{toCwd:u,toDst:u}));{const o=e.dirname(a),s=e.join(o,u);return h(s,(i,r)=>i?l(i):r?l(null,{toCwd:s,toDst:u}):d.lstat(u,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),l(n)):l(null,{toCwd:u,toDst:e.relative(o,u)})))}}function f(u,a){let l;if(e.isAbsolute(u)){if(l=d.existsSync(u),!l)throw new Error("absolute srcpath does not exist");return{toCwd:u,toDst:u}}else{const o=e.dirname(a),s=e.join(o,u);if(l=d.existsSync(s),l)return{toCwd:s,toDst:u};if(l=d.existsSync(u),!l)throw new Error("relative srcpath does not exist");return{toCwd:u,toDst:e.relative(o,u)}}}return gn={symlinkPaths:c,symlinkPathsSync:f},gn}var vn,Ka;function Pc(){if(Ka)return vn;Ka=1;const e=Ve();function d(c,f,u){if(u=typeof f=="function"?f:u,f=typeof f=="function"?!1:f,f)return u(null,f);e.lstat(c,(a,l)=>{if(a)return u(null,"file");f=l&&l.isDirectory()?"dir":"file",u(null,f)})}function h(c,f){let u;if(f)return f;try{u=e.lstatSync(c)}catch{return"file"}return u&&u.isDirectory()?"dir":"file"}return vn={symlinkType:d,symlinkTypeSync:h},vn}var En,Ja;function Oc(){if(Ja)return En;Ja=1;const e=ze().fromCallback,d=be,h=Bt(),c=at(),f=c.mkdirs,u=c.mkdirsSync,a=bc(),l=a.symlinkPaths,o=a.symlinkPathsSync,s=Pc(),i=s.symlinkType,r=s.symlinkTypeSync,n=It().pathExists,{areIdentical:p}=Ht();function g(w,T,P,I){I=typeof P=="function"?P:I,P=typeof P=="function"?!1:P,h.lstat(T,(b,O)=>{!b&&O.isSymbolicLink()?Promise.all([h.stat(w),h.stat(T)]).then(([S,R])=>{if(p(S,R))return I(null);y(w,T,P,I)}):y(w,T,P,I)})}function y(w,T,P,I){l(w,T,(b,O)=>{if(b)return I(b);w=O.toDst,i(O.toCwd,P,(S,R)=>{if(S)return I(S);const v=d.dirname(T);n(v,(k,q)=>{if(k)return I(k);if(q)return h.symlink(w,T,R,I);f(v,L=>{if(L)return I(L);h.symlink(w,T,R,I)})})})})}function m(w,T,P){let I;try{I=h.lstatSync(T)}catch{}if(I&&I.isSymbolicLink()){const R=h.statSync(w),v=h.statSync(T);if(p(R,v))return}const b=o(w,T);w=b.toDst,P=r(b.toCwd,P);const O=d.dirname(T);return h.existsSync(O)||u(O),h.symlinkSync(w,T,P)}return En={createSymlink:e(g),createSymlinkSync:m},En}var yn,Qa;function Ic(){if(Qa)return yn;Qa=1;const{createFile:e,createFileSync:d}=Sc(),{createLink:h,createLinkSync:c}=Cc(),{createSymlink:f,createSymlinkSync:u}=Oc();return yn={createFile:e,createFileSync:d,ensureFile:e,ensureFileSync:d,createLink:h,createLinkSync:c,ensureLink:h,ensureLinkSync:c,createSymlink:f,createSymlinkSync:u,ensureSymlink:f,ensureSymlinkSync:u},yn}var wn,Za;function na(){if(Za)return wn;Za=1;function e(h,{EOL:c=`
`,finalEOL:f=!0,replacer:u=null,spaces:a}={}){const l=f?c:"";return JSON.stringify(h,u,a).replace(/\n/g,c)+l}function d(h){return Buffer.isBuffer(h)&&(h=h.toString("utf8")),h.replace(/^\uFEFF/,"")}return wn={stringify:e,stripBom:d},wn}var _n,eo;function Dc(){if(eo)return _n;eo=1;let e;try{e=Ve()}catch{e=vt}const d=ze(),{stringify:h,stripBom:c}=na();async function f(i,r={}){typeof r=="string"&&(r={encoding:r});const n=r.fs||e,p="throws"in r?r.throws:!0;let g=await d.fromCallback(n.readFile)(i,r);g=c(g);let y;try{y=JSON.parse(g,r?r.reviver:null)}catch(m){if(p)throw m.message=`${i}: ${m.message}`,m;return null}return y}const u=d.fromPromise(f);function a(i,r={}){typeof r=="string"&&(r={encoding:r});const n=r.fs||e,p="throws"in r?r.throws:!0;try{let g=n.readFileSync(i,r);return g=c(g),JSON.parse(g,r.reviver)}catch(g){if(p)throw g.message=`${i}: ${g.message}`,g;return null}}async function l(i,r,n={}){const p=n.fs||e,g=h(r,n);await d.fromCallback(p.writeFile)(i,g,n)}const o=d.fromPromise(l);function s(i,r,n={}){const p=n.fs||e,g=h(r,n);return p.writeFileSync(i,g,n)}return _n={readFile:u,readFileSync:a,writeFile:o,writeFileSync:s},_n}var An,to;function Nc(){if(to)return An;to=1;const e=Dc();return An={readJson:e.readFile,readJsonSync:e.readFileSync,writeJson:e.writeFile,writeJsonSync:e.writeFileSync},An}var Rn,ro;function ia(){if(ro)return Rn;ro=1;const e=ze().fromCallback,d=Ve(),h=be,c=at(),f=It().pathExists;function u(l,o,s,i){typeof s=="function"&&(i=s,s="utf8");const r=h.dirname(l);f(r,(n,p)=>{if(n)return i(n);if(p)return d.writeFile(l,o,s,i);c.mkdirs(r,g=>{if(g)return i(g);d.writeFile(l,o,s,i)})})}function a(l,...o){const s=h.dirname(l);if(d.existsSync(s))return d.writeFileSync(l,...o);c.mkdirsSync(s),d.writeFileSync(l,...o)}return Rn={outputFile:e(u),outputFileSync:a},Rn}var Tn,no;function Fc(){if(no)return Tn;no=1;const{stringify:e}=na(),{outputFile:d}=ia();async function h(c,f,u={}){const a=e(f,u);await d(c,a,u)}return Tn=h,Tn}var Sn,io;function xc(){if(io)return Sn;io=1;const{stringify:e}=na(),{outputFileSync:d}=ia();function h(c,f,u){const a=e(f,u);d(c,a,u)}return Sn=h,Sn}var Cn,ao;function Lc(){if(ao)return Cn;ao=1;const e=ze().fromPromise,d=Nc();return d.outputJson=e(Fc()),d.outputJsonSync=xc(),d.outputJSON=d.outputJson,d.outputJSONSync=d.outputJsonSync,d.writeJSON=d.writeJson,d.writeJSONSync=d.writeJsonSync,d.readJSON=d.readJson,d.readJSONSync=d.readJsonSync,Cn=d,Cn}var bn,oo;function Uc(){if(oo)return bn;oo=1;const e=Ve(),d=be,h=ra().copy,c=Hr().remove,f=at().mkdirp,u=It().pathExists,a=Ht();function l(n,p,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};const m=g.overwrite||g.clobber||!1;a.checkPaths(n,p,"move",g,(w,T)=>{if(w)return y(w);const{srcStat:P,isChangingCase:I=!1}=T;a.checkParentPaths(n,P,p,"move",b=>{if(b)return y(b);if(o(p))return s(n,p,m,I,y);f(d.dirname(p),O=>O?y(O):s(n,p,m,I,y))})})}function o(n){const p=d.dirname(n);return d.parse(p).root===p}function s(n,p,g,y,m){if(y)return i(n,p,g,m);if(g)return c(p,w=>w?m(w):i(n,p,g,m));u(p,(w,T)=>w?m(w):T?m(new Error("dest already exists.")):i(n,p,g,m))}function i(n,p,g,y){e.rename(n,p,m=>m?m.code!=="EXDEV"?y(m):r(n,p,g,y):y())}function r(n,p,g,y){h(n,p,{overwrite:g,errorOnExist:!0},w=>w?y(w):c(n,y))}return bn=l,bn}var Pn,so;function kc(){if(so)return Pn;so=1;const e=Ve(),d=be,h=ra().copySync,c=Hr().removeSync,f=at().mkdirpSync,u=Ht();function a(r,n,p){p=p||{};const g=p.overwrite||p.clobber||!1,{srcStat:y,isChangingCase:m=!1}=u.checkPathsSync(r,n,"move",p);return u.checkParentPathsSync(r,y,n,"move"),l(n)||f(d.dirname(n)),o(r,n,g,m)}function l(r){const n=d.dirname(r);return d.parse(n).root===n}function o(r,n,p,g){if(g)return s(r,n,p);if(p)return c(n),s(r,n,p);if(e.existsSync(n))throw new Error("dest already exists.");return s(r,n,p)}function s(r,n,p){try{e.renameSync(r,n)}catch(g){if(g.code!=="EXDEV")throw g;return i(r,n,p)}}function i(r,n,p){return h(r,n,{overwrite:p,errorOnExist:!0}),c(r)}return Pn=a,Pn}var On,lo;function qc(){if(lo)return On;lo=1;const e=ze().fromCallback;return On={move:e(Uc()),moveSync:kc()},On}var In,uo;function yt(){return uo||(uo=1,In={...Bt(),...ra(),...Tc(),...Ic(),...Lc(),...at(),...qc(),...ia(),...It(),...Hr()}),In}var Vt={},Ct={},Dn={},bt={},co;function aa(){if(co)return bt;co=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.CancellationError=bt.CancellationToken=void 0;const e=Ll;let d=class extends e.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(f){this.removeParentCancelHandler(),this._parent=f,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(f){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,f!=null&&(this.parent=f)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(f){this.cancelled?f():this.once("cancel",f)}createPromise(f){if(this.cancelled)return Promise.reject(new h);const u=()=>{if(a!=null)try{this.removeListener("cancel",a),a=null}catch{}};let a=null;return new Promise((l,o)=>{let s=null;if(a=()=>{try{s!=null&&(s(),s=null)}finally{o(new h)}},this.cancelled){a();return}this.onCancel(a),f(l,o,i=>{s=i})}).then(l=>(u(),l)).catch(l=>{throw u(),l})}removeParentCancelHandler(){const f=this._parent;f!=null&&this.parentCancelHandler!=null&&(f.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};bt.CancellationToken=d;class h extends Error{constructor(){super("cancelled")}}return bt.CancellationError=h,bt}var Ir={},fo;function jr(){if(fo)return Ir;fo=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.newError=e;function e(d,h){const c=new Error(d);return c.code=h,c}return Ir}var Me={},Dr={exports:{}},Nr={exports:{}},Nn,ho;function $c(){if(ho)return Nn;ho=1;var e=1e3,d=e*60,h=d*60,c=h*24,f=c*7,u=c*365.25;Nn=function(i,r){r=r||{};var n=typeof i;if(n==="string"&&i.length>0)return a(i);if(n==="number"&&isFinite(i))return r.long?o(i):l(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function a(i){if(i=String(i),!(i.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(r){var n=parseFloat(r[1]),p=(r[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"weeks":case"week":case"w":return n*f;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*d;case"seconds":case"second":case"secs":case"sec":case"s":return n*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function l(i){var r=Math.abs(i);return r>=c?Math.round(i/c)+"d":r>=h?Math.round(i/h)+"h":r>=d?Math.round(i/d)+"m":r>=e?Math.round(i/e)+"s":i+"ms"}function o(i){var r=Math.abs(i);return r>=c?s(i,r,c,"day"):r>=h?s(i,r,h,"hour"):r>=d?s(i,r,d,"minute"):r>=e?s(i,r,e,"second"):i+" ms"}function s(i,r,n,p){var g=r>=n*1.5;return Math.round(i/n)+" "+p+(g?"s":"")}return Nn}var Fn,po;function $l(){if(po)return Fn;po=1;function e(d){c.debug=c,c.default=c,c.coerce=s,c.disable=l,c.enable=u,c.enabled=o,c.humanize=$c(),c.destroy=i,Object.keys(d).forEach(r=>{c[r]=d[r]}),c.names=[],c.skips=[],c.formatters={};function h(r){let n=0;for(let p=0;p<r.length;p++)n=(n<<5)-n+r.charCodeAt(p),n|=0;return c.colors[Math.abs(n)%c.colors.length]}c.selectColor=h;function c(r){let n,p=null,g,y;function m(...w){if(!m.enabled)return;const T=m,P=Number(new Date),I=P-(n||P);T.diff=I,T.prev=n,T.curr=P,n=P,w[0]=c.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let b=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(S,R)=>{if(S==="%%")return"%";b++;const v=c.formatters[R];if(typeof v=="function"){const k=w[b];S=v.call(T,k),w.splice(b,1),b--}return S}),c.formatArgs.call(T,w),(T.log||c.log).apply(T,w)}return m.namespace=r,m.useColors=c.useColors(),m.color=c.selectColor(r),m.extend=f,m.destroy=c.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==c.namespaces&&(g=c.namespaces,y=c.enabled(r)),y),set:w=>{p=w}}),typeof c.init=="function"&&c.init(m),m}function f(r,n){const p=c(this.namespace+(typeof n>"u"?":":n)+r);return p.log=this.log,p}function u(r){c.save(r),c.namespaces=r,c.names=[],c.skips=[];const n=(typeof r=="string"?r:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const p of n)p[0]==="-"?c.skips.push(p.slice(1)):c.names.push(p)}function a(r,n){let p=0,g=0,y=-1,m=0;for(;p<r.length;)if(g<n.length&&(n[g]===r[p]||n[g]==="*"))n[g]==="*"?(y=g,m=p,g++):(p++,g++);else if(y!==-1)g=y+1,m++,p=m;else return!1;for(;g<n.length&&n[g]==="*";)g++;return g===n.length}function l(){const r=[...c.names,...c.skips.map(n=>"-"+n)].join(",");return c.enable(""),r}function o(r){for(const n of c.skips)if(a(r,n))return!1;for(const n of c.names)if(a(r,n))return!0;return!1}function s(r){return r instanceof Error?r.stack||r.message:r}function i(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return c.enable(c.load()),c}return Fn=e,Fn}var mo;function Mc(){return mo||(mo=1,(function(e,d){d.formatArgs=c,d.save=f,d.load=u,d.useColors=h,d.storage=a(),d.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function h(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let o;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(o=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(o[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function c(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;o.splice(1,0,s,"color: inherit");let i=0,r=0;o[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(i++,n==="%c"&&(r=i))}),o.splice(r,0,s)}d.log=console.debug||console.log||(()=>{});function f(o){try{o?d.storage.setItem("debug",o):d.storage.removeItem("debug")}catch{}}function u(){let o;try{o=d.storage.getItem("debug")||d.storage.getItem("DEBUG")}catch{}return!o&&typeof process<"u"&&"env"in process&&(o=process.env.DEBUG),o}function a(){try{return localStorage}catch{}}e.exports=$l()(d);const{formatters:l}=e.exports;l.j=function(o){try{return JSON.stringify(o)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Nr,Nr.exports)),Nr.exports}var Fr={exports:{}},xn,go;function Bc(){return go||(go=1,xn=(e,d=process.argv)=>{const h=e.startsWith("-")?"":e.length===1?"-":"--",c=d.indexOf(h+e),f=d.indexOf("--");return c!==-1&&(f===-1||c<f)}),xn}var Ln,vo;function Hc(){if(vo)return Ln;vo=1;const e=Br,d=Ul,h=Bc(),{env:c}=process;let f;h("no-color")||h("no-colors")||h("color=false")||h("color=never")?f=0:(h("color")||h("colors")||h("color=true")||h("color=always"))&&(f=1),"FORCE_COLOR"in c&&(c.FORCE_COLOR==="true"?f=1:c.FORCE_COLOR==="false"?f=0:f=c.FORCE_COLOR.length===0?1:Math.min(parseInt(c.FORCE_COLOR,10),3));function u(o){return o===0?!1:{level:o,hasBasic:!0,has256:o>=2,has16m:o>=3}}function a(o,s){if(f===0)return 0;if(h("color=16m")||h("color=full")||h("color=truecolor"))return 3;if(h("color=256"))return 2;if(o&&!s&&f===void 0)return 0;const i=f||0;if(c.TERM==="dumb")return i;if(process.platform==="win32"){const r=e.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in c)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in c)||c.CI_NAME==="codeship"?1:i;if("TEAMCITY_VERSION"in c)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(c.TEAMCITY_VERSION)?1:0;if(c.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in c){const r=parseInt((c.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(c.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(c.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(c.TERM)||"COLORTERM"in c?1:i}function l(o){const s=a(o,o&&o.isTTY);return u(s)}return Ln={supportsColor:l,stdout:u(a(!0,d.isatty(1))),stderr:u(a(!0,d.isatty(2)))},Ln}var Eo;function jc(){return Eo||(Eo=1,(function(e,d){const h=Ul,c=ta;d.init=i,d.log=l,d.formatArgs=u,d.save=o,d.load=s,d.useColors=f,d.destroy=c.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),d.colors=[6,2,3,4,5,1];try{const n=Hc();n&&(n.stderr||n).level>=2&&(d.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}d.inspectOpts=Object.keys(process.env).filter(n=>/^debug_/i.test(n)).reduce((n,p)=>{const g=p.substring(6).toLowerCase().replace(/_([a-z])/g,(m,w)=>w.toUpperCase());let y=process.env[p];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),n[g]=y,n},{});function f(){return"colors"in d.inspectOpts?!!d.inspectOpts.colors:h.isatty(process.stderr.fd)}function u(n){const{namespace:p,useColors:g}=this;if(g){const y=this.color,m="\x1B[3"+(y<8?y:"8;5;"+y),w=`  ${m};1m${p} \x1B[0m`;n[0]=w+n[0].split(`
`).join(`
`+w),n.push(m+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else n[0]=a()+p+" "+n[0]}function a(){return d.inspectOpts.hideDate?"":new Date().toISOString()+" "}function l(...n){return process.stderr.write(c.formatWithOptions(d.inspectOpts,...n)+`
`)}function o(n){n?process.env.DEBUG=n:delete process.env.DEBUG}function s(){return process.env.DEBUG}function i(n){n.inspectOpts={};const p=Object.keys(d.inspectOpts);for(let g=0;g<p.length;g++)n.inspectOpts[p[g]]=d.inspectOpts[p[g]]}e.exports=$l()(d);const{formatters:r}=e.exports;r.o=function(n){return this.inspectOpts.colors=this.useColors,c.inspect(n,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},r.O=function(n){return this.inspectOpts.colors=this.useColors,c.inspect(n,this.inspectOpts)}})(Fr,Fr.exports)),Fr.exports}var yo;function Gc(){return yo||(yo=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Dr.exports=Mc():Dr.exports=jc()),Dr.exports}var Yt={},wo;function Ml(){if(wo)return Yt;wo=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.ProgressCallbackTransform=void 0;const e=gr;let d=class extends e.Transform{constructor(c,f,u){super(),this.total=c,this.cancellationToken=f,this.onProgress=u,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(c,f,u){if(this.cancellationToken.cancelled){u(new Error("cancelled"),null);return}this.transferred+=c.length,this.delta+=c.length;const a=Date.now();a>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=a+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((a-this.start)/1e3))}),this.delta=0),u(null,c)}_flush(c){if(this.cancellationToken.cancelled){c(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,c(null)}};return Yt.ProgressCallbackTransform=d,Yt}var _o;function Wc(){if(_o)return Me;_o=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.DigestTransform=Me.HttpExecutor=Me.HttpError=void 0,Me.createHttpError=s,Me.parseJson=n,Me.configureRequestOptionsFromUrl=y,Me.configureRequestUrl=m,Me.safeGetHeader=P,Me.configureRequestOptions=b,Me.safeStringifyJson=O;const e=vr,d=Gc(),h=vt,c=gr,f=Et,u=aa(),a=jr(),l=Ml(),o=(0,d.default)("electron-builder");function s(S,R=null){return new r(S.statusCode||-1,`${S.statusCode} ${S.statusMessage}`+(R==null?"":`
`+JSON.stringify(R,null,"  "))+`
Headers: `+O(S.headers),R)}const i=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class r extends Error{constructor(R,v=`HTTP error: ${i.get(R)||R}`,k=null){super(v),this.statusCode=R,this.description=k,this.name="HttpError",this.code=`HTTP_ERROR_${R}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Me.HttpError=r;function n(S){return S.then(R=>R==null||R.length===0?null:JSON.parse(R))}class p{constructor(){this.maxRedirects=10}request(R,v=new u.CancellationToken,k){b(R);const q=k==null?void 0:JSON.stringify(k),L=q?Buffer.from(q):void 0;if(L!=null){o(q);const{headers:$,...x}=R;R={method:"post",headers:{"Content-Type":"application/json","Content-Length":L.length,...$},...x}}return this.doApiRequest(R,v,$=>$.end(L))}doApiRequest(R,v,k,q=0){return o.enabled&&o(`Request: ${O(R)}`),v.createPromise((L,$,x)=>{const N=this.createRequest(R,j=>{try{this.handleResponse(j,R,v,L,$,q,k)}catch(D){$(D)}});this.addErrorAndTimeoutHandlers(N,$,R.timeout),this.addRedirectHandlers(N,R,$,q,j=>{this.doApiRequest(j,v,k,q).then(L).catch($)}),k(N,$),x(()=>N.abort())})}addRedirectHandlers(R,v,k,q,L){}addErrorAndTimeoutHandlers(R,v,k=60*1e3){this.addTimeOutHandler(R,v,k),R.on("error",v),R.on("aborted",()=>{v(new Error("Request has been aborted by the server"))})}handleResponse(R,v,k,q,L,$,x){var N;if(o.enabled&&o(`Response: ${R.statusCode} ${R.statusMessage}, request options: ${O(v)}`),R.statusCode===404){L(s(R,`method: ${v.method||"GET"} url: ${v.protocol||"https:"}//${v.hostname}${v.port?`:${v.port}`:""}${v.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(R.statusCode===204){q();return}const j=(N=R.statusCode)!==null&&N!==void 0?N:0,D=j>=300&&j<400,G=P(R,"location");if(D&&G!=null){if($>this.maxRedirects){L(this.createMaxRedirectError());return}this.doApiRequest(p.prepareRedirectUrlOptions(G,v),k,x,$).then(q).catch(L);return}R.setEncoding("utf8");let V="";R.on("error",L),R.on("data",te=>V+=te),R.on("end",()=>{try{if(R.statusCode!=null&&R.statusCode>=400){const te=P(R,"content-type"),de=te!=null&&(Array.isArray(te)?te.find(ie=>ie.includes("json"))!=null:te.includes("json"));L(s(R,`method: ${v.method||"GET"} url: ${v.protocol||"https:"}//${v.hostname}${v.port?`:${v.port}`:""}${v.path}

          Data:
          ${de?JSON.stringify(JSON.parse(V)):V}
          `))}else q(V.length===0?null:V)}catch(te){L(te)}})}async downloadToBuffer(R,v){return await v.cancellationToken.createPromise((k,q,L)=>{const $=[],x={headers:v.headers||void 0,redirect:"manual"};m(R,x),b(x),this.doDownload(x,{destination:null,options:v,onCancel:L,callback:N=>{N==null?k(Buffer.concat($)):q(N)},responseHandler:(N,j)=>{let D=0;N.on("data",G=>{if(D+=G.length,D>524288e3){j(new Error("Maximum allowed size is 500 MB"));return}$.push(G)}),N.on("end",()=>{j(null)})}},0)})}doDownload(R,v,k){const q=this.createRequest(R,L=>{if(L.statusCode>=400){v.callback(new Error(`Cannot download "${R.protocol||"https:"}//${R.hostname}${R.path}", status ${L.statusCode}: ${L.statusMessage}`));return}L.on("error",v.callback);const $=P(L,"location");if($!=null){k<this.maxRedirects?this.doDownload(p.prepareRedirectUrlOptions($,R),v,k++):v.callback(this.createMaxRedirectError());return}v.responseHandler==null?I(v,L):v.responseHandler(L,v.callback)});this.addErrorAndTimeoutHandlers(q,v.callback,R.timeout),this.addRedirectHandlers(q,R,v.callback,k,L=>{this.doDownload(L,v,k++)}),q.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(R,v,k){R.on("socket",q=>{q.setTimeout(k,()=>{R.abort(),v(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(R,v){const k=y(R,{...v}),q=k.headers;if(q!=null&&q.authorization){const L=p.reconstructOriginalUrl(v),$=g(R,v);p.isCrossOriginRedirect(L,$)&&(o.enabled&&o(`Given the cross-origin redirect (from ${L.host} to ${$.host}), the Authorization header will be stripped out.`),delete q.authorization)}return k}static reconstructOriginalUrl(R){const v=R.protocol||"https:";if(!R.hostname)throw new Error("Missing hostname in request options");const k=R.hostname,q=R.port?`:${R.port}`:"",L=R.path||"/";return new f.URL(`${v}//${k}${q}${L}`)}static isCrossOriginRedirect(R,v){if(R.hostname.toLowerCase()!==v.hostname.toLowerCase())return!0;if(R.protocol==="http:"&&["80",""].includes(R.port)&&v.protocol==="https:"&&["443",""].includes(v.port))return!1;if(R.protocol!==v.protocol)return!0;const k=R.port,q=v.port;return k!==q}static retryOnServerError(R,v=3){for(let k=0;;k++)try{return R()}catch(q){if(k<v&&(q instanceof r&&q.isServerError()||q.code==="EPIPE"))continue;throw q}}}Me.HttpExecutor=p;function g(S,R){try{return new f.URL(S)}catch{const v=R.hostname,k=R.protocol||"https:",q=R.port?`:${R.port}`:"",L=`${k}//${v}${q}`;return new f.URL(S,L)}}function y(S,R){const v=b(R),k=g(S,R);return m(k,v),v}function m(S,R){R.protocol=S.protocol,R.hostname=S.hostname,S.port?R.port=S.port:R.port&&delete R.port,R.path=S.pathname+S.search}class w extends c.Transform{get actual(){return this._actual}constructor(R,v="sha512",k="base64"){super(),this.expected=R,this.algorithm=v,this.encoding=k,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,e.createHash)(v)}_transform(R,v,k){this.digester.update(R),k(null,R)}_flush(R){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(v){R(v);return}R(null)}validate(){if(this._actual==null)throw(0,a.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,a.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Me.DigestTransform=w;function T(S,R,v){return S!=null&&R!=null&&S!==R?(v(new Error(`checksum mismatch: expected ${R} but got ${S} (X-Checksum-Sha2 header)`)),!1):!0}function P(S,R){const v=S.headers[R];return v==null?null:Array.isArray(v)?v.length===0?null:v[v.length-1]:v}function I(S,R){if(!T(P(R,"X-Checksum-Sha2"),S.options.sha2,S.callback))return;const v=[];if(S.options.onProgress!=null){const $=P(R,"content-length");$!=null&&v.push(new l.ProgressCallbackTransform(parseInt($,10),S.options.cancellationToken,S.options.onProgress))}const k=S.options.sha512;k!=null?v.push(new w(k,"sha512",k.length===128&&!k.includes("+")&&!k.includes("Z")&&!k.includes("=")?"hex":"base64")):S.options.sha2!=null&&v.push(new w(S.options.sha2,"sha256","hex"));const q=(0,h.createWriteStream)(S.destination);v.push(q);let L=R;for(const $ of v)$.on("error",x=>{q.close(),S.options.cancellationToken.cancelled||S.callback(x)}),L=L.pipe($);q.on("finish",()=>{q.close(S.callback)})}function b(S,R,v){v!=null&&(S.method=v),S.headers={...S.headers};const k=S.headers;return R!=null&&(k.authorization=R.startsWith("Basic")||R.startsWith("Bearer")?R:`token ${R}`),k["User-Agent"]==null&&(k["User-Agent"]="electron-builder"),(v==null||v==="GET"||k["Cache-Control"]==null)&&(k["Cache-Control"]="no-cache"),S.protocol==null&&process.versions.electron!=null&&(S.protocol="https:"),S}function O(S,R){return JSON.stringify(S,(v,k)=>v.endsWith("Authorization")||v.endsWith("authorization")||v.endsWith("Password")||v.endsWith("PASSWORD")||v.endsWith("Token")||v.includes("password")||v.includes("token")||R!=null&&R.has(v)?"<stripped sensitive data>":k,2)}return Me}var zt={},Ao;function Vc(){if(Ao)return zt;Ao=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.MemoLazy=void 0;let e=class{constructor(c,f){this.selector=c,this.creator=f,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const c=this.selector();if(this._value!==void 0&&d(this.selected,c))return this._value;this.selected=c;const f=this.creator(c);return this.value=f,f}set value(c){this._value=c}};zt.MemoLazy=e;function d(h,c){if(typeof h=="object"&&h!==null&&(typeof c=="object"&&c!==null)){const a=Object.keys(h),l=Object.keys(c);return a.length===l.length&&a.every(o=>d(h[o],c[o]))}return h===c}return zt}var Lt={},Ro;function Yc(){if(Ro)return Lt;Ro=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.githubUrl=e,Lt.githubTagPrefix=d,Lt.getS3LikeProviderBaseUrl=h;function e(a,l="github.com"){return`${a.protocol||"https"}://${a.host||l}`}function d(a){var l;return a.tagNamePrefix?a.tagNamePrefix:!((l=a.vPrefixedTagName)!==null&&l!==void 0)||l?"v":""}function h(a){const l=a.provider;if(l==="s3")return c(a);if(l==="spaces")return u(a);throw new Error(`Not supported provider: ${l}`)}function c(a){let l;if(a.accelerate==!0)l=`https://${a.bucket}.s3-accelerate.amazonaws.com`;else if(a.endpoint!=null)l=`${a.endpoint}/${a.bucket}`;else if(a.bucket.includes(".")){if(a.region==null)throw new Error(`Bucket name "${a.bucket}" includes a dot, but S3 region is missing`);a.region==="us-east-1"?l=`https://s3.amazonaws.com/${a.bucket}`:l=`https://s3-${a.region}.amazonaws.com/${a.bucket}`}else a.region==="cn-north-1"?l=`https://${a.bucket}.s3.${a.region}.amazonaws.com.cn`:l=`https://${a.bucket}.s3.amazonaws.com`;return f(l,a.path)}function f(a,l){return l!=null&&l.length>0&&(l.startsWith("/")||(a+="/"),a+=l),a}function u(a){if(a.name==null)throw new Error("name is missing");if(a.region==null)throw new Error("region is missing");return f(`https://${a.name}.${a.region}.digitaloceanspaces.com`,a.path)}return Lt}var xr={},To;function zc(){if(To)return xr;To=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.retry=d;const e=aa();async function d(h,c){var f;const{retries:u,interval:a,backoff:l=0,attempt:o=0,shouldRetry:s,cancellationToken:i=new e.CancellationToken}=c;try{return await h()}catch(r){if(await Promise.resolve((f=s==null?void 0:s(r))!==null&&f!==void 0?f:!0)&&u>0&&!i.cancelled)return await new Promise(n=>setTimeout(n,a+l*o)),await d(h,{...c,retries:u-1,attempt:o+1});throw r}}return xr}var Lr={},So;function Xc(){if(So)return Lr;So=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.parseDn=e;function e(d){let h=!1,c=null,f="",u=0;d=d.trim();const a=new Map;for(let l=0;l<=d.length;l++){if(l===d.length){c!==null&&a.set(c,f);break}const o=d[l];if(h){if(o==='"'){h=!1;continue}}else{if(o==='"'){h=!0;continue}if(o==="\\"){l++;const s=parseInt(d.slice(l,l+2),16);Number.isNaN(s)?f+=d[l]:(l++,f+=String.fromCharCode(s));continue}if(c===null&&o==="="){c=f,f="";continue}if(o===","||o===";"||o==="+"){c!==null&&a.set(c,f),c=null,f="";continue}}if(o===" "&&!h){if(f.length===0)continue;if(l>u){let s=l;for(;d[s]===" ";)s++;u=s}if(u>=d.length||d[u]===","||d[u]===";"||c===null&&d[u]==="="||c!==null&&d[u]==="+"){l=u-1;continue}}f+=o}return a}return Lr}var Pt={},Co;function Kc(){if(Co)return Pt;Co=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.nil=Pt.UUID=void 0;const e=vr,d=jr(),h="options.name must be either a string or a Buffer",c=(0,e.randomBytes)(16);c[0]=c[0]|1;const f={},u=[];for(let r=0;r<256;r++){const n=(r+256).toString(16).substr(1);f[n]=r,u[r]=n}class a{constructor(n){this.ascii=null,this.binary=null;const p=a.check(n);if(!p)throw new Error("not a UUID");this.version=p.version,p.format==="ascii"?this.ascii=n:this.binary=n}static v5(n,p){return s(n,"sha1",80,p)}toString(){return this.ascii==null&&(this.ascii=i(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(n,p=0){if(typeof n=="string")return n=n.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(n)?n==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(f[n[14]+n[15]]&240)>>4,variant:l((f[n[19]+n[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(n)){if(n.length<p+16)return!1;let g=0;for(;g<16&&n[p+g]===0;g++);return g===16?{version:void 0,variant:"nil",format:"binary"}:{version:(n[p+6]&240)>>4,variant:l((n[p+8]&224)>>5),format:"binary"}}throw(0,d.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(n){const p=Buffer.allocUnsafe(16);let g=0;for(let y=0;y<16;y++)p[y]=f[n[g++]+n[g++]],(y===3||y===5||y===7||y===9)&&(g+=1);return p}}Pt.UUID=a,a.OID=a.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function l(r){switch(r){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var o;(function(r){r[r.ASCII=0]="ASCII",r[r.BINARY=1]="BINARY",r[r.OBJECT=2]="OBJECT"})(o||(o={}));function s(r,n,p,g,y=o.ASCII){const m=(0,e.createHash)(n);if(typeof r!="string"&&!Buffer.isBuffer(r))throw(0,d.newError)(h,"ERR_INVALID_UUID_NAME");m.update(g),m.update(r);const T=m.digest();let P;switch(y){case o.BINARY:T[6]=T[6]&15|p,T[8]=T[8]&63|128,P=T;break;case o.OBJECT:T[6]=T[6]&15|p,T[8]=T[8]&63|128,P=new a(T);break;default:P=u[T[0]]+u[T[1]]+u[T[2]]+u[T[3]]+"-"+u[T[4]]+u[T[5]]+"-"+u[T[6]&15|p]+u[T[7]]+"-"+u[T[8]&63|128]+u[T[9]]+"-"+u[T[10]]+u[T[11]]+u[T[12]]+u[T[13]]+u[T[14]]+u[T[15]];break}return P}function i(r){return u[r[0]]+u[r[1]]+u[r[2]]+u[r[3]]+"-"+u[r[4]]+u[r[5]]+"-"+u[r[6]]+u[r[7]]+"-"+u[r[8]]+u[r[9]]+"-"+u[r[10]]+u[r[11]]+u[r[12]]+u[r[13]]+u[r[14]]+u[r[15]]}return Pt.nil=new a("00000000-0000-0000-0000-000000000000"),Pt}var Ut={},Un={},bo;function Jc(){return bo||(bo=1,(function(e){(function(d){d.parser=function(_,E){return new c(_,E)},d.SAXParser=c,d.SAXStream=i,d.createStream=s,d.MAX_BUFFER_LENGTH=64*1024;var h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];d.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function c(_,E){if(!(this instanceof c))return new c(_,E);var H=this;u(H),H.q=H.c="",H.bufferCheckPosition=d.MAX_BUFFER_LENGTH,H.opt=E||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!_,H.noscript=!!(_||H.opt.noscript),H.state=v.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(d.XML_ENTITIES):Object.create(d.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(y)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!_),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),q(H,"onready")}Object.create||(Object.create=function(_){function E(){}E.prototype=_;var H=new E;return H}),Object.keys||(Object.keys=function(_){var E=[];for(var H in _)_.hasOwnProperty(H)&&E.push(H);return E});function f(_){for(var E=Math.max(d.MAX_BUFFER_LENGTH,10),H=0,F=0,ce=h.length;F<ce;F++){var he=_[h[F]].length;if(he>E)switch(h[F]){case"textNode":$(_);break;case"cdata":L(_,"oncdata",_.cdata),_.cdata="";break;case"script":L(_,"onscript",_.script),_.script="";break;default:N(_,"Max buffer length exceeded: "+h[F])}H=Math.max(H,he)}var pe=d.MAX_BUFFER_LENGTH-H;_.bufferCheckPosition=pe+_.position}function u(_){for(var E=0,H=h.length;E<H;E++)_[h[E]]=""}function a(_){$(_),_.cdata!==""&&(L(_,"oncdata",_.cdata),_.cdata=""),_.script!==""&&(L(_,"onscript",_.script),_.script="")}c.prototype={end:function(){j(this)},write:ve,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var l;try{l=require("stream").Stream}catch{l=function(){}}l||(l=function(){});var o=d.EVENTS.filter(function(_){return _!=="error"&&_!=="end"});function s(_,E){return new i(_,E)}function i(_,E){if(!(this instanceof i))return new i(_,E);l.apply(this),this._parser=new c(_,E),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(F){H.emit("error",F),H._parser.error=null},this._decoder=null,o.forEach(function(F){Object.defineProperty(H,"on"+F,{get:function(){return H._parser["on"+F]},set:function(ce){if(!ce)return H.removeAllListeners(F),H._parser["on"+F]=ce,ce;H.on(F,ce)},enumerable:!0,configurable:!1})})}i.prototype=Object.create(l.prototype,{constructor:{value:i}}),i.prototype.write=function(_){return typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(_)&&(this._decoder||(this._decoder=new TextDecoder("utf8")),_=this._decoder.decode(_,{stream:!0})),this._parser.write(_.toString()),this.emit("data",_),!0},i.prototype.end=function(_){if(_&&_.length&&this.write(_),this._decoder){var E=this._decoder.decode();E&&(this._parser.write(E),this.emit("data",E))}return this._parser.end(),!0},i.prototype.on=function(_,E){var H=this;return!H._parser["on"+_]&&o.indexOf(_)!==-1&&(H._parser["on"+_]=function(){var F=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);F.splice(0,0,_),H.emit.apply(H,F)}),l.prototype.on.call(H,_,E)};var r="[CDATA[",n="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",y={xml:p,xmlns:g},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(_){return _===" "||_===`
`||_==="\r"||_==="	"}function b(_){return _==='"'||_==="'"}function O(_){return _===">"||I(_)}function S(_,E){return _.test(E)}function R(_,E){return!S(_,E)}var v=0;d.STATE={BEGIN:v++,BEGIN_WHITESPACE:v++,TEXT:v++,TEXT_ENTITY:v++,OPEN_WAKA:v++,SGML_DECL:v++,SGML_DECL_QUOTED:v++,DOCTYPE:v++,DOCTYPE_QUOTED:v++,DOCTYPE_DTD:v++,DOCTYPE_DTD_QUOTED:v++,COMMENT_STARTING:v++,COMMENT:v++,COMMENT_ENDING:v++,COMMENT_ENDED:v++,CDATA:v++,CDATA_ENDING:v++,CDATA_ENDING_2:v++,PROC_INST:v++,PROC_INST_BODY:v++,PROC_INST_ENDING:v++,OPEN_TAG:v++,OPEN_TAG_SLASH:v++,ATTRIB:v++,ATTRIB_NAME:v++,ATTRIB_NAME_SAW_WHITE:v++,ATTRIB_VALUE:v++,ATTRIB_VALUE_QUOTED:v++,ATTRIB_VALUE_CLOSED:v++,ATTRIB_VALUE_UNQUOTED:v++,ATTRIB_VALUE_ENTITY_Q:v++,ATTRIB_VALUE_ENTITY_U:v++,CLOSE_TAG:v++,CLOSE_TAG_SAW_WHITE:v++,SCRIPT:v++,SCRIPT_ENDING:v++},d.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},d.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(d.ENTITIES).forEach(function(_){var E=d.ENTITIES[_],H=typeof E=="number"?String.fromCharCode(E):E;d.ENTITIES[_]=H});for(var k in d.STATE)d.STATE[d.STATE[k]]=k;v=d.STATE;function q(_,E,H){_[E]&&_[E](H)}function L(_,E,H){_.textNode&&$(_),q(_,E,H)}function $(_){_.textNode=x(_.opt,_.textNode),_.textNode&&q(_,"ontext",_.textNode),_.textNode=""}function x(_,E){return _.trim&&(E=E.trim()),_.normalize&&(E=E.replace(/\s+/g," ")),E}function N(_,E){return $(_),_.trackPosition&&(E+=`
Line: `+_.line+`
Column: `+_.column+`
Char: `+_.c),E=new Error(E),_.error=E,q(_,"onerror",E),_}function j(_){return _.sawRoot&&!_.closedRoot&&D(_,"Unclosed root tag"),_.state!==v.BEGIN&&_.state!==v.BEGIN_WHITESPACE&&_.state!==v.TEXT&&N(_,"Unexpected end"),$(_),_.c="",_.closed=!0,q(_,"onend"),c.call(_,_.strict,_.opt),_}function D(_,E){if(typeof _!="object"||!(_ instanceof c))throw new Error("bad call to strictFail");_.strict&&N(_,E)}function G(_){_.strict||(_.tagName=_.tagName[_.looseCase]());var E=_.tags[_.tags.length-1]||_,H=_.tag={name:_.tagName,attributes:{}};_.opt.xmlns&&(H.ns=E.ns),_.attribList.length=0,L(_,"onopentagstart",H)}function V(_,E){var H=_.indexOf(":"),F=H<0?["",_]:_.split(":"),ce=F[0],he=F[1];return E&&_==="xmlns"&&(ce="xmlns",he=""),{prefix:ce,local:he}}function te(_){if(_.strict||(_.attribName=_.attribName[_.looseCase]()),_.attribList.indexOf(_.attribName)!==-1||_.tag.attributes.hasOwnProperty(_.attribName)){_.attribName=_.attribValue="";return}if(_.opt.xmlns){var E=V(_.attribName,!0),H=E.prefix,F=E.local;if(H==="xmlns")if(F==="xml"&&_.attribValue!==p)D(_,"xml: prefix must be bound to "+p+`
Actual: `+_.attribValue);else if(F==="xmlns"&&_.attribValue!==g)D(_,"xmlns: prefix must be bound to "+g+`
Actual: `+_.attribValue);else{var ce=_.tag,he=_.tags[_.tags.length-1]||_;ce.ns===he.ns&&(ce.ns=Object.create(he.ns)),ce.ns[F]=_.attribValue}_.attribList.push([_.attribName,_.attribValue])}else _.tag.attributes[_.attribName]=_.attribValue,L(_,"onattribute",{name:_.attribName,value:_.attribValue});_.attribName=_.attribValue=""}function de(_,E){if(_.opt.xmlns){var H=_.tag,F=V(_.tagName);H.prefix=F.prefix,H.local=F.local,H.uri=H.ns[F.prefix]||"",H.prefix&&!H.uri&&(D(_,"Unbound namespace prefix: "+JSON.stringify(_.tagName)),H.uri=F.prefix);var ce=_.tags[_.tags.length-1]||_;H.ns&&ce.ns!==H.ns&&Object.keys(H.ns).forEach(function(t){L(_,"onopennamespace",{prefix:t,uri:H.ns[t]})});for(var he=0,pe=_.attribList.length;he<pe;he++){var Ae=_.attribList[he],ye=Ae[0],We=Ae[1],Te=V(ye,!0),He=Te.prefix,ct=Te.local,ot=He===""?"":H.ns[He]||"",it={name:ye,value:We,prefix:He,local:ct,uri:ot};He&&He!=="xmlns"&&!ot&&(D(_,"Unbound namespace prefix: "+JSON.stringify(He)),it.uri=He),_.tag.attributes[ye]=it,L(_,"onattribute",it)}_.attribList.length=0}_.tag.isSelfClosing=!!E,_.sawRoot=!0,_.tags.push(_.tag),L(_,"onopentag",_.tag),E||(!_.noscript&&_.tagName.toLowerCase()==="script"?_.state=v.SCRIPT:_.state=v.TEXT,_.tag=null,_.tagName=""),_.attribName=_.attribValue="",_.attribList.length=0}function ie(_){if(!_.tagName){D(_,"Weird empty close tag."),_.textNode+="</>",_.state=v.TEXT;return}if(_.script){if(_.tagName!=="script"){_.script+="</"+_.tagName+">",_.tagName="",_.state=v.SCRIPT;return}L(_,"onscript",_.script),_.script=""}var E=_.tags.length,H=_.tagName;_.strict||(H=H[_.looseCase]());for(var F=H;E--;){var ce=_.tags[E];if(ce.name!==F)D(_,"Unexpected close tag");else break}if(E<0){D(_,"Unmatched closing tag: "+_.tagName),_.textNode+="</"+_.tagName+">",_.state=v.TEXT;return}_.tagName=H;for(var he=_.tags.length;he-- >E;){var pe=_.tag=_.tags.pop();_.tagName=_.tag.name,L(_,"onclosetag",_.tagName);var Ae={};for(var ye in pe.ns)Ae[ye]=pe.ns[ye];var We=_.tags[_.tags.length-1]||_;_.opt.xmlns&&pe.ns!==We.ns&&Object.keys(pe.ns).forEach(function(Te){var He=pe.ns[Te];L(_,"onclosenamespace",{prefix:Te,uri:He})})}E===0&&(_.closedRoot=!0),_.tagName=_.attribValue=_.attribName="",_.attribList.length=0,_.state=v.TEXT}function _e(_){var E=_.entity,H=E.toLowerCase(),F,ce="";return _.ENTITIES[E]?_.ENTITIES[E]:_.ENTITIES[H]?_.ENTITIES[H]:(E=H,E.charAt(0)==="#"&&(E.charAt(1)==="x"?(E=E.slice(2),F=parseInt(E,16),ce=F.toString(16)):(E=E.slice(1),F=parseInt(E,10),ce=F.toString(10))),E=E.replace(/^0+/,""),isNaN(F)||ce.toLowerCase()!==E||F<0||F>1114111?(D(_,"Invalid character entity"),"&"+_.entity+";"):String.fromCodePoint(F))}function Ee(_,E){E==="<"?(_.state=v.OPEN_WAKA,_.startTagPosition=_.position):I(E)||(D(_,"Non-whitespace before first tag."),_.textNode=E,_.state=v.TEXT)}function Q(_,E){var H="";return E<_.length&&(H=_.charAt(E)),H}function ve(_){var E=this;if(this.error)throw this.error;if(E.closed)return N(E,"Cannot write after close. Assign an onready handler.");if(_===null)return j(E);typeof _=="object"&&(_=_.toString());for(var H=0,F="";F=Q(_,H++),E.c=F,!!F;)switch(E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++),E.state){case v.BEGIN:if(E.state=v.BEGIN_WHITESPACE,F==="\uFEFF")continue;Ee(E,F);continue;case v.BEGIN_WHITESPACE:Ee(E,F);continue;case v.TEXT:if(E.sawRoot&&!E.closedRoot){for(var he=H-1;F&&F!=="<"&&F!=="&";)F=Q(_,H++),F&&E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++);E.textNode+=_.substring(he,H-1)}F==="<"&&!(E.sawRoot&&E.closedRoot&&!E.strict)?(E.state=v.OPEN_WAKA,E.startTagPosition=E.position):(!I(F)&&(!E.sawRoot||E.closedRoot)&&D(E,"Text data outside of root node."),F==="&"?E.state=v.TEXT_ENTITY:E.textNode+=F);continue;case v.SCRIPT:F==="<"?E.state=v.SCRIPT_ENDING:E.script+=F;continue;case v.SCRIPT_ENDING:F==="/"?E.state=v.CLOSE_TAG:(E.script+="<"+F,E.state=v.SCRIPT);continue;case v.OPEN_WAKA:if(F==="!")E.state=v.SGML_DECL,E.sgmlDecl="";else if(!I(F))if(S(m,F))E.state=v.OPEN_TAG,E.tagName=F;else if(F==="/")E.state=v.CLOSE_TAG,E.tagName="";else if(F==="?")E.state=v.PROC_INST,E.procInstName=E.procInstBody="";else{if(D(E,"Unencoded <"),E.startTagPosition+1<E.position){var ce=E.position-E.startTagPosition;F=new Array(ce).join(" ")+F}E.textNode+="<"+F,E.state=v.TEXT}continue;case v.SGML_DECL:if(E.sgmlDecl+F==="--"){E.state=v.COMMENT,E.comment="",E.sgmlDecl="";continue}E.doctype&&E.doctype!==!0&&E.sgmlDecl?(E.state=v.DOCTYPE_DTD,E.doctype+="<!"+E.sgmlDecl+F,E.sgmlDecl=""):(E.sgmlDecl+F).toUpperCase()===r?(L(E,"onopencdata"),E.state=v.CDATA,E.sgmlDecl="",E.cdata=""):(E.sgmlDecl+F).toUpperCase()===n?(E.state=v.DOCTYPE,(E.doctype||E.sawRoot)&&D(E,"Inappropriately located doctype declaration"),E.doctype="",E.sgmlDecl=""):F===">"?(L(E,"onsgmldeclaration",E.sgmlDecl),E.sgmlDecl="",E.state=v.TEXT):(b(F)&&(E.state=v.SGML_DECL_QUOTED),E.sgmlDecl+=F);continue;case v.SGML_DECL_QUOTED:F===E.q&&(E.state=v.SGML_DECL,E.q=""),E.sgmlDecl+=F;continue;case v.DOCTYPE:F===">"?(E.state=v.TEXT,L(E,"ondoctype",E.doctype),E.doctype=!0):(E.doctype+=F,F==="["?E.state=v.DOCTYPE_DTD:b(F)&&(E.state=v.DOCTYPE_QUOTED,E.q=F));continue;case v.DOCTYPE_QUOTED:E.doctype+=F,F===E.q&&(E.q="",E.state=v.DOCTYPE);continue;case v.DOCTYPE_DTD:F==="]"?(E.doctype+=F,E.state=v.DOCTYPE):F==="<"?(E.state=v.OPEN_WAKA,E.startTagPosition=E.position):b(F)?(E.doctype+=F,E.state=v.DOCTYPE_DTD_QUOTED,E.q=F):E.doctype+=F;continue;case v.DOCTYPE_DTD_QUOTED:E.doctype+=F,F===E.q&&(E.state=v.DOCTYPE_DTD,E.q="");continue;case v.COMMENT:F==="-"?E.state=v.COMMENT_ENDING:E.comment+=F;continue;case v.COMMENT_ENDING:F==="-"?(E.state=v.COMMENT_ENDED,E.comment=x(E.opt,E.comment),E.comment&&L(E,"oncomment",E.comment),E.comment=""):(E.comment+="-"+F,E.state=v.COMMENT);continue;case v.COMMENT_ENDED:F!==">"?(D(E,"Malformed comment"),E.comment+="--"+F,E.state=v.COMMENT):E.doctype&&E.doctype!==!0?E.state=v.DOCTYPE_DTD:E.state=v.TEXT;continue;case v.CDATA:for(var he=H-1;F&&F!=="]";)F=Q(_,H++),F&&E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++);E.cdata+=_.substring(he,H-1),F==="]"&&(E.state=v.CDATA_ENDING);continue;case v.CDATA_ENDING:F==="]"?E.state=v.CDATA_ENDING_2:(E.cdata+="]"+F,E.state=v.CDATA);continue;case v.CDATA_ENDING_2:F===">"?(E.cdata&&L(E,"oncdata",E.cdata),L(E,"onclosecdata"),E.cdata="",E.state=v.TEXT):F==="]"?E.cdata+="]":(E.cdata+="]]"+F,E.state=v.CDATA);continue;case v.PROC_INST:F==="?"?E.state=v.PROC_INST_ENDING:I(F)?E.state=v.PROC_INST_BODY:E.procInstName+=F;continue;case v.PROC_INST_BODY:if(!E.procInstBody&&I(F))continue;F==="?"?E.state=v.PROC_INST_ENDING:E.procInstBody+=F;continue;case v.PROC_INST_ENDING:F===">"?(L(E,"onprocessinginstruction",{name:E.procInstName,body:E.procInstBody}),E.procInstName=E.procInstBody="",E.state=v.TEXT):(E.procInstBody+="?"+F,E.state=v.PROC_INST_BODY);continue;case v.OPEN_TAG:S(w,F)?E.tagName+=F:(G(E),F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:(I(F)||D(E,"Invalid character in tag name"),E.state=v.ATTRIB));continue;case v.OPEN_TAG_SLASH:F===">"?(de(E,!0),ie(E)):(D(E,"Forward-slash in opening tag not followed by >"),E.state=v.ATTRIB);continue;case v.ATTRIB:if(I(F))continue;F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:S(m,F)?(E.attribName=F,E.attribValue="",E.state=v.ATTRIB_NAME):D(E,"Invalid attribute name");continue;case v.ATTRIB_NAME:F==="="?E.state=v.ATTRIB_VALUE:F===">"?(D(E,"Attribute without value"),E.attribValue=E.attribName,te(E),de(E)):I(F)?E.state=v.ATTRIB_NAME_SAW_WHITE:S(w,F)?E.attribName+=F:D(E,"Invalid attribute name");continue;case v.ATTRIB_NAME_SAW_WHITE:if(F==="=")E.state=v.ATTRIB_VALUE;else{if(I(F))continue;D(E,"Attribute without value"),E.tag.attributes[E.attribName]="",E.attribValue="",L(E,"onattribute",{name:E.attribName,value:""}),E.attribName="",F===">"?de(E):S(m,F)?(E.attribName=F,E.state=v.ATTRIB_NAME):(D(E,"Invalid attribute name"),E.state=v.ATTRIB)}continue;case v.ATTRIB_VALUE:if(I(F))continue;b(F)?(E.q=F,E.state=v.ATTRIB_VALUE_QUOTED):(E.opt.unquotedAttributeValues||N(E,"Unquoted attribute value"),E.state=v.ATTRIB_VALUE_UNQUOTED,E.attribValue=F);continue;case v.ATTRIB_VALUE_QUOTED:if(F!==E.q){F==="&"?E.state=v.ATTRIB_VALUE_ENTITY_Q:E.attribValue+=F;continue}te(E),E.q="",E.state=v.ATTRIB_VALUE_CLOSED;continue;case v.ATTRIB_VALUE_CLOSED:I(F)?E.state=v.ATTRIB:F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:S(m,F)?(D(E,"No whitespace between attributes"),E.attribName=F,E.attribValue="",E.state=v.ATTRIB_NAME):D(E,"Invalid attribute name");continue;case v.ATTRIB_VALUE_UNQUOTED:if(!O(F)){F==="&"?E.state=v.ATTRIB_VALUE_ENTITY_U:E.attribValue+=F;continue}te(E),F===">"?de(E):E.state=v.ATTRIB;continue;case v.CLOSE_TAG:if(E.tagName)F===">"?ie(E):S(w,F)?E.tagName+=F:E.script?(E.script+="</"+E.tagName+F,E.tagName="",E.state=v.SCRIPT):(I(F)||D(E,"Invalid tagname in closing tag"),E.state=v.CLOSE_TAG_SAW_WHITE);else{if(I(F))continue;R(m,F)?E.script?(E.script+="</"+F,E.state=v.SCRIPT):D(E,"Invalid tagname in closing tag."):E.tagName=F}continue;case v.CLOSE_TAG_SAW_WHITE:if(I(F))continue;F===">"?ie(E):D(E,"Invalid characters in closing tag");continue;case v.TEXT_ENTITY:case v.ATTRIB_VALUE_ENTITY_Q:case v.ATTRIB_VALUE_ENTITY_U:var pe,Ae;switch(E.state){case v.TEXT_ENTITY:pe=v.TEXT,Ae="textNode";break;case v.ATTRIB_VALUE_ENTITY_Q:pe=v.ATTRIB_VALUE_QUOTED,Ae="attribValue";break;case v.ATTRIB_VALUE_ENTITY_U:pe=v.ATTRIB_VALUE_UNQUOTED,Ae="attribValue";break}if(F===";"){var ye=_e(E);E.opt.unparsedEntities&&!Object.values(d.XML_ENTITIES).includes(ye)?(E.entity="",E.state=pe,E.write(ye)):(E[Ae]+=ye,E.entity="",E.state=pe)}else S(E.entity.length?P:T,F)?E.entity+=F:(D(E,"Invalid character in entity name"),E[Ae]+="&"+E.entity+F,E.entity="",E.state=pe);continue;default:throw new Error(E,"Unknown state: "+E.state)}return E.position>=E.bufferCheckPosition&&f(E),E}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var _=String.fromCharCode,E=Math.floor,H=function(){var F=16384,ce=[],he,pe,Ae=-1,ye=arguments.length;if(!ye)return"";for(var We="";++Ae<ye;){var Te=Number(arguments[Ae]);if(!isFinite(Te)||Te<0||Te>1114111||E(Te)!==Te)throw RangeError("Invalid code point: "+Te);Te<=65535?ce.push(Te):(Te-=65536,he=(Te>>10)+55296,pe=Te%1024+56320,ce.push(he,pe)),(Ae+1===ye||ce.length>F)&&(We+=_.apply(null,ce),ce.length=0)}return We};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H})()})(e)})(Un)),Un}var Po;function Qc(){if(Po)return Ut;Po=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.XElement=void 0,Ut.parseXml=a;const e=Jc(),d=jr();class h{constructor(o){if(this.name=o,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!o)throw(0,d.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!f(o))throw(0,d.newError)(`Invalid element name: ${o}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(o){const s=this.attributes===null?null:this.attributes[o];if(s==null)throw(0,d.newError)(`No attribute "${o}"`,"ERR_XML_MISSED_ATTRIBUTE");return s}removeAttribute(o){this.attributes!==null&&delete this.attributes[o]}element(o,s=!1,i=null){const r=this.elementOrNull(o,s);if(r===null)throw(0,d.newError)(i||`No element "${o}"`,"ERR_XML_MISSED_ELEMENT");return r}elementOrNull(o,s=!1){if(this.elements===null)return null;for(const i of this.elements)if(u(i,o,s))return i;return null}getElements(o,s=!1){return this.elements===null?[]:this.elements.filter(i=>u(i,o,s))}elementValueOrEmpty(o,s=!1){const i=this.elementOrNull(o,s);return i===null?"":i.value}}Ut.XElement=h;const c=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function f(l){return c.test(l)}function u(l,o,s){const i=l.name;return i===o||s===!0&&i.length===o.length&&i.toLowerCase()===o.toLowerCase()}function a(l){let o=null;const s=e.parser(!0,{}),i=[];return s.onopentag=r=>{const n=new h(r.name);if(n.attributes=r.attributes,o===null)o=n;else{const p=i[i.length-1];p.elements==null&&(p.elements=[]),p.elements.push(n)}i.push(n)},s.onclosetag=()=>{i.pop()},s.ontext=r=>{i.length>0&&(i[i.length-1].value=r)},s.oncdata=r=>{const n=i[i.length-1];n.value=r,n.isCData=!0},s.onerror=r=>{throw r},s.write(l),o}return Ut}var Oo;function ke(){return Oo||(Oo=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.UUID=e.parseDn=e.retry=e.githubTagPrefix=e.githubUrl=e.getS3LikeProviderBaseUrl=e.ProgressCallbackTransform=e.MemoLazy=e.safeStringifyJson=e.safeGetHeader=e.parseJson=e.HttpExecutor=e.HttpError=e.DigestTransform=e.createHttpError=e.configureRequestUrl=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.newError=e.CancellationToken=e.CancellationError=void 0,e.asArray=r;var d=aa();Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return d.CancellationError}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}});var h=jr();Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return h.newError}});var c=Wc();Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return c.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return c.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return c.configureRequestUrl}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return c.createHttpError}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return c.DigestTransform}}),Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return c.HttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return c.HttpExecutor}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return c.parseJson}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return c.safeGetHeader}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return c.safeStringifyJson}});var f=Vc();Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return f.MemoLazy}});var u=Ml();Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return u.ProgressCallbackTransform}});var a=Yc();Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return a.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return a.githubUrl}}),Object.defineProperty(e,"githubTagPrefix",{enumerable:!0,get:function(){return a.githubTagPrefix}});var l=zc();Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return l.retry}});var o=Xc();Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return o.parseDn}});var s=Kc();Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return s.UUID}});var i=Qc();Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return i.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return i.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function r(n){return n==null?[]:Array.isArray(n)?n:[n]}})(Dn)),Dn}var Be={},Ur={},pt={},Io;function Er(){if(Io)return pt;Io=1;function e(a){return typeof a>"u"||a===null}function d(a){return typeof a=="object"&&a!==null}function h(a){return Array.isArray(a)?a:e(a)?[]:[a]}function c(a,l){var o,s,i,r;if(l)for(r=Object.keys(l),o=0,s=r.length;o<s;o+=1)i=r[o],a[i]=l[i];return a}function f(a,l){var o="",s;for(s=0;s<l;s+=1)o+=a;return o}function u(a){return a===0&&Number.NEGATIVE_INFINITY===1/a}return pt.isNothing=e,pt.isObject=d,pt.toArray=h,pt.repeat=f,pt.isNegativeZero=u,pt.extend=c,pt}var kn,Do;function yr(){if(Do)return kn;Do=1;function e(h,c){var f="",u=h.reason||"(unknown reason)";return h.mark?(h.mark.name&&(f+='in "'+h.mark.name+'" '),f+="("+(h.mark.line+1)+":"+(h.mark.column+1)+")",!c&&h.mark.snippet&&(f+=`

`+h.mark.snippet),u+" "+f):u}function d(h,c){Error.call(this),this.name="YAMLException",this.reason=h,this.mark=c,this.message=e(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.toString=function(c){return this.name+": "+e(this,c)},kn=d,kn}var qn,No;function Zc(){if(No)return qn;No=1;var e=Er();function d(f,u,a,l,o){var s="",i="",r=Math.floor(o/2)-1;return l-u>r&&(s=" ... ",u=l-r+s.length),a-l>r&&(i=" ...",a=l+r-i.length),{str:s+f.slice(u,a).replace(/\t/g,"")+i,pos:l-u+s.length}}function h(f,u){return e.repeat(" ",u-f.length)+f}function c(f,u){if(u=Object.create(u||null),!f.buffer)return null;u.maxLength||(u.maxLength=79),typeof u.indent!="number"&&(u.indent=1),typeof u.linesBefore!="number"&&(u.linesBefore=3),typeof u.linesAfter!="number"&&(u.linesAfter=2);for(var a=/\r?\n|\r|\0/g,l=[0],o=[],s,i=-1;s=a.exec(f.buffer);)o.push(s.index),l.push(s.index+s[0].length),f.position<=s.index&&i<0&&(i=l.length-2);i<0&&(i=l.length-1);var r="",n,p,g=Math.min(f.line+u.linesAfter,o.length).toString().length,y=u.maxLength-(u.indent+g+3);for(n=1;n<=u.linesBefore&&!(i-n<0);n++)p=d(f.buffer,l[i-n],o[i-n],f.position-(l[i]-l[i-n]),y),r=e.repeat(" ",u.indent)+h((f.line-n+1).toString(),g)+" | "+p.str+`
`+r;for(p=d(f.buffer,l[i],o[i],f.position,y),r+=e.repeat(" ",u.indent)+h((f.line+1).toString(),g)+" | "+p.str+`
`,r+=e.repeat("-",u.indent+g+3+p.pos)+`^
`,n=1;n<=u.linesAfter&&!(i+n>=o.length);n++)p=d(f.buffer,l[i+n],o[i+n],f.position-(l[i]-l[i+n]),y),r+=e.repeat(" ",u.indent)+h((f.line+n+1).toString(),g)+" | "+p.str+`
`;return r.replace(/\n$/,"")}return qn=c,qn}var $n,Fo;function je(){if(Fo)return $n;Fo=1;var e=yr(),d=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],h=["scalar","sequence","mapping"];function c(u){var a={};return u!==null&&Object.keys(u).forEach(function(l){u[l].forEach(function(o){a[String(o)]=l})}),a}function f(u,a){if(a=a||{},Object.keys(a).forEach(function(l){if(d.indexOf(l)===-1)throw new e('Unknown option "'+l+'" is met in definition of "'+u+'" YAML type.')}),this.options=a,this.tag=u,this.kind=a.kind||null,this.resolve=a.resolve||function(){return!0},this.construct=a.construct||function(l){return l},this.instanceOf=a.instanceOf||null,this.predicate=a.predicate||null,this.represent=a.represent||null,this.representName=a.representName||null,this.defaultStyle=a.defaultStyle||null,this.multi=a.multi||!1,this.styleAliases=c(a.styleAliases||null),h.indexOf(this.kind)===-1)throw new e('Unknown kind "'+this.kind+'" is specified for "'+u+'" YAML type.')}return $n=f,$n}var Mn,xo;function Bl(){if(xo)return Mn;xo=1;var e=yr(),d=je();function h(u,a){var l=[];return u[a].forEach(function(o){var s=l.length;l.forEach(function(i,r){i.tag===o.tag&&i.kind===o.kind&&i.multi===o.multi&&(s=r)}),l[s]=o}),l}function c(){var u={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},a,l;function o(s){s.multi?(u.multi[s.kind].push(s),u.multi.fallback.push(s)):u[s.kind][s.tag]=u.fallback[s.tag]=s}for(a=0,l=arguments.length;a<l;a+=1)arguments[a].forEach(o);return u}function f(u){return this.extend(u)}return f.prototype.extend=function(a){var l=[],o=[];if(a instanceof d)o.push(a);else if(Array.isArray(a))o=o.concat(a);else if(a&&(Array.isArray(a.implicit)||Array.isArray(a.explicit)))a.implicit&&(l=l.concat(a.implicit)),a.explicit&&(o=o.concat(a.explicit));else throw new e("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");l.forEach(function(i){if(!(i instanceof d))throw new e("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new e("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new e("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),o.forEach(function(i){if(!(i instanceof d))throw new e("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(f.prototype);return s.implicit=(this.implicit||[]).concat(l),s.explicit=(this.explicit||[]).concat(o),s.compiledImplicit=h(s,"implicit"),s.compiledExplicit=h(s,"explicit"),s.compiledTypeMap=c(s.compiledImplicit,s.compiledExplicit),s},Mn=f,Mn}var Bn,Lo;function Hl(){if(Lo)return Bn;Lo=1;var e=je();return Bn=new e("tag:yaml.org,2002:str",{kind:"scalar",construct:function(d){return d!==null?d:""}}),Bn}var Hn,Uo;function jl(){if(Uo)return Hn;Uo=1;var e=je();return Hn=new e("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(d){return d!==null?d:[]}}),Hn}var jn,ko;function Gl(){if(ko)return jn;ko=1;var e=je();return jn=new e("tag:yaml.org,2002:map",{kind:"mapping",construct:function(d){return d!==null?d:{}}}),jn}var Gn,qo;function Wl(){if(qo)return Gn;qo=1;var e=Bl();return Gn=new e({explicit:[Hl(),jl(),Gl()]}),Gn}var Wn,$o;function Vl(){if($o)return Wn;$o=1;var e=je();function d(f){if(f===null)return!0;var u=f.length;return u===1&&f==="~"||u===4&&(f==="null"||f==="Null"||f==="NULL")}function h(){return null}function c(f){return f===null}return Wn=new e("tag:yaml.org,2002:null",{kind:"scalar",resolve:d,construct:h,predicate:c,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Wn}var Vn,Mo;function Yl(){if(Mo)return Vn;Mo=1;var e=je();function d(f){if(f===null)return!1;var u=f.length;return u===4&&(f==="true"||f==="True"||f==="TRUE")||u===5&&(f==="false"||f==="False"||f==="FALSE")}function h(f){return f==="true"||f==="True"||f==="TRUE"}function c(f){return Object.prototype.toString.call(f)==="[object Boolean]"}return Vn=new e("tag:yaml.org,2002:bool",{kind:"scalar",resolve:d,construct:h,predicate:c,represent:{lowercase:function(f){return f?"true":"false"},uppercase:function(f){return f?"TRUE":"FALSE"},camelcase:function(f){return f?"True":"False"}},defaultStyle:"lowercase"}),Vn}var Yn,Bo;function zl(){if(Bo)return Yn;Bo=1;var e=Er(),d=je();function h(o){return 48<=o&&o<=57||65<=o&&o<=70||97<=o&&o<=102}function c(o){return 48<=o&&o<=55}function f(o){return 48<=o&&o<=57}function u(o){if(o===null)return!1;var s=o.length,i=0,r=!1,n;if(!s)return!1;if(n=o[i],(n==="-"||n==="+")&&(n=o[++i]),n==="0"){if(i+1===s)return!0;if(n=o[++i],n==="b"){for(i++;i<s;i++)if(n=o[i],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(i++;i<s;i++)if(n=o[i],n!=="_"){if(!h(o.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(i++;i<s;i++)if(n=o[i],n!=="_"){if(!c(o.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;i<s;i++)if(n=o[i],n!=="_"){if(!f(o.charCodeAt(i)))return!1;r=!0}return!(!r||n==="_")}function a(o){var s=o,i=1,r;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),r=s[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),s=s.slice(1),r=s[0]),s==="0")return 0;if(r==="0"){if(s[1]==="b")return i*parseInt(s.slice(2),2);if(s[1]==="x")return i*parseInt(s.slice(2),16);if(s[1]==="o")return i*parseInt(s.slice(2),8)}return i*parseInt(s,10)}function l(o){return Object.prototype.toString.call(o)==="[object Number]"&&o%1===0&&!e.isNegativeZero(o)}return Yn=new d("tag:yaml.org,2002:int",{kind:"scalar",resolve:u,construct:a,predicate:l,represent:{binary:function(o){return o>=0?"0b"+o.toString(2):"-0b"+o.toString(2).slice(1)},octal:function(o){return o>=0?"0o"+o.toString(8):"-0o"+o.toString(8).slice(1)},decimal:function(o){return o.toString(10)},hexadecimal:function(o){return o>=0?"0x"+o.toString(16).toUpperCase():"-0x"+o.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Yn}var zn,Ho;function Xl(){if(Ho)return zn;Ho=1;var e=Er(),d=je(),h=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function c(o){return!(o===null||!h.test(o)||o[o.length-1]==="_")}function f(o){var s,i;return s=o.replace(/_/g,"").toLowerCase(),i=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:i*parseFloat(s,10)}var u=/^[-+]?[0-9]+e/;function a(o,s){var i;if(isNaN(o))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===o)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===o)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(e.isNegativeZero(o))return"-0.0";return i=o.toString(10),u.test(i)?i.replace("e",".e"):i}function l(o){return Object.prototype.toString.call(o)==="[object Number]"&&(o%1!==0||e.isNegativeZero(o))}return zn=new d("tag:yaml.org,2002:float",{kind:"scalar",resolve:c,construct:f,predicate:l,represent:a,defaultStyle:"lowercase"}),zn}var Xn,jo;function Kl(){return jo||(jo=1,Xn=Wl().extend({implicit:[Vl(),Yl(),zl(),Xl()]})),Xn}var Kn,Go;function Jl(){return Go||(Go=1,Kn=Kl()),Kn}var Jn,Wo;function Ql(){if(Wo)return Jn;Wo=1;var e=je(),d=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),h=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function c(a){return a===null?!1:d.exec(a)!==null||h.exec(a)!==null}function f(a){var l,o,s,i,r,n,p,g=0,y=null,m,w,T;if(l=d.exec(a),l===null&&(l=h.exec(a)),l===null)throw new Error("Date resolve error");if(o=+l[1],s=+l[2]-1,i=+l[3],!l[4])return new Date(Date.UTC(o,s,i));if(r=+l[4],n=+l[5],p=+l[6],l[7]){for(g=l[7].slice(0,3);g.length<3;)g+="0";g=+g}return l[9]&&(m=+l[10],w=+(l[11]||0),y=(m*60+w)*6e4,l[9]==="-"&&(y=-y)),T=new Date(Date.UTC(o,s,i,r,n,p,g)),y&&T.setTime(T.getTime()-y),T}function u(a){return a.toISOString()}return Jn=new e("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:c,construct:f,instanceOf:Date,represent:u}),Jn}var Qn,Vo;function Zl(){if(Vo)return Qn;Vo=1;var e=je();function d(h){return h==="<<"||h===null}return Qn=new e("tag:yaml.org,2002:merge",{kind:"scalar",resolve:d}),Qn}var Zn,Yo;function eu(){if(Yo)return Zn;Yo=1;var e=je(),d=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function h(a){if(a===null)return!1;var l,o,s=0,i=a.length,r=d;for(o=0;o<i;o++)if(l=r.indexOf(a.charAt(o)),!(l>64)){if(l<0)return!1;s+=6}return s%8===0}function c(a){var l,o,s=a.replace(/[\r\n=]/g,""),i=s.length,r=d,n=0,p=[];for(l=0;l<i;l++)l%4===0&&l&&(p.push(n>>16&255),p.push(n>>8&255),p.push(n&255)),n=n<<6|r.indexOf(s.charAt(l));return o=i%4*6,o===0?(p.push(n>>16&255),p.push(n>>8&255),p.push(n&255)):o===18?(p.push(n>>10&255),p.push(n>>2&255)):o===12&&p.push(n>>4&255),new Uint8Array(p)}function f(a){var l="",o=0,s,i,r=a.length,n=d;for(s=0;s<r;s++)s%3===0&&s&&(l+=n[o>>18&63],l+=n[o>>12&63],l+=n[o>>6&63],l+=n[o&63]),o=(o<<8)+a[s];return i=r%3,i===0?(l+=n[o>>18&63],l+=n[o>>12&63],l+=n[o>>6&63],l+=n[o&63]):i===2?(l+=n[o>>10&63],l+=n[o>>4&63],l+=n[o<<2&63],l+=n[64]):i===1&&(l+=n[o>>2&63],l+=n[o<<4&63],l+=n[64],l+=n[64]),l}function u(a){return Object.prototype.toString.call(a)==="[object Uint8Array]"}return Zn=new e("tag:yaml.org,2002:binary",{kind:"scalar",resolve:h,construct:c,predicate:u,represent:f}),Zn}var ei,zo;function tu(){if(zo)return ei;zo=1;var e=je(),d=Object.prototype.hasOwnProperty,h=Object.prototype.toString;function c(u){if(u===null)return!0;var a=[],l,o,s,i,r,n=u;for(l=0,o=n.length;l<o;l+=1){if(s=n[l],r=!1,h.call(s)!=="[object Object]")return!1;for(i in s)if(d.call(s,i))if(!r)r=!0;else return!1;if(!r)return!1;if(a.indexOf(i)===-1)a.push(i);else return!1}return!0}function f(u){return u!==null?u:[]}return ei=new e("tag:yaml.org,2002:omap",{kind:"sequence",resolve:c,construct:f}),ei}var ti,Xo;function ru(){if(Xo)return ti;Xo=1;var e=je(),d=Object.prototype.toString;function h(f){if(f===null)return!0;var u,a,l,o,s,i=f;for(s=new Array(i.length),u=0,a=i.length;u<a;u+=1){if(l=i[u],d.call(l)!=="[object Object]"||(o=Object.keys(l),o.length!==1))return!1;s[u]=[o[0],l[o[0]]]}return!0}function c(f){if(f===null)return[];var u,a,l,o,s,i=f;for(s=new Array(i.length),u=0,a=i.length;u<a;u+=1)l=i[u],o=Object.keys(l),s[u]=[o[0],l[o[0]]];return s}return ti=new e("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:h,construct:c}),ti}var ri,Ko;function nu(){if(Ko)return ri;Ko=1;var e=je(),d=Object.prototype.hasOwnProperty;function h(f){if(f===null)return!0;var u,a=f;for(u in a)if(d.call(a,u)&&a[u]!==null)return!1;return!0}function c(f){return f!==null?f:{}}return ri=new e("tag:yaml.org,2002:set",{kind:"mapping",resolve:h,construct:c}),ri}var ni,Jo;function oa(){return Jo||(Jo=1,ni=Jl().extend({implicit:[Ql(),Zl()],explicit:[eu(),tu(),ru(),nu()]})),ni}var Qo;function ef(){if(Qo)return Ur;Qo=1;var e=Er(),d=yr(),h=Zc(),c=oa(),f=Object.prototype.hasOwnProperty,u=1,a=2,l=3,o=4,s=1,i=2,r=3,n=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,y=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function w(t){return Object.prototype.toString.call(t)}function T(t){return t===10||t===13}function P(t){return t===9||t===32}function I(t){return t===9||t===32||t===10||t===13}function b(t){return t===44||t===91||t===93||t===123||t===125}function O(t){var B;return 48<=t&&t<=57?t-48:(B=t|32,97<=B&&B<=102?B-97+10:-1)}function S(t){return t===120?2:t===117?4:t===85?8:0}function R(t){return 48<=t&&t<=57?t-48:-1}function v(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function k(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function q(t,B,W){B==="__proto__"?Object.defineProperty(t,B,{configurable:!0,enumerable:!0,writable:!0,value:W}):t[B]=W}for(var L=new Array(256),$=new Array(256),x=0;x<256;x++)L[x]=v(x)?1:0,$[x]=v(x);function N(t,B){this.input=t,this.filename=B.filename||null,this.schema=B.schema||c,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function j(t,B){var W={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return W.snippet=h(W),new d(B,W)}function D(t,B){throw j(t,B)}function G(t,B){t.onWarning&&t.onWarning.call(null,j(t,B))}var V={YAML:function(B,W,ne){var Y,re,Z;B.version!==null&&D(B,"duplication of %YAML directive"),ne.length!==1&&D(B,"YAML directive accepts exactly one argument"),Y=/^([0-9]+)\.([0-9]+)$/.exec(ne[0]),Y===null&&D(B,"ill-formed argument of the YAML directive"),re=parseInt(Y[1],10),Z=parseInt(Y[2],10),re!==1&&D(B,"unacceptable YAML version of the document"),B.version=ne[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&G(B,"unsupported YAML version of the document")},TAG:function(B,W,ne){var Y,re;ne.length!==2&&D(B,"TAG directive accepts exactly two arguments"),Y=ne[0],re=ne[1],y.test(Y)||D(B,"ill-formed tag handle (first argument) of the TAG directive"),f.call(B.tagMap,Y)&&D(B,'there is a previously declared suffix for "'+Y+'" tag handle'),m.test(re)||D(B,"ill-formed tag prefix (second argument) of the TAG directive");try{re=decodeURIComponent(re)}catch{D(B,"tag prefix is malformed: "+re)}B.tagMap[Y]=re}};function te(t,B,W,ne){var Y,re,Z,oe;if(B<W){if(oe=t.input.slice(B,W),ne)for(Y=0,re=oe.length;Y<re;Y+=1)Z=oe.charCodeAt(Y),Z===9||32<=Z&&Z<=1114111||D(t,"expected valid JSON character");else n.test(oe)&&D(t,"the stream contains non-printable characters");t.result+=oe}}function de(t,B,W,ne){var Y,re,Z,oe;for(e.isObject(W)||D(t,"cannot merge mappings; the provided source object is unacceptable"),Y=Object.keys(W),Z=0,oe=Y.length;Z<oe;Z+=1)re=Y[Z],f.call(B,re)||(q(B,re,W[re]),ne[re]=!0)}function ie(t,B,W,ne,Y,re,Z,oe,ue){var Se,Ce;if(Array.isArray(Y))for(Y=Array.prototype.slice.call(Y),Se=0,Ce=Y.length;Se<Ce;Se+=1)Array.isArray(Y[Se])&&D(t,"nested arrays are not supported inside keys"),typeof Y=="object"&&w(Y[Se])==="[object Object]"&&(Y[Se]="[object Object]");if(typeof Y=="object"&&w(Y)==="[object Object]"&&(Y="[object Object]"),Y=String(Y),B===null&&(B={}),ne==="tag:yaml.org,2002:merge")if(Array.isArray(re))for(Se=0,Ce=re.length;Se<Ce;Se+=1)de(t,B,re[Se],W);else de(t,B,re,W);else!t.json&&!f.call(W,Y)&&f.call(B,Y)&&(t.line=Z||t.line,t.lineStart=oe||t.lineStart,t.position=ue||t.position,D(t,"duplicated mapping key")),q(B,Y,re),delete W[Y];return B}function _e(t){var B;B=t.input.charCodeAt(t.position),B===10?t.position++:B===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):D(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ee(t,B,W){for(var ne=0,Y=t.input.charCodeAt(t.position);Y!==0;){for(;P(Y);)Y===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),Y=t.input.charCodeAt(++t.position);if(B&&Y===35)do Y=t.input.charCodeAt(++t.position);while(Y!==10&&Y!==13&&Y!==0);if(T(Y))for(_e(t),Y=t.input.charCodeAt(t.position),ne++,t.lineIndent=0;Y===32;)t.lineIndent++,Y=t.input.charCodeAt(++t.position);else break}return W!==-1&&ne!==0&&t.lineIndent<W&&G(t,"deficient indentation"),ne}function Q(t){var B=t.position,W;return W=t.input.charCodeAt(B),!!((W===45||W===46)&&W===t.input.charCodeAt(B+1)&&W===t.input.charCodeAt(B+2)&&(B+=3,W=t.input.charCodeAt(B),W===0||I(W)))}function ve(t,B){B===1?t.result+=" ":B>1&&(t.result+=e.repeat(`
`,B-1))}function _(t,B,W){var ne,Y,re,Z,oe,ue,Se,Ce,me=t.kind,A=t.result,M;if(M=t.input.charCodeAt(t.position),I(M)||b(M)||M===35||M===38||M===42||M===33||M===124||M===62||M===39||M===34||M===37||M===64||M===96||(M===63||M===45)&&(Y=t.input.charCodeAt(t.position+1),I(Y)||W&&b(Y)))return!1;for(t.kind="scalar",t.result="",re=Z=t.position,oe=!1;M!==0;){if(M===58){if(Y=t.input.charCodeAt(t.position+1),I(Y)||W&&b(Y))break}else if(M===35){if(ne=t.input.charCodeAt(t.position-1),I(ne))break}else{if(t.position===t.lineStart&&Q(t)||W&&b(M))break;if(T(M))if(ue=t.line,Se=t.lineStart,Ce=t.lineIndent,Ee(t,!1,-1),t.lineIndent>=B){oe=!0,M=t.input.charCodeAt(t.position);continue}else{t.position=Z,t.line=ue,t.lineStart=Se,t.lineIndent=Ce;break}}oe&&(te(t,re,Z,!1),ve(t,t.line-ue),re=Z=t.position,oe=!1),P(M)||(Z=t.position+1),M=t.input.charCodeAt(++t.position)}return te(t,re,Z,!1),t.result?!0:(t.kind=me,t.result=A,!1)}function E(t,B){var W,ne,Y;if(W=t.input.charCodeAt(t.position),W!==39)return!1;for(t.kind="scalar",t.result="",t.position++,ne=Y=t.position;(W=t.input.charCodeAt(t.position))!==0;)if(W===39)if(te(t,ne,t.position,!0),W=t.input.charCodeAt(++t.position),W===39)ne=t.position,t.position++,Y=t.position;else return!0;else T(W)?(te(t,ne,Y,!0),ve(t,Ee(t,!1,B)),ne=Y=t.position):t.position===t.lineStart&&Q(t)?D(t,"unexpected end of the document within a single quoted scalar"):(t.position++,Y=t.position);D(t,"unexpected end of the stream within a single quoted scalar")}function H(t,B){var W,ne,Y,re,Z,oe;if(oe=t.input.charCodeAt(t.position),oe!==34)return!1;for(t.kind="scalar",t.result="",t.position++,W=ne=t.position;(oe=t.input.charCodeAt(t.position))!==0;){if(oe===34)return te(t,W,t.position,!0),t.position++,!0;if(oe===92){if(te(t,W,t.position,!0),oe=t.input.charCodeAt(++t.position),T(oe))Ee(t,!1,B);else if(oe<256&&L[oe])t.result+=$[oe],t.position++;else if((Z=S(oe))>0){for(Y=Z,re=0;Y>0;Y--)oe=t.input.charCodeAt(++t.position),(Z=O(oe))>=0?re=(re<<4)+Z:D(t,"expected hexadecimal character");t.result+=k(re),t.position++}else D(t,"unknown escape sequence");W=ne=t.position}else T(oe)?(te(t,W,ne,!0),ve(t,Ee(t,!1,B)),W=ne=t.position):t.position===t.lineStart&&Q(t)?D(t,"unexpected end of the document within a double quoted scalar"):(t.position++,ne=t.position)}D(t,"unexpected end of the stream within a double quoted scalar")}function F(t,B){var W=!0,ne,Y,re,Z=t.tag,oe,ue=t.anchor,Se,Ce,me,A,M,z=Object.create(null),X,K,ae,ee;if(ee=t.input.charCodeAt(t.position),ee===91)Ce=93,M=!1,oe=[];else if(ee===123)Ce=125,M=!0,oe={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=oe),ee=t.input.charCodeAt(++t.position);ee!==0;){if(Ee(t,!0,B),ee=t.input.charCodeAt(t.position),ee===Ce)return t.position++,t.tag=Z,t.anchor=ue,t.kind=M?"mapping":"sequence",t.result=oe,!0;W?ee===44&&D(t,"expected the node content, but found ','"):D(t,"missed comma between flow collection entries"),K=X=ae=null,me=A=!1,ee===63&&(Se=t.input.charCodeAt(t.position+1),I(Se)&&(me=A=!0,t.position++,Ee(t,!0,B))),ne=t.line,Y=t.lineStart,re=t.position,Te(t,B,u,!1,!0),K=t.tag,X=t.result,Ee(t,!0,B),ee=t.input.charCodeAt(t.position),(A||t.line===ne)&&ee===58&&(me=!0,ee=t.input.charCodeAt(++t.position),Ee(t,!0,B),Te(t,B,u,!1,!0),ae=t.result),M?ie(t,oe,z,K,X,ae,ne,Y,re):me?oe.push(ie(t,null,z,K,X,ae,ne,Y,re)):oe.push(X),Ee(t,!0,B),ee=t.input.charCodeAt(t.position),ee===44?(W=!0,ee=t.input.charCodeAt(++t.position)):W=!1}D(t,"unexpected end of the stream within a flow collection")}function ce(t,B){var W,ne,Y=s,re=!1,Z=!1,oe=B,ue=0,Se=!1,Ce,me;if(me=t.input.charCodeAt(t.position),me===124)ne=!1;else if(me===62)ne=!0;else return!1;for(t.kind="scalar",t.result="";me!==0;)if(me=t.input.charCodeAt(++t.position),me===43||me===45)s===Y?Y=me===43?r:i:D(t,"repeat of a chomping mode identifier");else if((Ce=R(me))>=0)Ce===0?D(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?D(t,"repeat of an indentation width identifier"):(oe=B+Ce-1,Z=!0);else break;if(P(me)){do me=t.input.charCodeAt(++t.position);while(P(me));if(me===35)do me=t.input.charCodeAt(++t.position);while(!T(me)&&me!==0)}for(;me!==0;){for(_e(t),t.lineIndent=0,me=t.input.charCodeAt(t.position);(!Z||t.lineIndent<oe)&&me===32;)t.lineIndent++,me=t.input.charCodeAt(++t.position);if(!Z&&t.lineIndent>oe&&(oe=t.lineIndent),T(me)){ue++;continue}if(t.lineIndent<oe){Y===r?t.result+=e.repeat(`
`,re?1+ue:ue):Y===s&&re&&(t.result+=`
`);break}for(ne?P(me)?(Se=!0,t.result+=e.repeat(`
`,re?1+ue:ue)):Se?(Se=!1,t.result+=e.repeat(`
`,ue+1)):ue===0?re&&(t.result+=" "):t.result+=e.repeat(`
`,ue):t.result+=e.repeat(`
`,re?1+ue:ue),re=!0,Z=!0,ue=0,W=t.position;!T(me)&&me!==0;)me=t.input.charCodeAt(++t.position);te(t,W,t.position,!1)}return!0}function he(t,B){var W,ne=t.tag,Y=t.anchor,re=[],Z,oe=!1,ue;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=re),ue=t.input.charCodeAt(t.position);ue!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,D(t,"tab characters must not be used in indentation")),!(ue!==45||(Z=t.input.charCodeAt(t.position+1),!I(Z))));){if(oe=!0,t.position++,Ee(t,!0,-1)&&t.lineIndent<=B){re.push(null),ue=t.input.charCodeAt(t.position);continue}if(W=t.line,Te(t,B,l,!1,!0),re.push(t.result),Ee(t,!0,-1),ue=t.input.charCodeAt(t.position),(t.line===W||t.lineIndent>B)&&ue!==0)D(t,"bad indentation of a sequence entry");else if(t.lineIndent<B)break}return oe?(t.tag=ne,t.anchor=Y,t.kind="sequence",t.result=re,!0):!1}function pe(t,B,W){var ne,Y,re,Z,oe,ue,Se=t.tag,Ce=t.anchor,me={},A=Object.create(null),M=null,z=null,X=null,K=!1,ae=!1,ee;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=me),ee=t.input.charCodeAt(t.position);ee!==0;){if(!K&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,D(t,"tab characters must not be used in indentation")),ne=t.input.charCodeAt(t.position+1),re=t.line,(ee===63||ee===58)&&I(ne))ee===63?(K&&(ie(t,me,A,M,z,null,Z,oe,ue),M=z=X=null),ae=!0,K=!0,Y=!0):K?(K=!1,Y=!0):D(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,ee=ne;else{if(Z=t.line,oe=t.lineStart,ue=t.position,!Te(t,W,a,!1,!0))break;if(t.line===re){for(ee=t.input.charCodeAt(t.position);P(ee);)ee=t.input.charCodeAt(++t.position);if(ee===58)ee=t.input.charCodeAt(++t.position),I(ee)||D(t,"a whitespace character is expected after the key-value separator within a block mapping"),K&&(ie(t,me,A,M,z,null,Z,oe,ue),M=z=X=null),ae=!0,K=!1,Y=!1,M=t.tag,z=t.result;else if(ae)D(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=Se,t.anchor=Ce,!0}else if(ae)D(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=Se,t.anchor=Ce,!0}if((t.line===re||t.lineIndent>B)&&(K&&(Z=t.line,oe=t.lineStart,ue=t.position),Te(t,B,o,!0,Y)&&(K?z=t.result:X=t.result),K||(ie(t,me,A,M,z,X,Z,oe,ue),M=z=X=null),Ee(t,!0,-1),ee=t.input.charCodeAt(t.position)),(t.line===re||t.lineIndent>B)&&ee!==0)D(t,"bad indentation of a mapping entry");else if(t.lineIndent<B)break}return K&&ie(t,me,A,M,z,null,Z,oe,ue),ae&&(t.tag=Se,t.anchor=Ce,t.kind="mapping",t.result=me),ae}function Ae(t){var B,W=!1,ne=!1,Y,re,Z;if(Z=t.input.charCodeAt(t.position),Z!==33)return!1;if(t.tag!==null&&D(t,"duplication of a tag property"),Z=t.input.charCodeAt(++t.position),Z===60?(W=!0,Z=t.input.charCodeAt(++t.position)):Z===33?(ne=!0,Y="!!",Z=t.input.charCodeAt(++t.position)):Y="!",B=t.position,W){do Z=t.input.charCodeAt(++t.position);while(Z!==0&&Z!==62);t.position<t.length?(re=t.input.slice(B,t.position),Z=t.input.charCodeAt(++t.position)):D(t,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!I(Z);)Z===33&&(ne?D(t,"tag suffix cannot contain exclamation marks"):(Y=t.input.slice(B-1,t.position+1),y.test(Y)||D(t,"named tag handle cannot contain such characters"),ne=!0,B=t.position+1)),Z=t.input.charCodeAt(++t.position);re=t.input.slice(B,t.position),g.test(re)&&D(t,"tag suffix cannot contain flow indicator characters")}re&&!m.test(re)&&D(t,"tag name cannot contain such characters: "+re);try{re=decodeURIComponent(re)}catch{D(t,"tag name is malformed: "+re)}return W?t.tag=re:f.call(t.tagMap,Y)?t.tag=t.tagMap[Y]+re:Y==="!"?t.tag="!"+re:Y==="!!"?t.tag="tag:yaml.org,2002:"+re:D(t,'undeclared tag handle "'+Y+'"'),!0}function ye(t){var B,W;if(W=t.input.charCodeAt(t.position),W!==38)return!1;for(t.anchor!==null&&D(t,"duplication of an anchor property"),W=t.input.charCodeAt(++t.position),B=t.position;W!==0&&!I(W)&&!b(W);)W=t.input.charCodeAt(++t.position);return t.position===B&&D(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(B,t.position),!0}function We(t){var B,W,ne;if(ne=t.input.charCodeAt(t.position),ne!==42)return!1;for(ne=t.input.charCodeAt(++t.position),B=t.position;ne!==0&&!I(ne)&&!b(ne);)ne=t.input.charCodeAt(++t.position);return t.position===B&&D(t,"name of an alias node must contain at least one character"),W=t.input.slice(B,t.position),f.call(t.anchorMap,W)||D(t,'unidentified alias "'+W+'"'),t.result=t.anchorMap[W],Ee(t,!0,-1),!0}function Te(t,B,W,ne,Y){var re,Z,oe,ue=1,Se=!1,Ce=!1,me,A,M,z,X,K;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,re=Z=oe=o===W||l===W,ne&&Ee(t,!0,-1)&&(Se=!0,t.lineIndent>B?ue=1:t.lineIndent===B?ue=0:t.lineIndent<B&&(ue=-1)),ue===1)for(;Ae(t)||ye(t);)Ee(t,!0,-1)?(Se=!0,oe=re,t.lineIndent>B?ue=1:t.lineIndent===B?ue=0:t.lineIndent<B&&(ue=-1)):oe=!1;if(oe&&(oe=Se||Y),(ue===1||o===W)&&(u===W||a===W?X=B:X=B+1,K=t.position-t.lineStart,ue===1?oe&&(he(t,K)||pe(t,K,X))||F(t,X)?Ce=!0:(Z&&ce(t,X)||E(t,X)||H(t,X)?Ce=!0:We(t)?(Ce=!0,(t.tag!==null||t.anchor!==null)&&D(t,"alias node should not have any properties")):_(t,X,u===W)&&(Ce=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ue===0&&(Ce=oe&&he(t,K))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&D(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),me=0,A=t.implicitTypes.length;me<A;me+=1)if(z=t.implicitTypes[me],z.resolve(t.result)){t.result=z.construct(t.result),t.tag=z.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(f.call(t.typeMap[t.kind||"fallback"],t.tag))z=t.typeMap[t.kind||"fallback"][t.tag];else for(z=null,M=t.typeMap.multi[t.kind||"fallback"],me=0,A=M.length;me<A;me+=1)if(t.tag.slice(0,M[me].tag.length)===M[me].tag){z=M[me];break}z||D(t,"unknown tag !<"+t.tag+">"),t.result!==null&&z.kind!==t.kind&&D(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+z.kind+'", not "'+t.kind+'"'),z.resolve(t.result,t.tag)?(t.result=z.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):D(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||Ce}function He(t){var B=t.position,W,ne,Y,re=!1,Z;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(Z=t.input.charCodeAt(t.position))!==0&&(Ee(t,!0,-1),Z=t.input.charCodeAt(t.position),!(t.lineIndent>0||Z!==37));){for(re=!0,Z=t.input.charCodeAt(++t.position),W=t.position;Z!==0&&!I(Z);)Z=t.input.charCodeAt(++t.position);for(ne=t.input.slice(W,t.position),Y=[],ne.length<1&&D(t,"directive name must not be less than one character in length");Z!==0;){for(;P(Z);)Z=t.input.charCodeAt(++t.position);if(Z===35){do Z=t.input.charCodeAt(++t.position);while(Z!==0&&!T(Z));break}if(T(Z))break;for(W=t.position;Z!==0&&!I(Z);)Z=t.input.charCodeAt(++t.position);Y.push(t.input.slice(W,t.position))}Z!==0&&_e(t),f.call(V,ne)?V[ne](t,ne,Y):G(t,'unknown document directive "'+ne+'"')}if(Ee(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ee(t,!0,-1)):re&&D(t,"directives end mark is expected"),Te(t,t.lineIndent-1,o,!1,!0),Ee(t,!0,-1),t.checkLineBreaks&&p.test(t.input.slice(B,t.position))&&G(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Q(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ee(t,!0,-1));return}if(t.position<t.length-1)D(t,"end of the stream or a document separator is expected");else return}function ct(t,B){t=String(t),B=B||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var W=new N(t,B),ne=t.indexOf("\0");for(ne!==-1&&(W.position=ne,D(W,"null byte is not allowed in input")),W.input+="\0";W.input.charCodeAt(W.position)===32;)W.lineIndent+=1,W.position+=1;for(;W.position<W.length-1;)He(W);return W.documents}function ot(t,B,W){B!==null&&typeof B=="object"&&typeof W>"u"&&(W=B,B=null);var ne=ct(t,W);if(typeof B!="function")return ne;for(var Y=0,re=ne.length;Y<re;Y+=1)B(ne[Y])}function it(t,B){var W=ct(t,B);if(W.length!==0){if(W.length===1)return W[0];throw new d("expected a single document in the stream, but found more")}}return Ur.loadAll=ot,Ur.load=it,Ur}var ii={},Zo;function tf(){if(Zo)return ii;Zo=1;var e=Er(),d=yr(),h=oa(),c=Object.prototype.toString,f=Object.prototype.hasOwnProperty,u=65279,a=9,l=10,o=13,s=32,i=33,r=34,n=35,p=37,g=38,y=39,m=42,w=44,T=45,P=58,I=61,b=62,O=63,S=64,R=91,v=93,k=96,q=123,L=124,$=125,x={};x[0]="\\0",x[7]="\\a",x[8]="\\b",x[9]="\\t",x[10]="\\n",x[11]="\\v",x[12]="\\f",x[13]="\\r",x[27]="\\e",x[34]='\\"',x[92]="\\\\",x[133]="\\N",x[160]="\\_",x[8232]="\\L",x[8233]="\\P";var N=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],j=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function D(A,M){var z,X,K,ae,ee,se,fe;if(M===null)return{};for(z={},X=Object.keys(M),K=0,ae=X.length;K<ae;K+=1)ee=X[K],se=String(M[ee]),ee.slice(0,2)==="!!"&&(ee="tag:yaml.org,2002:"+ee.slice(2)),fe=A.compiledTypeMap.fallback[ee],fe&&f.call(fe.styleAliases,se)&&(se=fe.styleAliases[se]),z[ee]=se;return z}function G(A){var M,z,X;if(M=A.toString(16).toUpperCase(),A<=255)z="x",X=2;else if(A<=65535)z="u",X=4;else if(A<=4294967295)z="U",X=8;else throw new d("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+z+e.repeat("0",X-M.length)+M}var V=1,te=2;function de(A){this.schema=A.schema||h,this.indent=Math.max(1,A.indent||2),this.noArrayIndent=A.noArrayIndent||!1,this.skipInvalid=A.skipInvalid||!1,this.flowLevel=e.isNothing(A.flowLevel)?-1:A.flowLevel,this.styleMap=D(this.schema,A.styles||null),this.sortKeys=A.sortKeys||!1,this.lineWidth=A.lineWidth||80,this.noRefs=A.noRefs||!1,this.noCompatMode=A.noCompatMode||!1,this.condenseFlow=A.condenseFlow||!1,this.quotingType=A.quotingType==='"'?te:V,this.forceQuotes=A.forceQuotes||!1,this.replacer=typeof A.replacer=="function"?A.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ie(A,M){for(var z=e.repeat(" ",M),X=0,K=-1,ae="",ee,se=A.length;X<se;)K=A.indexOf(`
`,X),K===-1?(ee=A.slice(X),X=se):(ee=A.slice(X,K+1),X=K+1),ee.length&&ee!==`
`&&(ae+=z),ae+=ee;return ae}function _e(A,M){return`
`+e.repeat(" ",A.indent*M)}function Ee(A,M){var z,X,K;for(z=0,X=A.implicitTypes.length;z<X;z+=1)if(K=A.implicitTypes[z],K.resolve(M))return!0;return!1}function Q(A){return A===s||A===a}function ve(A){return 32<=A&&A<=126||161<=A&&A<=55295&&A!==8232&&A!==8233||57344<=A&&A<=65533&&A!==u||65536<=A&&A<=1114111}function _(A){return ve(A)&&A!==u&&A!==o&&A!==l}function E(A,M,z){var X=_(A),K=X&&!Q(A);return(z?X:X&&A!==w&&A!==R&&A!==v&&A!==q&&A!==$)&&A!==n&&!(M===P&&!K)||_(M)&&!Q(M)&&A===n||M===P&&K}function H(A){return ve(A)&&A!==u&&!Q(A)&&A!==T&&A!==O&&A!==P&&A!==w&&A!==R&&A!==v&&A!==q&&A!==$&&A!==n&&A!==g&&A!==m&&A!==i&&A!==L&&A!==I&&A!==b&&A!==y&&A!==r&&A!==p&&A!==S&&A!==k}function F(A){return!Q(A)&&A!==P}function ce(A,M){var z=A.charCodeAt(M),X;return z>=55296&&z<=56319&&M+1<A.length&&(X=A.charCodeAt(M+1),X>=56320&&X<=57343)?(z-55296)*1024+X-56320+65536:z}function he(A){var M=/^\n* /;return M.test(A)}var pe=1,Ae=2,ye=3,We=4,Te=5;function He(A,M,z,X,K,ae,ee,se){var fe,we=0,Ie=null,xe=!1,Pe=!1,Ft=X!==-1,Qe=-1,wt=H(ce(A,0))&&F(ce(A,A.length-1));if(M||ee)for(fe=0;fe<A.length;we>=65536?fe+=2:fe++){if(we=ce(A,fe),!ve(we))return Te;wt=wt&&E(we,Ie,se),Ie=we}else{for(fe=0;fe<A.length;we>=65536?fe+=2:fe++){if(we=ce(A,fe),we===l)xe=!0,Ft&&(Pe=Pe||fe-Qe-1>X&&A[Qe+1]!==" ",Qe=fe);else if(!ve(we))return Te;wt=wt&&E(we,Ie,se),Ie=we}Pe=Pe||Ft&&fe-Qe-1>X&&A[Qe+1]!==" "}return!xe&&!Pe?wt&&!ee&&!K(A)?pe:ae===te?Te:Ae:z>9&&he(A)?Te:ee?ae===te?Te:Ae:Pe?We:ye}function ct(A,M,z,X,K){A.dump=(function(){if(M.length===0)return A.quotingType===te?'""':"''";if(!A.noCompatMode&&(N.indexOf(M)!==-1||j.test(M)))return A.quotingType===te?'"'+M+'"':"'"+M+"'";var ae=A.indent*Math.max(1,z),ee=A.lineWidth===-1?-1:Math.max(Math.min(A.lineWidth,40),A.lineWidth-ae),se=X||A.flowLevel>-1&&z>=A.flowLevel;function fe(we){return Ee(A,we)}switch(He(M,se,A.indent,ee,fe,A.quotingType,A.forceQuotes&&!X,K)){case pe:return M;case Ae:return"'"+M.replace(/'/g,"''")+"'";case ye:return"|"+ot(M,A.indent)+it(ie(M,ae));case We:return">"+ot(M,A.indent)+it(ie(t(M,ee),ae));case Te:return'"'+W(M)+'"';default:throw new d("impossible error: invalid scalar style")}})()}function ot(A,M){var z=he(A)?String(M):"",X=A[A.length-1]===`
`,K=X&&(A[A.length-2]===`
`||A===`
`),ae=K?"+":X?"":"-";return z+ae+`
`}function it(A){return A[A.length-1]===`
`?A.slice(0,-1):A}function t(A,M){for(var z=/(\n+)([^\n]*)/g,X=(function(){var we=A.indexOf(`
`);return we=we!==-1?we:A.length,z.lastIndex=we,B(A.slice(0,we),M)})(),K=A[0]===`
`||A[0]===" ",ae,ee;ee=z.exec(A);){var se=ee[1],fe=ee[2];ae=fe[0]===" ",X+=se+(!K&&!ae&&fe!==""?`
`:"")+B(fe,M),K=ae}return X}function B(A,M){if(A===""||A[0]===" ")return A;for(var z=/ [^ ]/g,X,K=0,ae,ee=0,se=0,fe="";X=z.exec(A);)se=X.index,se-K>M&&(ae=ee>K?ee:se,fe+=`
`+A.slice(K,ae),K=ae+1),ee=se;return fe+=`
`,A.length-K>M&&ee>K?fe+=A.slice(K,ee)+`
`+A.slice(ee+1):fe+=A.slice(K),fe.slice(1)}function W(A){for(var M="",z=0,X,K=0;K<A.length;z>=65536?K+=2:K++)z=ce(A,K),X=x[z],!X&&ve(z)?(M+=A[K],z>=65536&&(M+=A[K+1])):M+=X||G(z);return M}function ne(A,M,z){var X="",K=A.tag,ae,ee,se;for(ae=0,ee=z.length;ae<ee;ae+=1)se=z[ae],A.replacer&&(se=A.replacer.call(z,String(ae),se)),(ue(A,M,se,!1,!1)||typeof se>"u"&&ue(A,M,null,!1,!1))&&(X!==""&&(X+=","+(A.condenseFlow?"":" ")),X+=A.dump);A.tag=K,A.dump="["+X+"]"}function Y(A,M,z,X){var K="",ae=A.tag,ee,se,fe;for(ee=0,se=z.length;ee<se;ee+=1)fe=z[ee],A.replacer&&(fe=A.replacer.call(z,String(ee),fe)),(ue(A,M+1,fe,!0,!0,!1,!0)||typeof fe>"u"&&ue(A,M+1,null,!0,!0,!1,!0))&&((!X||K!=="")&&(K+=_e(A,M)),A.dump&&l===A.dump.charCodeAt(0)?K+="-":K+="- ",K+=A.dump);A.tag=ae,A.dump=K||"[]"}function re(A,M,z){var X="",K=A.tag,ae=Object.keys(z),ee,se,fe,we,Ie;for(ee=0,se=ae.length;ee<se;ee+=1)Ie="",X!==""&&(Ie+=", "),A.condenseFlow&&(Ie+='"'),fe=ae[ee],we=z[fe],A.replacer&&(we=A.replacer.call(z,fe,we)),ue(A,M,fe,!1,!1)&&(A.dump.length>1024&&(Ie+="? "),Ie+=A.dump+(A.condenseFlow?'"':"")+":"+(A.condenseFlow?"":" "),ue(A,M,we,!1,!1)&&(Ie+=A.dump,X+=Ie));A.tag=K,A.dump="{"+X+"}"}function Z(A,M,z,X){var K="",ae=A.tag,ee=Object.keys(z),se,fe,we,Ie,xe,Pe;if(A.sortKeys===!0)ee.sort();else if(typeof A.sortKeys=="function")ee.sort(A.sortKeys);else if(A.sortKeys)throw new d("sortKeys must be a boolean or a function");for(se=0,fe=ee.length;se<fe;se+=1)Pe="",(!X||K!=="")&&(Pe+=_e(A,M)),we=ee[se],Ie=z[we],A.replacer&&(Ie=A.replacer.call(z,we,Ie)),ue(A,M+1,we,!0,!0,!0)&&(xe=A.tag!==null&&A.tag!=="?"||A.dump&&A.dump.length>1024,xe&&(A.dump&&l===A.dump.charCodeAt(0)?Pe+="?":Pe+="? "),Pe+=A.dump,xe&&(Pe+=_e(A,M)),ue(A,M+1,Ie,!0,xe)&&(A.dump&&l===A.dump.charCodeAt(0)?Pe+=":":Pe+=": ",Pe+=A.dump,K+=Pe));A.tag=ae,A.dump=K||"{}"}function oe(A,M,z){var X,K,ae,ee,se,fe;for(K=z?A.explicitTypes:A.implicitTypes,ae=0,ee=K.length;ae<ee;ae+=1)if(se=K[ae],(se.instanceOf||se.predicate)&&(!se.instanceOf||typeof M=="object"&&M instanceof se.instanceOf)&&(!se.predicate||se.predicate(M))){if(z?se.multi&&se.representName?A.tag=se.representName(M):A.tag=se.tag:A.tag="?",se.represent){if(fe=A.styleMap[se.tag]||se.defaultStyle,c.call(se.represent)==="[object Function]")X=se.represent(M,fe);else if(f.call(se.represent,fe))X=se.represent[fe](M,fe);else throw new d("!<"+se.tag+'> tag resolver accepts not "'+fe+'" style');A.dump=X}return!0}return!1}function ue(A,M,z,X,K,ae,ee){A.tag=null,A.dump=z,oe(A,z,!1)||oe(A,z,!0);var se=c.call(A.dump),fe=X,we;X&&(X=A.flowLevel<0||A.flowLevel>M);var Ie=se==="[object Object]"||se==="[object Array]",xe,Pe;if(Ie&&(xe=A.duplicates.indexOf(z),Pe=xe!==-1),(A.tag!==null&&A.tag!=="?"||Pe||A.indent!==2&&M>0)&&(K=!1),Pe&&A.usedDuplicates[xe])A.dump="*ref_"+xe;else{if(Ie&&Pe&&!A.usedDuplicates[xe]&&(A.usedDuplicates[xe]=!0),se==="[object Object]")X&&Object.keys(A.dump).length!==0?(Z(A,M,A.dump,K),Pe&&(A.dump="&ref_"+xe+A.dump)):(re(A,M,A.dump),Pe&&(A.dump="&ref_"+xe+" "+A.dump));else if(se==="[object Array]")X&&A.dump.length!==0?(A.noArrayIndent&&!ee&&M>0?Y(A,M-1,A.dump,K):Y(A,M,A.dump,K),Pe&&(A.dump="&ref_"+xe+A.dump)):(ne(A,M,A.dump),Pe&&(A.dump="&ref_"+xe+" "+A.dump));else if(se==="[object String]")A.tag!=="?"&&ct(A,A.dump,M,ae,fe);else{if(se==="[object Undefined]")return!1;if(A.skipInvalid)return!1;throw new d("unacceptable kind of an object to dump "+se)}A.tag!==null&&A.tag!=="?"&&(we=encodeURI(A.tag[0]==="!"?A.tag.slice(1):A.tag).replace(/!/g,"%21"),A.tag[0]==="!"?we="!"+we:we.slice(0,18)==="tag:yaml.org,2002:"?we="!!"+we.slice(18):we="!<"+we+">",A.dump=we+" "+A.dump)}return!0}function Se(A,M){var z=[],X=[],K,ae;for(Ce(A,z,X),K=0,ae=X.length;K<ae;K+=1)M.duplicates.push(z[X[K]]);M.usedDuplicates=new Array(ae)}function Ce(A,M,z){var X,K,ae;if(A!==null&&typeof A=="object")if(K=M.indexOf(A),K!==-1)z.indexOf(K)===-1&&z.push(K);else if(M.push(A),Array.isArray(A))for(K=0,ae=A.length;K<ae;K+=1)Ce(A[K],M,z);else for(X=Object.keys(A),K=0,ae=X.length;K<ae;K+=1)Ce(A[X[K]],M,z)}function me(A,M){M=M||{};var z=new de(M);z.noRefs||Se(A,z);var X=A;return z.replacer&&(X=z.replacer.call({"":X},"",X)),ue(z,0,X,!0,!0)?z.dump+`
`:""}return ii.dump=me,ii}var es;function sa(){if(es)return Be;es=1;var e=ef(),d=tf();function h(c,f){return function(){throw new Error("Function yaml."+c+" is removed in js-yaml 4. Use yaml."+f+" instead, which is now safe by default.")}}return Be.Type=je(),Be.Schema=Bl(),Be.FAILSAFE_SCHEMA=Wl(),Be.JSON_SCHEMA=Kl(),Be.CORE_SCHEMA=Jl(),Be.DEFAULT_SCHEMA=oa(),Be.load=e.load,Be.loadAll=e.loadAll,Be.dump=d.dump,Be.YAMLException=yr(),Be.types={binary:eu(),float:Xl(),map:Gl(),null:Vl(),pairs:ru(),set:nu(),timestamp:Ql(),bool:Yl(),int:zl(),merge:Zl(),omap:tu(),seq:jl(),str:Hl()},Be.safeLoad=h("safeLoad","load"),Be.safeLoadAll=h("safeLoadAll","loadAll"),Be.safeDump=h("safeDump","dump"),Be}var Xt={},ts;function rf(){if(ts)return Xt;ts=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.Lazy=void 0;class e{constructor(h){this._value=null,this.creator=h}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const h=this.creator();return this.value=h,h}set value(h){this._value=h,this.creator=null}}return Xt.Lazy=e,Xt}var kr={exports:{}},ai,rs;function Gr(){if(rs)return ai;rs=1;const e="2.0.0",d=256,h=Number.MAX_SAFE_INTEGER||9007199254740991,c=16,f=d-6;return ai={MAX_LENGTH:d,MAX_SAFE_COMPONENT_LENGTH:c,MAX_SAFE_BUILD_LENGTH:f,MAX_SAFE_INTEGER:h,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ai}var oi,ns;function Wr(){return ns||(ns=1,oi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...d)=>console.error("SEMVER",...d):()=>{}),oi}var is;function wr(){return is||(is=1,(function(e,d){const{MAX_SAFE_COMPONENT_LENGTH:h,MAX_SAFE_BUILD_LENGTH:c,MAX_LENGTH:f}=Gr(),u=Wr();d=e.exports={};const a=d.re=[],l=d.safeRe=[],o=d.src=[],s=d.safeSrc=[],i=d.t={};let r=0;const n="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",f],[n,c]],g=m=>{for(const[w,T]of p)m=m.split(`${w}*`).join(`${w}{0,${T}}`).split(`${w}+`).join(`${w}{1,${T}}`);return m},y=(m,w,T)=>{const P=g(w),I=r++;u(m,I,w),i[m]=I,o[I]=w,s[I]=P,a[I]=new RegExp(w,T?"g":void 0),l[I]=new RegExp(P,T?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${n}*`),y("MAINVERSION",`(${o[i.NUMERICIDENTIFIER]})\\.(${o[i.NUMERICIDENTIFIER]})\\.(${o[i.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${o[i.NUMERICIDENTIFIERLOOSE]})\\.(${o[i.NUMERICIDENTIFIERLOOSE]})\\.(${o[i.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${o[i.NONNUMERICIDENTIFIER]}|${o[i.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${o[i.NONNUMERICIDENTIFIER]}|${o[i.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${o[i.PRERELEASEIDENTIFIER]}(?:\\.${o[i.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${o[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[i.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${n}+`),y("BUILD",`(?:\\+(${o[i.BUILDIDENTIFIER]}(?:\\.${o[i.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${o[i.MAINVERSION]}${o[i.PRERELEASE]}?${o[i.BUILD]}?`),y("FULL",`^${o[i.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${o[i.MAINVERSIONLOOSE]}${o[i.PRERELEASELOOSE]}?${o[i.BUILD]}?`),y("LOOSE",`^${o[i.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${o[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${o[i.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${o[i.XRANGEIDENTIFIER]})(?:\\.(${o[i.XRANGEIDENTIFIER]})(?:\\.(${o[i.XRANGEIDENTIFIER]})(?:${o[i.PRERELEASE]})?${o[i.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${o[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[i.XRANGEIDENTIFIERLOOSE]})(?:${o[i.PRERELEASELOOSE]})?${o[i.BUILD]}?)?)?`),y("XRANGE",`^${o[i.GTLT]}\\s*${o[i.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${o[i.GTLT]}\\s*${o[i.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${h}})(?:\\.(\\d{1,${h}}))?(?:\\.(\\d{1,${h}}))?`),y("COERCE",`${o[i.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",o[i.COERCEPLAIN]+`(?:${o[i.PRERELEASE]})?(?:${o[i.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",o[i.COERCE],!0),y("COERCERTLFULL",o[i.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${o[i.LONETILDE]}\\s+`,!0),d.tildeTrimReplace="$1~",y("TILDE",`^${o[i.LONETILDE]}${o[i.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${o[i.LONETILDE]}${o[i.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${o[i.LONECARET]}\\s+`,!0),d.caretTrimReplace="$1^",y("CARET",`^${o[i.LONECARET]}${o[i.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${o[i.LONECARET]}${o[i.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${o[i.GTLT]}\\s*(${o[i.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${o[i.GTLT]}\\s*(${o[i.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${o[i.GTLT]}\\s*(${o[i.LOOSEPLAIN]}|${o[i.XRANGEPLAIN]})`,!0),d.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${o[i.XRANGEPLAIN]})\\s+-\\s+(${o[i.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${o[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[i.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(kr,kr.exports)),kr.exports}var si,as;function la(){if(as)return si;as=1;const e=Object.freeze({loose:!0}),d=Object.freeze({});return si=c=>c?typeof c!="object"?e:c:d,si}var li,os;function iu(){if(os)return li;os=1;const e=/^[0-9]+$/,d=(c,f)=>{if(typeof c=="number"&&typeof f=="number")return c===f?0:c<f?-1:1;const u=e.test(c),a=e.test(f);return u&&a&&(c=+c,f=+f),c===f?0:u&&!a?-1:a&&!u?1:c<f?-1:1};return li={compareIdentifiers:d,rcompareIdentifiers:(c,f)=>d(f,c)},li}var ui,ss;function Ge(){if(ss)return ui;ss=1;const e=Wr(),{MAX_LENGTH:d,MAX_SAFE_INTEGER:h}=Gr(),{safeRe:c,t:f}=wr(),u=la(),{compareIdentifiers:a}=iu();class l{constructor(s,i){if(i=u(i),s instanceof l){if(s.loose===!!i.loose&&s.includePrerelease===!!i.includePrerelease)return s;s=s.version}else if(typeof s!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>d)throw new TypeError(`version is longer than ${d} characters`);e("SemVer",s,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const r=s.trim().match(i.loose?c[f.LOOSE]:c[f.FULL]);if(!r)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>h||this.major<0)throw new TypeError("Invalid major version");if(this.minor>h||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>h||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){const p=+n;if(p>=0&&p<h)return p}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(s){if(e("SemVer.compare",this.version,this.options,s),!(s instanceof l)){if(typeof s=="string"&&s===this.version)return 0;s=new l(s,this.options)}return s.version===this.version?0:this.compareMain(s)||this.comparePre(s)}compareMain(s){return s instanceof l||(s=new l(s,this.options)),this.major<s.major?-1:this.major>s.major?1:this.minor<s.minor?-1:this.minor>s.minor?1:this.patch<s.patch?-1:this.patch>s.patch?1:0}comparePre(s){if(s instanceof l||(s=new l(s,this.options)),this.prerelease.length&&!s.prerelease.length)return-1;if(!this.prerelease.length&&s.prerelease.length)return 1;if(!this.prerelease.length&&!s.prerelease.length)return 0;let i=0;do{const r=this.prerelease[i],n=s.prerelease[i];if(e("prerelease compare",i,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return a(r,n)}while(++i)}compareBuild(s){s instanceof l||(s=new l(s,this.options));let i=0;do{const r=this.build[i],n=s.build[i];if(e("build compare",i,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return a(r,n)}while(++i)}inc(s,i,r){if(s.startsWith("pre")){if(!i&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(i){const n=`-${i}`.match(this.options.loose?c[f.PRERELEASELOOSE]:c[f.PRERELEASE]);if(!n||n[1]!==i)throw new Error(`invalid identifier: ${i}`)}}switch(s){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,r),this.inc("pre",i,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,r),this.inc("pre",i,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const n=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(i===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(i){let p=[i,n];r===!1&&(p=[i]),a(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${s}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ui=l,ui}var ci,ls;function jt(){if(ls)return ci;ls=1;const e=Ge();return ci=(h,c,f=!1)=>{if(h instanceof e)return h;try{return new e(h,c)}catch(u){if(!f)return null;throw u}},ci}var fi,us;function nf(){if(us)return fi;us=1;const e=jt();return fi=(h,c)=>{const f=e(h,c);return f?f.version:null},fi}var di,cs;function af(){if(cs)return di;cs=1;const e=jt();return di=(h,c)=>{const f=e(h.trim().replace(/^[=v]+/,""),c);return f?f.version:null},di}var hi,fs;function of(){if(fs)return hi;fs=1;const e=Ge();return hi=(h,c,f,u,a)=>{typeof f=="string"&&(a=u,u=f,f=void 0);try{return new e(h instanceof e?h.version:h,f).inc(c,u,a).version}catch{return null}},hi}var pi,ds;function sf(){if(ds)return pi;ds=1;const e=jt();return pi=(h,c)=>{const f=e(h,null,!0),u=e(c,null,!0),a=f.compare(u);if(a===0)return null;const l=a>0,o=l?f:u,s=l?u:f,i=!!o.prerelease.length;if(!!s.prerelease.length&&!i){if(!s.patch&&!s.minor)return"major";if(s.compareMain(o)===0)return s.minor&&!s.patch?"minor":"patch"}const n=i?"pre":"";return f.major!==u.major?n+"major":f.minor!==u.minor?n+"minor":f.patch!==u.patch?n+"patch":"prerelease"},pi}var mi,hs;function lf(){if(hs)return mi;hs=1;const e=Ge();return mi=(h,c)=>new e(h,c).major,mi}var gi,ps;function uf(){if(ps)return gi;ps=1;const e=Ge();return gi=(h,c)=>new e(h,c).minor,gi}var vi,ms;function cf(){if(ms)return vi;ms=1;const e=Ge();return vi=(h,c)=>new e(h,c).patch,vi}var Ei,gs;function ff(){if(gs)return Ei;gs=1;const e=jt();return Ei=(h,c)=>{const f=e(h,c);return f&&f.prerelease.length?f.prerelease:null},Ei}var yi,vs;function rt(){if(vs)return yi;vs=1;const e=Ge();return yi=(h,c,f)=>new e(h,f).compare(new e(c,f)),yi}var wi,Es;function df(){if(Es)return wi;Es=1;const e=rt();return wi=(h,c,f)=>e(c,h,f),wi}var _i,ys;function hf(){if(ys)return _i;ys=1;const e=rt();return _i=(h,c)=>e(h,c,!0),_i}var Ai,ws;function ua(){if(ws)return Ai;ws=1;const e=Ge();return Ai=(h,c,f)=>{const u=new e(h,f),a=new e(c,f);return u.compare(a)||u.compareBuild(a)},Ai}var Ri,_s;function pf(){if(_s)return Ri;_s=1;const e=ua();return Ri=(h,c)=>h.sort((f,u)=>e(f,u,c)),Ri}var Ti,As;function mf(){if(As)return Ti;As=1;const e=ua();return Ti=(h,c)=>h.sort((f,u)=>e(u,f,c)),Ti}var Si,Rs;function Vr(){if(Rs)return Si;Rs=1;const e=rt();return Si=(h,c,f)=>e(h,c,f)>0,Si}var Ci,Ts;function ca(){if(Ts)return Ci;Ts=1;const e=rt();return Ci=(h,c,f)=>e(h,c,f)<0,Ci}var bi,Ss;function au(){if(Ss)return bi;Ss=1;const e=rt();return bi=(h,c,f)=>e(h,c,f)===0,bi}var Pi,Cs;function ou(){if(Cs)return Pi;Cs=1;const e=rt();return Pi=(h,c,f)=>e(h,c,f)!==0,Pi}var Oi,bs;function fa(){if(bs)return Oi;bs=1;const e=rt();return Oi=(h,c,f)=>e(h,c,f)>=0,Oi}var Ii,Ps;function da(){if(Ps)return Ii;Ps=1;const e=rt();return Ii=(h,c,f)=>e(h,c,f)<=0,Ii}var Di,Os;function su(){if(Os)return Di;Os=1;const e=au(),d=ou(),h=Vr(),c=fa(),f=ca(),u=da();return Di=(l,o,s,i)=>{switch(o){case"===":return typeof l=="object"&&(l=l.version),typeof s=="object"&&(s=s.version),l===s;case"!==":return typeof l=="object"&&(l=l.version),typeof s=="object"&&(s=s.version),l!==s;case"":case"=":case"==":return e(l,s,i);case"!=":return d(l,s,i);case">":return h(l,s,i);case">=":return c(l,s,i);case"<":return f(l,s,i);case"<=":return u(l,s,i);default:throw new TypeError(`Invalid operator: ${o}`)}},Di}var Ni,Is;function gf(){if(Is)return Ni;Is=1;const e=Ge(),d=jt(),{safeRe:h,t:c}=wr();return Ni=(u,a)=>{if(u instanceof e)return u;if(typeof u=="number"&&(u=String(u)),typeof u!="string")return null;a=a||{};let l=null;if(!a.rtl)l=u.match(a.includePrerelease?h[c.COERCEFULL]:h[c.COERCE]);else{const p=a.includePrerelease?h[c.COERCERTLFULL]:h[c.COERCERTL];let g;for(;(g=p.exec(u))&&(!l||l.index+l[0].length!==u.length);)(!l||g.index+g[0].length!==l.index+l[0].length)&&(l=g),p.lastIndex=g.index+g[1].length+g[2].length;p.lastIndex=-1}if(l===null)return null;const o=l[2],s=l[3]||"0",i=l[4]||"0",r=a.includePrerelease&&l[5]?`-${l[5]}`:"",n=a.includePrerelease&&l[6]?`+${l[6]}`:"";return d(`${o}.${s}.${i}${r}${n}`,a)},Ni}var Fi,Ds;function vf(){if(Ds)return Fi;Ds=1;class e{constructor(){this.max=1e3,this.map=new Map}get(h){const c=this.map.get(h);if(c!==void 0)return this.map.delete(h),this.map.set(h,c),c}delete(h){return this.map.delete(h)}set(h,c){if(!this.delete(h)&&c!==void 0){if(this.map.size>=this.max){const u=this.map.keys().next().value;this.delete(u)}this.map.set(h,c)}return this}}return Fi=e,Fi}var xi,Ns;function nt(){if(Ns)return xi;Ns=1;const e=/\s+/g;class d{constructor(N,j){if(j=f(j),N instanceof d)return N.loose===!!j.loose&&N.includePrerelease===!!j.includePrerelease?N:new d(N.raw,j);if(N instanceof u)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=N.trim().replace(e," "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(G=>!y(G[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const j=this.set[N];for(let D=0;D<j.length;D++)D>0&&(this.formatted+=" "),this.formatted+=j[D].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const D=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+N,G=c.get(D);if(G)return G;const V=this.options.loose,te=V?o[s.HYPHENRANGELOOSE]:o[s.HYPHENRANGE];N=N.replace(te,L(this.options.includePrerelease)),a("hyphen replace",N),N=N.replace(o[s.COMPARATORTRIM],i),a("comparator trim",N),N=N.replace(o[s.TILDETRIM],r),a("tilde trim",N),N=N.replace(o[s.CARETTRIM],n),a("caret trim",N);let de=N.split(" ").map(Q=>T(Q,this.options)).join(" ").split(/\s+/).map(Q=>q(Q,this.options));V&&(de=de.filter(Q=>(a("loose invalid filter",Q,this.options),!!Q.match(o[s.COMPARATORLOOSE])))),a("range list",de);const ie=new Map,_e=de.map(Q=>new u(Q,this.options));for(const Q of _e){if(y(Q))return[Q];ie.set(Q.value,Q)}ie.size>1&&ie.has("")&&ie.delete("");const Ee=[...ie.values()];return c.set(D,Ee),Ee}intersects(N,j){if(!(N instanceof d))throw new TypeError("a Range is required");return this.set.some(D=>w(D,j)&&N.set.some(G=>w(G,j)&&D.every(V=>G.every(te=>V.intersects(te,j)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new l(N,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if($(this.set[j],N,this.options))return!0;return!1}}xi=d;const h=vf(),c=new h,f=la(),u=Yr(),a=Wr(),l=Ge(),{safeRe:o,t:s,comparatorTrimReplace:i,tildeTrimReplace:r,caretTrimReplace:n}=wr(),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=Gr(),y=x=>x.value==="<0.0.0-0",m=x=>x.value==="",w=(x,N)=>{let j=!0;const D=x.slice();let G=D.pop();for(;j&&D.length;)j=D.every(V=>G.intersects(V,N)),G=D.pop();return j},T=(x,N)=>(x=x.replace(o[s.BUILD],""),a("comp",x,N),x=O(x,N),a("caret",x),x=I(x,N),a("tildes",x),x=R(x,N),a("xrange",x),x=k(x,N),a("stars",x),x),P=x=>!x||x.toLowerCase()==="x"||x==="*",I=(x,N)=>x.trim().split(/\s+/).map(j=>b(j,N)).join(" "),b=(x,N)=>{const j=N.loose?o[s.TILDELOOSE]:o[s.TILDE];return x.replace(j,(D,G,V,te,de)=>{a("tilde",x,D,G,V,te,de);let ie;return P(G)?ie="":P(V)?ie=`>=${G}.0.0 <${+G+1}.0.0-0`:P(te)?ie=`>=${G}.${V}.0 <${G}.${+V+1}.0-0`:de?(a("replaceTilde pr",de),ie=`>=${G}.${V}.${te}-${de} <${G}.${+V+1}.0-0`):ie=`>=${G}.${V}.${te} <${G}.${+V+1}.0-0`,a("tilde return",ie),ie})},O=(x,N)=>x.trim().split(/\s+/).map(j=>S(j,N)).join(" "),S=(x,N)=>{a("caret",x,N);const j=N.loose?o[s.CARETLOOSE]:o[s.CARET],D=N.includePrerelease?"-0":"";return x.replace(j,(G,V,te,de,ie)=>{a("caret",x,G,V,te,de,ie);let _e;return P(V)?_e="":P(te)?_e=`>=${V}.0.0${D} <${+V+1}.0.0-0`:P(de)?V==="0"?_e=`>=${V}.${te}.0${D} <${V}.${+te+1}.0-0`:_e=`>=${V}.${te}.0${D} <${+V+1}.0.0-0`:ie?(a("replaceCaret pr",ie),V==="0"?te==="0"?_e=`>=${V}.${te}.${de}-${ie} <${V}.${te}.${+de+1}-0`:_e=`>=${V}.${te}.${de}-${ie} <${V}.${+te+1}.0-0`:_e=`>=${V}.${te}.${de}-${ie} <${+V+1}.0.0-0`):(a("no pr"),V==="0"?te==="0"?_e=`>=${V}.${te}.${de}${D} <${V}.${te}.${+de+1}-0`:_e=`>=${V}.${te}.${de}${D} <${V}.${+te+1}.0-0`:_e=`>=${V}.${te}.${de} <${+V+1}.0.0-0`),a("caret return",_e),_e})},R=(x,N)=>(a("replaceXRanges",x,N),x.split(/\s+/).map(j=>v(j,N)).join(" ")),v=(x,N)=>{x=x.trim();const j=N.loose?o[s.XRANGELOOSE]:o[s.XRANGE];return x.replace(j,(D,G,V,te,de,ie)=>{a("xRange",x,D,G,V,te,de,ie);const _e=P(V),Ee=_e||P(te),Q=Ee||P(de),ve=Q;return G==="="&&ve&&(G=""),ie=N.includePrerelease?"-0":"",_e?G===">"||G==="<"?D="<0.0.0-0":D="*":G&&ve?(Ee&&(te=0),de=0,G===">"?(G=">=",Ee?(V=+V+1,te=0,de=0):(te=+te+1,de=0)):G==="<="&&(G="<",Ee?V=+V+1:te=+te+1),G==="<"&&(ie="-0"),D=`${G+V}.${te}.${de}${ie}`):Ee?D=`>=${V}.0.0${ie} <${+V+1}.0.0-0`:Q&&(D=`>=${V}.${te}.0${ie} <${V}.${+te+1}.0-0`),a("xRange return",D),D})},k=(x,N)=>(a("replaceStars",x,N),x.trim().replace(o[s.STAR],"")),q=(x,N)=>(a("replaceGTE0",x,N),x.trim().replace(o[N.includePrerelease?s.GTE0PRE:s.GTE0],"")),L=x=>(N,j,D,G,V,te,de,ie,_e,Ee,Q,ve)=>(P(D)?j="":P(G)?j=`>=${D}.0.0${x?"-0":""}`:P(V)?j=`>=${D}.${G}.0${x?"-0":""}`:te?j=`>=${j}`:j=`>=${j}${x?"-0":""}`,P(_e)?ie="":P(Ee)?ie=`<${+_e+1}.0.0-0`:P(Q)?ie=`<${_e}.${+Ee+1}.0-0`:ve?ie=`<=${_e}.${Ee}.${Q}-${ve}`:x?ie=`<${_e}.${Ee}.${+Q+1}-0`:ie=`<=${ie}`,`${j} ${ie}`.trim()),$=(x,N,j)=>{for(let D=0;D<x.length;D++)if(!x[D].test(N))return!1;if(N.prerelease.length&&!j.includePrerelease){for(let D=0;D<x.length;D++)if(a(x[D].semver),x[D].semver!==u.ANY&&x[D].semver.prerelease.length>0){const G=x[D].semver;if(G.major===N.major&&G.minor===N.minor&&G.patch===N.patch)return!0}return!1}return!0};return xi}var Li,Fs;function Yr(){if(Fs)return Li;Fs=1;const e=Symbol("SemVer ANY");class d{static get ANY(){return e}constructor(i,r){if(r=h(r),i instanceof d){if(i.loose===!!r.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(" "),a("comparator",i,r),this.options=r,this.loose=!!r.loose,this.parse(i),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(i){const r=this.options.loose?c[f.COMPARATORLOOSE]:c[f.COMPARATOR],n=i.match(r);if(!n)throw new TypeError(`Invalid comparator: ${i}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=e}toString(){return this.value}test(i){if(a("Comparator.test",i,this.options.loose),this.semver===e||i===e)return!0;if(typeof i=="string")try{i=new l(i,this.options)}catch{return!1}return u(i,this.operator,this.semver,this.options)}intersects(i,r){if(!(i instanceof d))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(i.value,r).test(this.value):i.operator===""?i.value===""?!0:new o(this.value,r).test(i.semver):(r=h(r),r.includePrerelease&&(this.value==="<0.0.0-0"||i.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||i.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&i.operator.startsWith(">")||this.operator.startsWith("<")&&i.operator.startsWith("<")||this.semver.version===i.semver.version&&this.operator.includes("=")&&i.operator.includes("=")||u(this.semver,"<",i.semver,r)&&this.operator.startsWith(">")&&i.operator.startsWith("<")||u(this.semver,">",i.semver,r)&&this.operator.startsWith("<")&&i.operator.startsWith(">")))}}Li=d;const h=la(),{safeRe:c,t:f}=wr(),u=su(),a=Wr(),l=Ge(),o=nt();return Li}var Ui,xs;function zr(){if(xs)return Ui;xs=1;const e=nt();return Ui=(h,c,f)=>{try{c=new e(c,f)}catch{return!1}return c.test(h)},Ui}var ki,Ls;function Ef(){if(Ls)return ki;Ls=1;const e=nt();return ki=(h,c)=>new e(h,c).set.map(f=>f.map(u=>u.value).join(" ").trim().split(" ")),ki}var qi,Us;function yf(){if(Us)return qi;Us=1;const e=Ge(),d=nt();return qi=(c,f,u)=>{let a=null,l=null,o=null;try{o=new d(f,u)}catch{return null}return c.forEach(s=>{o.test(s)&&(!a||l.compare(s)===-1)&&(a=s,l=new e(a,u))}),a},qi}var $i,ks;function wf(){if(ks)return $i;ks=1;const e=Ge(),d=nt();return $i=(c,f,u)=>{let a=null,l=null,o=null;try{o=new d(f,u)}catch{return null}return c.forEach(s=>{o.test(s)&&(!a||l.compare(s)===1)&&(a=s,l=new e(a,u))}),a},$i}var Mi,qs;function _f(){if(qs)return Mi;qs=1;const e=Ge(),d=nt(),h=Vr();return Mi=(f,u)=>{f=new d(f,u);let a=new e("0.0.0");if(f.test(a)||(a=new e("0.0.0-0"),f.test(a)))return a;a=null;for(let l=0;l<f.set.length;++l){const o=f.set[l];let s=null;o.forEach(i=>{const r=new e(i.semver.version);switch(i.operator){case">":r.prerelease.length===0?r.patch++:r.prerelease.push(0),r.raw=r.format();case"":case">=":(!s||h(r,s))&&(s=r);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),s&&(!a||h(a,s))&&(a=s)}return a&&f.test(a)?a:null},Mi}var Bi,$s;function Af(){if($s)return Bi;$s=1;const e=nt();return Bi=(h,c)=>{try{return new e(h,c).range||"*"}catch{return null}},Bi}var Hi,Ms;function ha(){if(Ms)return Hi;Ms=1;const e=Ge(),d=Yr(),{ANY:h}=d,c=nt(),f=zr(),u=Vr(),a=ca(),l=da(),o=fa();return Hi=(i,r,n,p)=>{i=new e(i,p),r=new c(r,p);let g,y,m,w,T;switch(n){case">":g=u,y=l,m=a,w=">",T=">=";break;case"<":g=a,y=o,m=u,w="<",T="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(f(i,r,p))return!1;for(let P=0;P<r.set.length;++P){const I=r.set[P];let b=null,O=null;if(I.forEach(S=>{S.semver===h&&(S=new d(">=0.0.0")),b=b||S,O=O||S,g(S.semver,b.semver,p)?b=S:m(S.semver,O.semver,p)&&(O=S)}),b.operator===w||b.operator===T||(!O.operator||O.operator===w)&&y(i,O.semver))return!1;if(O.operator===T&&m(i,O.semver))return!1}return!0},Hi}var ji,Bs;function Rf(){if(Bs)return ji;Bs=1;const e=ha();return ji=(h,c,f)=>e(h,c,">",f),ji}var Gi,Hs;function Tf(){if(Hs)return Gi;Hs=1;const e=ha();return Gi=(h,c,f)=>e(h,c,"<",f),Gi}var Wi,js;function Sf(){if(js)return Wi;js=1;const e=nt();return Wi=(h,c,f)=>(h=new e(h,f),c=new e(c,f),h.intersects(c,f)),Wi}var Vi,Gs;function Cf(){if(Gs)return Vi;Gs=1;const e=zr(),d=rt();return Vi=(h,c,f)=>{const u=[];let a=null,l=null;const o=h.sort((n,p)=>d(n,p,f));for(const n of o)e(n,c,f)?(l=n,a||(a=n)):(l&&u.push([a,l]),l=null,a=null);a&&u.push([a,null]);const s=[];for(const[n,p]of u)n===p?s.push(n):!p&&n===o[0]?s.push("*"):p?n===o[0]?s.push(`<=${p}`):s.push(`${n} - ${p}`):s.push(`>=${n}`);const i=s.join(" || "),r=typeof c.raw=="string"?c.raw:String(c);return i.length<r.length?i:c},Vi}var Yi,Ws;function bf(){if(Ws)return Yi;Ws=1;const e=nt(),d=Yr(),{ANY:h}=d,c=zr(),f=rt(),u=(r,n,p={})=>{if(r===n)return!0;r=new e(r,p),n=new e(n,p);let g=!1;e:for(const y of r.set){for(const m of n.set){const w=o(y,m,p);if(g=g||w!==null,w)continue e}if(g)return!1}return!0},a=[new d(">=0.0.0-0")],l=[new d(">=0.0.0")],o=(r,n,p)=>{if(r===n)return!0;if(r.length===1&&r[0].semver===h){if(n.length===1&&n[0].semver===h)return!0;p.includePrerelease?r=a:r=l}if(n.length===1&&n[0].semver===h){if(p.includePrerelease)return!0;n=l}const g=new Set;let y,m;for(const R of r)R.operator===">"||R.operator===">="?y=s(y,R,p):R.operator==="<"||R.operator==="<="?m=i(m,R,p):g.add(R.semver);if(g.size>1)return null;let w;if(y&&m){if(w=f(y.semver,m.semver,p),w>0)return null;if(w===0&&(y.operator!==">="||m.operator!=="<="))return null}for(const R of g){if(y&&!c(R,String(y),p)||m&&!c(R,String(m),p))return null;for(const v of n)if(!c(R,String(v),p))return!1;return!0}let T,P,I,b,O=m&&!p.includePrerelease&&m.semver.prerelease.length?m.semver:!1,S=y&&!p.includePrerelease&&y.semver.prerelease.length?y.semver:!1;O&&O.prerelease.length===1&&m.operator==="<"&&O.prerelease[0]===0&&(O=!1);for(const R of n){if(b=b||R.operator===">"||R.operator===">=",I=I||R.operator==="<"||R.operator==="<=",y){if(S&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===S.major&&R.semver.minor===S.minor&&R.semver.patch===S.patch&&(S=!1),R.operator===">"||R.operator===">="){if(T=s(y,R,p),T===R&&T!==y)return!1}else if(y.operator===">="&&!c(y.semver,String(R),p))return!1}if(m){if(O&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===O.major&&R.semver.minor===O.minor&&R.semver.patch===O.patch&&(O=!1),R.operator==="<"||R.operator==="<="){if(P=i(m,R,p),P===R&&P!==m)return!1}else if(m.operator==="<="&&!c(m.semver,String(R),p))return!1}if(!R.operator&&(m||y)&&w!==0)return!1}return!(y&&I&&!m&&w!==0||m&&b&&!y&&w!==0||S||O)},s=(r,n,p)=>{if(!r)return n;const g=f(r.semver,n.semver,p);return g>0?r:g<0||n.operator===">"&&r.operator===">="?n:r},i=(r,n,p)=>{if(!r)return n;const g=f(r.semver,n.semver,p);return g<0?r:g>0||n.operator==="<"&&r.operator==="<="?n:r};return Yi=u,Yi}var zi,Vs;function lu(){if(Vs)return zi;Vs=1;const e=wr(),d=Gr(),h=Ge(),c=iu(),f=jt(),u=nf(),a=af(),l=of(),o=sf(),s=lf(),i=uf(),r=cf(),n=ff(),p=rt(),g=df(),y=hf(),m=ua(),w=pf(),T=mf(),P=Vr(),I=ca(),b=au(),O=ou(),S=fa(),R=da(),v=su(),k=gf(),q=Yr(),L=nt(),$=zr(),x=Ef(),N=yf(),j=wf(),D=_f(),G=Af(),V=ha(),te=Rf(),de=Tf(),ie=Sf(),_e=Cf(),Ee=bf();return zi={parse:f,valid:u,clean:a,inc:l,diff:o,major:s,minor:i,patch:r,prerelease:n,compare:p,rcompare:g,compareLoose:y,compareBuild:m,sort:w,rsort:T,gt:P,lt:I,eq:b,neq:O,gte:S,lte:R,cmp:v,coerce:k,Comparator:q,Range:L,satisfies:$,toComparators:x,maxSatisfying:N,minSatisfying:j,minVersion:D,validRange:G,outside:V,gtr:te,ltr:de,intersects:ie,simplifyRange:_e,subset:Ee,SemVer:h,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:d.SEMVER_SPEC_VERSION,RELEASE_TYPES:d.RELEASE_TYPES,compareIdentifiers:c.compareIdentifiers,rcompareIdentifiers:c.rcompareIdentifiers},zi}var kt={},mr={exports:{}};mr.exports;var Ys;function Pf(){return Ys||(Ys=1,(function(e,d){var h=200,c="__lodash_hash_undefined__",f=1,u=2,a=9007199254740991,l="[object Arguments]",o="[object Array]",s="[object AsyncFunction]",i="[object Boolean]",r="[object Date]",n="[object Error]",p="[object Function]",g="[object GeneratorFunction]",y="[object Map]",m="[object Number]",w="[object Null]",T="[object Object]",P="[object Promise]",I="[object Proxy]",b="[object RegExp]",O="[object Set]",S="[object String]",R="[object Symbol]",v="[object Undefined]",k="[object WeakMap]",q="[object ArrayBuffer]",L="[object DataView]",$="[object Float32Array]",x="[object Float64Array]",N="[object Int8Array]",j="[object Int16Array]",D="[object Int32Array]",G="[object Uint8Array]",V="[object Uint8ClampedArray]",te="[object Uint16Array]",de="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,_e=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,Q={};Q[$]=Q[x]=Q[N]=Q[j]=Q[D]=Q[G]=Q[V]=Q[te]=Q[de]=!0,Q[l]=Q[o]=Q[q]=Q[i]=Q[L]=Q[r]=Q[n]=Q[p]=Q[y]=Q[m]=Q[T]=Q[b]=Q[O]=Q[S]=Q[k]=!1;var ve=typeof tt=="object"&&tt&&tt.Object===Object&&tt,_=typeof self=="object"&&self&&self.Object===Object&&self,E=ve||_||Function("return this")(),H=d&&!d.nodeType&&d,F=H&&!0&&e&&!e.nodeType&&e,ce=F&&F.exports===H,he=ce&&ve.process,pe=(function(){try{return he&&he.binding&&he.binding("util")}catch{}})(),Ae=pe&&pe.isTypedArray;function ye(C,U){for(var J=-1,le=C==null?0:C.length,De=0,Re=[];++J<le;){var Le=C[J];U(Le,J,C)&&(Re[De++]=Le)}return Re}function We(C,U){for(var J=-1,le=U.length,De=C.length;++J<le;)C[De+J]=U[J];return C}function Te(C,U){for(var J=-1,le=C==null?0:C.length;++J<le;)if(U(C[J],J,C))return!0;return!1}function He(C,U){for(var J=-1,le=Array(C);++J<C;)le[J]=U(J);return le}function ct(C){return function(U){return C(U)}}function ot(C,U){return C.has(U)}function it(C,U){return C==null?void 0:C[U]}function t(C){var U=-1,J=Array(C.size);return C.forEach(function(le,De){J[++U]=[De,le]}),J}function B(C,U){return function(J){return C(U(J))}}function W(C){var U=-1,J=Array(C.size);return C.forEach(function(le){J[++U]=le}),J}var ne=Array.prototype,Y=Function.prototype,re=Object.prototype,Z=E["__core-js_shared__"],oe=Y.toString,ue=re.hasOwnProperty,Se=(function(){var C=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""})(),Ce=re.toString,me=RegExp("^"+oe.call(ue).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=ce?E.Buffer:void 0,M=E.Symbol,z=E.Uint8Array,X=re.propertyIsEnumerable,K=ne.splice,ae=M?M.toStringTag:void 0,ee=Object.getOwnPropertySymbols,se=A?A.isBuffer:void 0,fe=B(Object.keys,Object),we=xt(E,"DataView"),Ie=xt(E,"Map"),xe=xt(E,"Promise"),Pe=xt(E,"Set"),Ft=xt(E,"WeakMap"),Qe=xt(Object,"create"),wt=Rt(we),_u=Rt(Ie),Au=Rt(xe),Ru=Rt(Pe),Tu=Rt(Ft),Ea=M?M.prototype:void 0,Kr=Ea?Ea.valueOf:void 0;function _t(C){var U=-1,J=C==null?0:C.length;for(this.clear();++U<J;){var le=C[U];this.set(le[0],le[1])}}function Su(){this.__data__=Qe?Qe(null):{},this.size=0}function Cu(C){var U=this.has(C)&&delete this.__data__[C];return this.size-=U?1:0,U}function bu(C){var U=this.__data__;if(Qe){var J=U[C];return J===c?void 0:J}return ue.call(U,C)?U[C]:void 0}function Pu(C){var U=this.__data__;return Qe?U[C]!==void 0:ue.call(U,C)}function Ou(C,U){var J=this.__data__;return this.size+=this.has(C)?0:1,J[C]=Qe&&U===void 0?c:U,this}_t.prototype.clear=Su,_t.prototype.delete=Cu,_t.prototype.get=bu,_t.prototype.has=Pu,_t.prototype.set=Ou;function st(C){var U=-1,J=C==null?0:C.length;for(this.clear();++U<J;){var le=C[U];this.set(le[0],le[1])}}function Iu(){this.__data__=[],this.size=0}function Du(C){var U=this.__data__,J=Ar(U,C);if(J<0)return!1;var le=U.length-1;return J==le?U.pop():K.call(U,J,1),--this.size,!0}function Nu(C){var U=this.__data__,J=Ar(U,C);return J<0?void 0:U[J][1]}function Fu(C){return Ar(this.__data__,C)>-1}function xu(C,U){var J=this.__data__,le=Ar(J,C);return le<0?(++this.size,J.push([C,U])):J[le][1]=U,this}st.prototype.clear=Iu,st.prototype.delete=Du,st.prototype.get=Nu,st.prototype.has=Fu,st.prototype.set=xu;function At(C){var U=-1,J=C==null?0:C.length;for(this.clear();++U<J;){var le=C[U];this.set(le[0],le[1])}}function Lu(){this.size=0,this.__data__={hash:new _t,map:new(Ie||st),string:new _t}}function Uu(C){var U=Rr(this,C).delete(C);return this.size-=U?1:0,U}function ku(C){return Rr(this,C).get(C)}function qu(C){return Rr(this,C).has(C)}function $u(C,U){var J=Rr(this,C),le=J.size;return J.set(C,U),this.size+=J.size==le?0:1,this}At.prototype.clear=Lu,At.prototype.delete=Uu,At.prototype.get=ku,At.prototype.has=qu,At.prototype.set=$u;function _r(C){var U=-1,J=C==null?0:C.length;for(this.__data__=new At;++U<J;)this.add(C[U])}function Mu(C){return this.__data__.set(C,c),this}function Bu(C){return this.__data__.has(C)}_r.prototype.add=_r.prototype.push=Mu,_r.prototype.has=Bu;function ft(C){var U=this.__data__=new st(C);this.size=U.size}function Hu(){this.__data__=new st,this.size=0}function ju(C){var U=this.__data__,J=U.delete(C);return this.size=U.size,J}function Gu(C){return this.__data__.get(C)}function Wu(C){return this.__data__.has(C)}function Vu(C,U){var J=this.__data__;if(J instanceof st){var le=J.__data__;if(!Ie||le.length<h-1)return le.push([C,U]),this.size=++J.size,this;J=this.__data__=new At(le)}return J.set(C,U),this.size=J.size,this}ft.prototype.clear=Hu,ft.prototype.delete=ju,ft.prototype.get=Gu,ft.prototype.has=Wu,ft.prototype.set=Vu;function Yu(C,U){var J=Tr(C),le=!J&&lc(C),De=!J&&!le&&Jr(C),Re=!J&&!le&&!De&&ba(C),Le=J||le||De||Re,Ue=Le?He(C.length,String):[],qe=Ue.length;for(var Ne in C)ue.call(C,Ne)&&!(Le&&(Ne=="length"||De&&(Ne=="offset"||Ne=="parent")||Re&&(Ne=="buffer"||Ne=="byteLength"||Ne=="byteOffset")||nc(Ne,qe)))&&Ue.push(Ne);return Ue}function Ar(C,U){for(var J=C.length;J--;)if(Ra(C[J][0],U))return J;return-1}function zu(C,U,J){var le=U(C);return Tr(C)?le:We(le,J(C))}function Gt(C){return C==null?C===void 0?v:w:ae&&ae in Object(C)?tc(C):sc(C)}function ya(C){return Wt(C)&&Gt(C)==l}function wa(C,U,J,le,De){return C===U?!0:C==null||U==null||!Wt(C)&&!Wt(U)?C!==C&&U!==U:Xu(C,U,J,le,wa,De)}function Xu(C,U,J,le,De,Re){var Le=Tr(C),Ue=Tr(U),qe=Le?o:dt(C),Ne=Ue?o:dt(U);qe=qe==l?T:qe,Ne=Ne==l?T:Ne;var Ye=qe==T,Ze=Ne==T,$e=qe==Ne;if($e&&Jr(C)){if(!Jr(U))return!1;Le=!0,Ye=!1}if($e&&!Ye)return Re||(Re=new ft),Le||ba(C)?_a(C,U,J,le,De,Re):Zu(C,U,qe,J,le,De,Re);if(!(J&f)){var Ke=Ye&&ue.call(C,"__wrapped__"),Je=Ze&&ue.call(U,"__wrapped__");if(Ke||Je){var ht=Ke?C.value():C,lt=Je?U.value():U;return Re||(Re=new ft),De(ht,lt,J,le,Re)}}return $e?(Re||(Re=new ft),ec(C,U,J,le,De,Re)):!1}function Ku(C){if(!Ca(C)||ac(C))return!1;var U=Ta(C)?me:_e;return U.test(Rt(C))}function Ju(C){return Wt(C)&&Sa(C.length)&&!!Q[Gt(C)]}function Qu(C){if(!oc(C))return fe(C);var U=[];for(var J in Object(C))ue.call(C,J)&&J!="constructor"&&U.push(J);return U}function _a(C,U,J,le,De,Re){var Le=J&f,Ue=C.length,qe=U.length;if(Ue!=qe&&!(Le&&qe>Ue))return!1;var Ne=Re.get(C);if(Ne&&Re.get(U))return Ne==U;var Ye=-1,Ze=!0,$e=J&u?new _r:void 0;for(Re.set(C,U),Re.set(U,C);++Ye<Ue;){var Ke=C[Ye],Je=U[Ye];if(le)var ht=Le?le(Je,Ke,Ye,U,C,Re):le(Ke,Je,Ye,C,U,Re);if(ht!==void 0){if(ht)continue;Ze=!1;break}if($e){if(!Te(U,function(lt,Tt){if(!ot($e,Tt)&&(Ke===lt||De(Ke,lt,J,le,Re)))return $e.push(Tt)})){Ze=!1;break}}else if(!(Ke===Je||De(Ke,Je,J,le,Re))){Ze=!1;break}}return Re.delete(C),Re.delete(U),Ze}function Zu(C,U,J,le,De,Re,Le){switch(J){case L:if(C.byteLength!=U.byteLength||C.byteOffset!=U.byteOffset)return!1;C=C.buffer,U=U.buffer;case q:return!(C.byteLength!=U.byteLength||!Re(new z(C),new z(U)));case i:case r:case m:return Ra(+C,+U);case n:return C.name==U.name&&C.message==U.message;case b:case S:return C==U+"";case y:var Ue=t;case O:var qe=le&f;if(Ue||(Ue=W),C.size!=U.size&&!qe)return!1;var Ne=Le.get(C);if(Ne)return Ne==U;le|=u,Le.set(C,U);var Ye=_a(Ue(C),Ue(U),le,De,Re,Le);return Le.delete(C),Ye;case R:if(Kr)return Kr.call(C)==Kr.call(U)}return!1}function ec(C,U,J,le,De,Re){var Le=J&f,Ue=Aa(C),qe=Ue.length,Ne=Aa(U),Ye=Ne.length;if(qe!=Ye&&!Le)return!1;for(var Ze=qe;Ze--;){var $e=Ue[Ze];if(!(Le?$e in U:ue.call(U,$e)))return!1}var Ke=Re.get(C);if(Ke&&Re.get(U))return Ke==U;var Je=!0;Re.set(C,U),Re.set(U,C);for(var ht=Le;++Ze<qe;){$e=Ue[Ze];var lt=C[$e],Tt=U[$e];if(le)var Pa=Le?le(Tt,lt,$e,U,C,Re):le(lt,Tt,$e,C,U,Re);if(!(Pa===void 0?lt===Tt||De(lt,Tt,J,le,Re):Pa)){Je=!1;break}ht||(ht=$e=="constructor")}if(Je&&!ht){var Sr=C.constructor,Cr=U.constructor;Sr!=Cr&&"constructor"in C&&"constructor"in U&&!(typeof Sr=="function"&&Sr instanceof Sr&&typeof Cr=="function"&&Cr instanceof Cr)&&(Je=!1)}return Re.delete(C),Re.delete(U),Je}function Aa(C){return zu(C,fc,rc)}function Rr(C,U){var J=C.__data__;return ic(U)?J[typeof U=="string"?"string":"hash"]:J.map}function xt(C,U){var J=it(C,U);return Ku(J)?J:void 0}function tc(C){var U=ue.call(C,ae),J=C[ae];try{C[ae]=void 0;var le=!0}catch{}var De=Ce.call(C);return le&&(U?C[ae]=J:delete C[ae]),De}var rc=ee?function(C){return C==null?[]:(C=Object(C),ye(ee(C),function(U){return X.call(C,U)}))}:dc,dt=Gt;(we&&dt(new we(new ArrayBuffer(1)))!=L||Ie&&dt(new Ie)!=y||xe&&dt(xe.resolve())!=P||Pe&&dt(new Pe)!=O||Ft&&dt(new Ft)!=k)&&(dt=function(C){var U=Gt(C),J=U==T?C.constructor:void 0,le=J?Rt(J):"";if(le)switch(le){case wt:return L;case _u:return y;case Au:return P;case Ru:return O;case Tu:return k}return U});function nc(C,U){return U=U??a,!!U&&(typeof C=="number"||Ee.test(C))&&C>-1&&C%1==0&&C<U}function ic(C){var U=typeof C;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?C!=="__proto__":C===null}function ac(C){return!!Se&&Se in C}function oc(C){var U=C&&C.constructor,J=typeof U=="function"&&U.prototype||re;return C===J}function sc(C){return Ce.call(C)}function Rt(C){if(C!=null){try{return oe.call(C)}catch{}try{return C+""}catch{}}return""}function Ra(C,U){return C===U||C!==C&&U!==U}var lc=ya((function(){return arguments})())?ya:function(C){return Wt(C)&&ue.call(C,"callee")&&!X.call(C,"callee")},Tr=Array.isArray;function uc(C){return C!=null&&Sa(C.length)&&!Ta(C)}var Jr=se||hc;function cc(C,U){return wa(C,U)}function Ta(C){if(!Ca(C))return!1;var U=Gt(C);return U==p||U==g||U==s||U==I}function Sa(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=a}function Ca(C){var U=typeof C;return C!=null&&(U=="object"||U=="function")}function Wt(C){return C!=null&&typeof C=="object"}var ba=Ae?ct(Ae):Ju;function fc(C){return uc(C)?Yu(C):Qu(C)}function dc(){return[]}function hc(){return!1}e.exports=cc})(mr,mr.exports)),mr.exports}var zs;function Of(){if(zs)return kt;zs=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.DownloadedUpdateHelper=void 0,kt.createTempUpdateFile=l;const e=vr,d=vt,h=Pf(),c=yt(),f=be;let u=class{constructor(s){this.cacheDir=s,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return f.join(this.cacheDir,"pending")}async validateDownloadedPath(s,i,r,n){if(this.versionInfo!=null&&this.file===s&&this.fileInfo!=null)return h(this.versionInfo,i)&&h(this.fileInfo.info,r.info)&&await(0,c.pathExists)(s)?s:null;const p=await this.getValidCachedUpdateFile(r,n);return p===null?null:(n.info(`Update has already been downloaded to ${s}).`),this._file=p,p)}async setDownloadedFile(s,i,r,n,p,g){this._file=s,this._packageFile=i,this.versionInfo=r,this.fileInfo=n,this._downloadedFileInfo={fileName:p,sha512:n.info.sha512,isAdminRightsRequired:n.info.isAdminRightsRequired===!0},g&&await(0,c.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,c.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(s,i){const r=this.getUpdateInfoFile();if(!await(0,c.pathExists)(r))return null;let p;try{p=await(0,c.readJson)(r)}catch(w){let T="No cached update info available";return w.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),T+=` (error on read: ${w.message})`),i.info(T),null}if(!((p==null?void 0:p.fileName)!==null))return i.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(s.info.sha512!==p.sha512)return i.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${p.sha512}, expected: ${s.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const y=f.join(this.cacheDirForPendingUpdate,p.fileName);if(!await(0,c.pathExists)(y))return i.info("Cached update file doesn't exist"),null;const m=await a(y);return s.info.sha512!==m?(i.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m}, expected: ${s.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=p,y)}getUpdateInfoFile(){return f.join(this.cacheDirForPendingUpdate,"update-info.json")}};kt.DownloadedUpdateHelper=u;function a(o,s="sha512",i="base64",r){return new Promise((n,p)=>{const g=(0,e.createHash)(s);g.on("error",p).setEncoding(i),(0,d.createReadStream)(o,{...r,highWaterMark:1024*1024}).on("error",p).on("end",()=>{g.end(),n(g.read())}).pipe(g,{end:!1})})}async function l(o,s,i){let r=0,n=f.join(s,o);for(let p=0;p<3;p++)try{return await(0,c.unlink)(n),n}catch(g){if(g.code==="ENOENT")return n;i.warn(`Error on remove temp update file: ${g}`),n=f.join(s,`${r++}-${o}`)}return n}return kt}var Kt={},qr={},Xs;function If(){if(Xs)return qr;Xs=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.getAppCacheDir=h;const e=be,d=Br;function h(){const c=(0,d.homedir)();let f;return process.platform==="win32"?f=process.env.LOCALAPPDATA||e.join(c,"AppData","Local"):process.platform==="darwin"?f=e.join(c,"Library","Caches"):f=process.env.XDG_CACHE_HOME||e.join(c,".cache"),f}return qr}var Ks;function Df(){if(Ks)return Kt;Ks=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.ElectronAppAdapter=void 0;const e=be,d=If();let h=class{constructor(f=ge.app){this.app=f}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?e.join(process.resourcesPath,"app-update.yml"):e.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,d.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(f){this.app.once("quit",(u,a)=>f(a))}};return Kt.ElectronAppAdapter=h,Kt}var Xi={},Js;function Nf(){return Js||(Js=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=h;const d=ke();e.NET_SESSION_NAME="electron-updater";function h(){return ge.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class c extends d.HttpExecutor{constructor(u){super(),this.proxyLoginCallback=u,this.cachedSession=null}async download(u,a,l){return await l.cancellationToken.createPromise((o,s,i)=>{const r={headers:l.headers||void 0,redirect:"manual"};(0,d.configureRequestUrl)(u,r),(0,d.configureRequestOptions)(r),this.doDownload(r,{destination:a,options:l,onCancel:i,callback:n=>{n==null?o(a):s(n)},responseHandler:null},0)})}createRequest(u,a){u.headers&&u.headers.Host&&(u.host=u.headers.Host,delete u.headers.Host),this.cachedSession==null&&(this.cachedSession=h());const l=ge.net.request({...u,session:this.cachedSession});return l.on("response",a),this.proxyLoginCallback!=null&&l.on("login",this.proxyLoginCallback),l}addRedirectHandlers(u,a,l,o,s){u.on("redirect",(i,r,n)=>{u.abort(),o>this.maxRedirects?l(this.createMaxRedirectError()):s(d.HttpExecutor.prepareRedirectUrlOptions(n,a))})}}e.ElectronHttpExecutor=c})(Xi)),Xi}var Jt={},qt={},Qs;function Dt(){if(Qs)return qt;Qs=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.newBaseUrl=d,qt.newUrlFromBase=h,qt.getChannelFilename=c;const e=Et;function d(f){const u=new e.URL(f);return u.pathname.endsWith("/")||(u.pathname+="/"),u}function h(f,u,a=!1){const l=new e.URL(f,u),o=u.search;return o!=null&&o.length!==0?l.search=o:a&&(l.search=`noCache=${Date.now().toString(32)}`),l}function c(f){return`${f}.yml`}return qt}var ut={},Ki,Zs;function uu(){if(Zs)return Ki;Zs=1;var e="[object Symbol]",d=/[\\^$.*+?()[\]{}|]/g,h=RegExp(d.source),c=typeof tt=="object"&&tt&&tt.Object===Object&&tt,f=typeof self=="object"&&self&&self.Object===Object&&self,u=c||f||Function("return this")(),a=Object.prototype,l=a.toString,o=u.Symbol,s=o?o.prototype:void 0,i=s?s.toString:void 0;function r(m){if(typeof m=="string")return m;if(p(m))return i?i.call(m):"";var w=m+"";return w=="0"&&1/m==-1/0?"-0":w}function n(m){return!!m&&typeof m=="object"}function p(m){return typeof m=="symbol"||n(m)&&l.call(m)==e}function g(m){return m==null?"":r(m)}function y(m){return m=g(m),m&&h.test(m)?m.replace(d,"\\$&"):m}return Ki=y,Ki}var el;function Xe(){if(el)return ut;el=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.Provider=void 0,ut.findFile=a,ut.parseUpdateInfo=l,ut.getFileList=o,ut.resolveFiles=s;const e=ke(),d=sa(),h=Et,c=Dt(),f=uu();let u=class{constructor(r){this.runtimeOptions=r,this.requestHeaders=null,this.executor=r.executor}getBlockMapFiles(r,n,p,g=null){const y=(0,c.newUrlFromBase)(`${r.pathname}.blockmap`,r);return[(0,c.newUrlFromBase)(`${r.pathname.replace(new RegExp(f(p),"g"),n)}.blockmap`,g?new h.URL(g):r),y]}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const r=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(r==="x64"?"":`-${r}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(r){return`${r}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(r){this.requestHeaders=r}httpRequest(r,n,p){return this.executor.request(this.createRequestOptions(r,n),p)}createRequestOptions(r,n){const p={};return this.requestHeaders==null?n!=null&&(p.headers=n):p.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,e.configureRequestUrl)(r,p),p}};ut.Provider=u;function a(i,r,n){var p;if(i.length===0)throw(0,e.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const g=i.filter(m=>m.url.pathname.toLowerCase().endsWith(`.${r.toLowerCase()}`)),y=(p=g.find(m=>[m.url.pathname,m.info.url].some(w=>w.includes(process.arch))))!==null&&p!==void 0?p:g.shift();return y||(n==null?i[0]:i.find(m=>!n.some(w=>m.url.pathname.toLowerCase().endsWith(`.${w.toLowerCase()}`))))}function l(i,r,n){if(i==null)throw(0,e.newError)(`Cannot parse update info from ${r} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let p;try{p=(0,d.load)(i)}catch(g){throw(0,e.newError)(`Cannot parse update info from ${r} in the latest release artifacts (${n}): ${g.stack||g.message}, rawData: ${i}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return p}function o(i){const r=i.files;if(r!=null&&r.length>0)return r;if(i.path!=null)return[{url:i.path,sha2:i.sha2,sha512:i.sha512}];throw(0,e.newError)(`No files provided: ${(0,e.safeStringifyJson)(i)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function s(i,r,n=p=>p){const g=o(i).map(w=>{if(w.sha2==null&&w.sha512==null)throw(0,e.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,e.safeStringifyJson)(w)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,c.newUrlFromBase)(n(w.url),r),info:w}}),y=i.packages,m=y==null?null:y[process.arch]||y.ia32;return m!=null&&(g[0].packageInfo={...m,path:(0,c.newUrlFromBase)(n(m.path),r).href}),g}return ut}var tl;function cu(){if(tl)return Jt;tl=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.GenericProvider=void 0;const e=ke(),d=Dt(),h=Xe();let c=class extends h.Provider{constructor(u,a,l){super(l),this.configuration=u,this.updater=a,this.baseUrl=(0,d.newBaseUrl)(this.configuration.url)}get channel(){const u=this.updater.channel||this.configuration.channel;return u==null?this.getDefaultChannelName():this.getCustomChannelName(u)}async getLatestVersion(){const u=(0,d.getChannelFilename)(this.channel),a=(0,d.newUrlFromBase)(u,this.baseUrl,this.updater.isAddNoCacheQuery);for(let l=0;;l++)try{return(0,h.parseUpdateInfo)(await this.httpRequest(a),u,a)}catch(o){if(o instanceof e.HttpError&&o.statusCode===404)throw(0,e.newError)(`Cannot find channel "${u}" update info: ${o.stack||o.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(o.code==="ECONNREFUSED"&&l<3){await new Promise((s,i)=>{try{setTimeout(s,1e3*l)}catch(r){i(r)}});continue}throw o}}resolveFiles(u){return(0,h.resolveFiles)(u,this.baseUrl)}};return Jt.GenericProvider=c,Jt}var Qt={},Zt={},rl;function Ff(){if(rl)return Zt;rl=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.BitbucketProvider=void 0;const e=ke(),d=Dt(),h=Xe();let c=class extends h.Provider{constructor(u,a,l){super({...l,isUseMultipleRangeRequest:!1}),this.configuration=u,this.updater=a;const{owner:o,slug:s}=u;this.baseUrl=(0,d.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${o}/${s}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const u=new e.CancellationToken,a=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),l=(0,d.newUrlFromBase)(a,this.baseUrl,this.updater.isAddNoCacheQuery);try{const o=await this.httpRequest(l,void 0,u);return(0,h.parseUpdateInfo)(o,a,l)}catch(o){throw(0,e.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(u){return(0,h.resolveFiles)(u,this.baseUrl)}toString(){const{owner:u,slug:a}=this.configuration;return`Bitbucket (owner: ${u}, slug: ${a}, channel: ${this.channel})`}};return Zt.BitbucketProvider=c,Zt}var mt={},nl;function fu(){if(nl)return mt;nl=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.GitHubProvider=mt.BaseGitHubProvider=void 0,mt.computeReleaseNotes=s;const e=ke(),d=lu(),h=Et,c=Dt(),f=Xe(),u=/\/tag\/([^/]+)$/;class a extends f.Provider{constructor(r,n,p){super({...p,isUseMultipleRangeRequest:!1}),this.options=r,this.baseUrl=(0,c.newBaseUrl)((0,e.githubUrl)(r,n));const g=n==="github.com"?"api.github.com":n;this.baseApiUrl=(0,c.newBaseUrl)((0,e.githubUrl)(r,g))}computeGithubBasePath(r){const n=this.options.host;return n&&!["github.com","api.github.com"].includes(n)?`/api/v3${r}`:r}}mt.BaseGitHubProvider=a;let l=class extends a{constructor(r,n,p){super(r,"github.com",p),this.options=r,this.updater=n}get channel(){const r=this.updater.channel||this.options.channel;return r==null?this.getDefaultChannelName():this.getCustomChannelName(r)}async getLatestVersion(){var r,n,p,g,y;const m=new e.CancellationToken,w=await this.httpRequest((0,c.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},m),T=(0,e.parseXml)(w);let P=T.element("entry",!1,"No published versions on GitHub"),I=null;try{if(this.updater.allowPrerelease){const k=((r=this.updater)===null||r===void 0?void 0:r.channel)||((n=d.prerelease(this.updater.currentVersion))===null||n===void 0?void 0:n[0])||null;if(k===null)I=u.exec(P.element("link").attribute("href"))[1];else for(const q of T.getElements("entry")){const L=u.exec(q.element("link").attribute("href"));if(L===null)continue;const $=L[1],x=((p=d.prerelease($))===null||p===void 0?void 0:p[0])||null,N=!k||["alpha","beta"].includes(k),j=x!==null&&!["alpha","beta"].includes(String(x));if(N&&!j&&!(k==="beta"&&x==="alpha")){I=$;break}if(x&&x===k){I=$;break}}}else{I=await this.getLatestTagName(m);for(const k of T.getElements("entry"))if(u.exec(k.element("link").attribute("href"))[1]===I){P=k;break}}}catch(k){throw(0,e.newError)(`Cannot parse releases feed: ${k.stack||k.message},
XML:
${w}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(I==null)throw(0,e.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let b,O="",S="";const R=async k=>{O=(0,c.getChannelFilename)(k),S=(0,c.newUrlFromBase)(this.getBaseDownloadPath(String(I),O),this.baseUrl);const q=this.createRequestOptions(S);try{return await this.executor.request(q,m)}catch(L){throw L instanceof e.HttpError&&L.statusCode===404?(0,e.newError)(`Cannot find ${O} in the latest release artifacts (${S}): ${L.stack||L.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):L}};try{let k=this.channel;this.updater.allowPrerelease&&(!((g=d.prerelease(I))===null||g===void 0)&&g[0])&&(k=this.getCustomChannelName(String((y=d.prerelease(I))===null||y===void 0?void 0:y[0]))),b=await R(k)}catch(k){if(this.updater.allowPrerelease)b=await R(this.getDefaultChannelName());else throw k}const v=(0,f.parseUpdateInfo)(b,O,S);return v.releaseName==null&&(v.releaseName=P.elementValueOrEmpty("title")),v.releaseNotes==null&&(v.releaseNotes=s(this.updater.currentVersion,this.updater.fullChangelog,T,P)),{tag:I,...v}}async getLatestTagName(r){const n=this.options,p=n.host==null||n.host==="github.com"?(0,c.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new h.URL(`${this.computeGithubBasePath(`/repos/${n.owner}/${n.repo}/releases`)}/latest`,this.baseApiUrl);try{const g=await this.httpRequest(p,{Accept:"application/json"},r);return g==null?null:JSON.parse(g).tag_name}catch(g){throw(0,e.newError)(`Unable to find latest version on GitHub (${p}), please ensure a production release exists: ${g.stack||g.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(r){return(0,f.resolveFiles)(r,this.baseUrl,n=>this.getBaseDownloadPath(r.tag,n.replace(/ /g,"-")))}getBaseDownloadPath(r,n){return`${this.basePath}/download/${r}/${n}`}};mt.GitHubProvider=l;function o(i){const r=i.elementValueOrEmpty("content");return r==="No content."?"":r}function s(i,r,n,p){if(!r)return o(p);const g=[];for(const y of n.getElements("entry")){const m=/\/tag\/v?([^/]+)$/.exec(y.element("link").attribute("href"))[1];d.lt(i,m)&&g.push({version:m,note:o(y)})}return g.sort((y,m)=>d.rcompare(y.version,m.version))}return mt}var er={},il;function xf(){if(il)return er;il=1,Object.defineProperty(er,"__esModule",{value:!0}),er.GitLabProvider=void 0;const e=ke(),d=Et,h=uu(),c=Dt(),f=Xe();let u=class extends f.Provider{normalizeFilename(l){return l.replace(/ |_/g,"-")}constructor(l,o,s){super({...s,isUseMultipleRangeRequest:!1}),this.options=l,this.updater=o,this.cachedLatestVersion=null;const r=l.host||"gitlab.com";this.baseApiUrl=(0,c.newBaseUrl)(`https://${r}/api/v4`)}get channel(){const l=this.updater.channel||this.options.channel;return l==null?this.getDefaultChannelName():this.getCustomChannelName(l)}async getLatestVersion(){const l=new e.CancellationToken,o=(0,c.newUrlFromBase)(`projects/${this.options.projectId}/releases/permalink/latest`,this.baseApiUrl);let s;try{const T={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},P=await this.httpRequest(o,T,l);if(!P)throw(0,e.newError)("No latest release found","ERR_UPDATER_NO_PUBLISHED_VERSIONS");s=JSON.parse(P)}catch(T){throw(0,e.newError)(`Unable to find latest release on GitLab (${o}): ${T.stack||T.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}const i=s.tag_name;let r=null,n="",p=null;const g=async T=>{n=(0,c.getChannelFilename)(T);const P=s.assets.links.find(b=>b.name===n);if(!P)throw(0,e.newError)(`Cannot find ${n} in the latest release assets`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");p=new d.URL(P.direct_asset_url);const I=this.options.token?{"PRIVATE-TOKEN":this.options.token}:void 0;try{const b=await this.httpRequest(p,I,l);if(!b)throw(0,e.newError)(`Empty response from ${p}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");return b}catch(b){throw b instanceof e.HttpError&&b.statusCode===404?(0,e.newError)(`Cannot find ${n} in the latest release artifacts (${p}): ${b.stack||b.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):b}};try{r=await g(this.channel)}catch(T){if(this.channel!==this.getDefaultChannelName())r=await g(this.getDefaultChannelName());else throw T}if(!r)throw(0,e.newError)(`Unable to parse channel data from ${n}`,"ERR_UPDATER_INVALID_UPDATE_INFO");const y=(0,f.parseUpdateInfo)(r,n,p);y.releaseName==null&&(y.releaseName=s.name),y.releaseNotes==null&&(y.releaseNotes=s.description||null);const m=new Map;for(const T of s.assets.links)m.set(this.normalizeFilename(T.name),T.direct_asset_url);const w={tag:i,assets:m,...y};return this.cachedLatestVersion=w,w}convertAssetsToMap(l){const o=new Map;for(const s of l.links)o.set(this.normalizeFilename(s.name),s.direct_asset_url);return o}findBlockMapInAssets(l,o){const s=[`${o}.blockmap`,`${this.normalizeFilename(o)}.blockmap`];for(const i of s){const r=l.get(i);if(r)return new d.URL(r)}return null}async fetchReleaseInfoByVersion(l){const o=new e.CancellationToken,s=[`v${l}`,l];for(const i of s){const r=(0,c.newUrlFromBase)(`projects/${this.options.projectId}/releases/${encodeURIComponent(i)}`,this.baseApiUrl);try{const n={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},p=await this.httpRequest(r,n,o);if(p)return JSON.parse(p)}catch(n){if(n instanceof e.HttpError&&n.statusCode===404)continue;throw(0,e.newError)(`Unable to find release ${i} on GitLab (${r}): ${n.stack||n.message}`,"ERR_UPDATER_RELEASE_NOT_FOUND")}}throw(0,e.newError)(`Unable to find release with version ${l} (tried: ${s.join(", ")}) on GitLab`,"ERR_UPDATER_RELEASE_NOT_FOUND")}setAuthHeaderForToken(l){const o={};return l!=null&&(l.startsWith("Bearer")?o.authorization=l:o["PRIVATE-TOKEN"]=l),o}async getVersionInfoForBlockMap(l){if(this.cachedLatestVersion&&this.cachedLatestVersion.version===l)return this.cachedLatestVersion.assets;const o=await this.fetchReleaseInfoByVersion(l);return o&&o.assets?this.convertAssetsToMap(o.assets):null}async findBlockMapUrlsFromAssets(l,o,s){let i=null,r=null;const n=await this.getVersionInfoForBlockMap(o);n&&(i=this.findBlockMapInAssets(n,s));const p=await this.getVersionInfoForBlockMap(l);if(p){const g=s.replace(new RegExp(h(o),"g"),l);r=this.findBlockMapInAssets(p,g)}return[r,i]}async getBlockMapFiles(l,o,s,i=null){if(this.options.uploadTarget==="project_upload"){const r=l.pathname.split("/").pop()||"",[n,p]=await this.findBlockMapUrlsFromAssets(o,s,r);if(!p)throw(0,e.newError)(`Cannot find blockmap file for ${s} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");if(!n)throw(0,e.newError)(`Cannot find blockmap file for ${o} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");return[n,p]}else return super.getBlockMapFiles(l,o,s,i)}resolveFiles(l){return(0,f.getFileList)(l).map(o=>{const i=[o.url,this.normalizeFilename(o.url)].find(n=>l.assets.has(n)),r=i?l.assets.get(i):void 0;if(!r)throw(0,e.newError)(`Cannot find asset "${o.url}" in GitLab release assets. Available assets: ${Array.from(l.assets.keys()).join(", ")}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new d.URL(r),info:o}})}toString(){return`GitLab (projectId: ${this.options.projectId}, channel: ${this.channel})`}};return er.GitLabProvider=u,er}var tr={},al;function Lf(){if(al)return tr;al=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.KeygenProvider=void 0;const e=ke(),d=Dt(),h=Xe();let c=class extends h.Provider{constructor(u,a,l){super({...l,isUseMultipleRangeRequest:!1}),this.configuration=u,this.updater=a,this.defaultHostname="api.keygen.sh";const o=this.configuration.host||this.defaultHostname;this.baseUrl=(0,d.newBaseUrl)(`https://${o}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const u=new e.CancellationToken,a=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),l=(0,d.newUrlFromBase)(a,this.baseUrl,this.updater.isAddNoCacheQuery);try{const o=await this.httpRequest(l,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},u);return(0,h.parseUpdateInfo)(o,a,l)}catch(o){throw(0,e.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(u){return(0,h.resolveFiles)(u,this.baseUrl)}toString(){const{account:u,product:a,platform:l}=this.configuration;return`Keygen (account: ${u}, product: ${a}, platform: ${l}, channel: ${this.channel})`}};return tr.KeygenProvider=c,tr}var rr={},ol;function Uf(){if(ol)return rr;ol=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.PrivateGitHubProvider=void 0;const e=ke(),d=sa(),h=be,c=Et,f=Dt(),u=fu(),a=Xe();let l=class extends u.BaseGitHubProvider{constructor(s,i,r,n){super(s,"api.github.com",n),this.updater=i,this.token=r}createRequestOptions(s,i){const r=super.createRequestOptions(s,i);return r.redirect="manual",r}async getLatestVersion(){const s=new e.CancellationToken,i=(0,f.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(s),n=r.assets.find(y=>y.name===i);if(n==null)throw(0,e.newError)(`Cannot find ${i} in the release ${r.html_url||r.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const p=new c.URL(n.url);let g;try{g=(0,d.load)(await this.httpRequest(p,this.configureHeaders("application/octet-stream"),s))}catch(y){throw y instanceof e.HttpError&&y.statusCode===404?(0,e.newError)(`Cannot find ${i} in the latest release artifacts (${p}): ${y.stack||y.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):y}return g.assets=r.assets,g}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(s){return{accept:s,authorization:`token ${this.token}`}}async getLatestVersionInfo(s){const i=this.updater.allowPrerelease;let r=this.basePath;i||(r=`${r}/latest`);const n=(0,f.newUrlFromBase)(r,this.baseUrl);try{const p=JSON.parse(await this.httpRequest(n,this.configureHeaders("application/vnd.github.v3+json"),s));return i?p.find(g=>g.prerelease)||p[0]:p}catch(p){throw(0,e.newError)(`Unable to find latest version on GitHub (${n}), please ensure a production release exists: ${p.stack||p.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(s){return(0,a.getFileList)(s).map(i=>{const r=h.posix.basename(i.url).replace(/ /g,"-"),n=s.assets.find(p=>p!=null&&p.name===r);if(n==null)throw(0,e.newError)(`Cannot find asset "${r}" in: ${JSON.stringify(s.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new c.URL(n.url),info:i}})}};return rr.PrivateGitHubProvider=l,rr}var sl;function kf(){if(sl)return Qt;sl=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.isUrlProbablySupportMultiRangeRequests=l,Qt.createClient=o;const e=ke(),d=Ff(),h=cu(),c=fu(),f=xf(),u=Lf(),a=Uf();function l(s){return!s.includes("s3.amazonaws.com")}function o(s,i,r){if(typeof s=="string")throw(0,e.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const n=s.provider;switch(n){case"github":{const p=s,g=(p.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||p.token;return g==null?new c.GitHubProvider(p,i,r):new a.PrivateGitHubProvider(p,i,g,r)}case"bitbucket":return new d.BitbucketProvider(s,i,r);case"gitlab":return new f.GitLabProvider(s,i,r);case"keygen":return new u.KeygenProvider(s,i,r);case"s3":case"spaces":return new h.GenericProvider({provider:"generic",url:(0,e.getS3LikeProviderBaseUrl)(s),channel:s.channel||null},i,{...r,isUseMultipleRangeRequest:!1});case"generic":{const p=s;return new h.GenericProvider(p,i,{...r,isUseMultipleRangeRequest:p.useMultipleRangeRequest!==!1&&l(p.url)})}case"custom":{const p=s,g=p.updateProvider;if(!g)throw(0,e.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new g(p,i,r)}default:throw(0,e.newError)(`Unsupported provider: ${n}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return Qt}var nr={},ir={},$t={},Mt={},ll;function pa(){if(ll)return Mt;ll=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.OperationKind=void 0,Mt.computeOperations=d;var e;(function(a){a[a.COPY=0]="COPY",a[a.DOWNLOAD=1]="DOWNLOAD"})(e||(Mt.OperationKind=e={}));function d(a,l,o){const s=u(a.files),i=u(l.files);let r=null;const n=l.files[0],p=[],g=n.name,y=s.get(g);if(y==null)throw new Error(`no file ${g} in old blockmap`);const m=i.get(g);let w=0;const{checksumToOffset:T,checksumToOldSize:P}=f(s.get(g),y.offset,o);let I=n.offset;for(let b=0;b<m.checksums.length;I+=m.sizes[b],b++){const O=m.sizes[b],S=m.checksums[b];let R=T.get(S);R!=null&&P.get(S)!==O&&(o.warn(`Checksum ("${S}") matches, but size differs (old: ${P.get(S)}, new: ${O})`),R=void 0),R===void 0?(w++,r!=null&&r.kind===e.DOWNLOAD&&r.end===I?r.end+=O:(r={kind:e.DOWNLOAD,start:I,end:I+O},c(r,p,S,b))):r!=null&&r.kind===e.COPY&&r.end===R?r.end+=O:(r={kind:e.COPY,start:R,end:R+O},c(r,p,S,b))}return w>0&&o.info(`File${n.name==="file"?"":" "+n.name} has ${w} changed blocks`),p}const h=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function c(a,l,o,s){if(h&&l.length!==0){const i=l[l.length-1];if(i.kind===a.kind&&a.start<i.end&&a.start>i.start){const r=[i.start,i.end,a.start,a.end].reduce((n,p)=>n<p?n:p);throw new Error(`operation (block index: ${s}, checksum: ${o}, kind: ${e[a.kind]}) overlaps previous operation (checksum: ${o}):
abs: ${i.start} until ${i.end} and ${a.start} until ${a.end}
rel: ${i.start-r} until ${i.end-r} and ${a.start-r} until ${a.end-r}`)}}l.push(a)}function f(a,l,o){const s=new Map,i=new Map;let r=l;for(let n=0;n<a.checksums.length;n++){const p=a.checksums[n],g=a.sizes[n],y=i.get(p);if(y===void 0)s.set(p,r),i.set(p,g);else if(o.debug!=null){const m=y===g?"(same size)":`(size: ${y}, this size: ${g})`;o.debug(`${p} duplicated in blockmap ${m}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}r+=g}return{checksumToOffset:s,checksumToOldSize:i}}function u(a){const l=new Map;for(const o of a)l.set(o.name,o);return l}return Mt}var ul;function du(){if(ul)return $t;ul=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.DataSplitter=void 0,$t.copyData=a;const e=ke(),d=vt,h=gr,c=pa(),f=Buffer.from(`\r
\r
`);var u;(function(o){o[o.INIT=0]="INIT",o[o.HEADER=1]="HEADER",o[o.BODY=2]="BODY"})(u||(u={}));function a(o,s,i,r,n){const p=(0,d.createReadStream)("",{fd:i,autoClose:!1,start:o.start,end:o.end-1});p.on("error",r),p.once("end",n),p.pipe(s,{end:!1})}let l=class extends h.Writable{constructor(s,i,r,n,p,g){super(),this.out=s,this.options=i,this.partIndexToTaskIndex=r,this.partIndexToLength=p,this.finishHandler=g,this.partIndex=-1,this.headerListBuffer=null,this.readState=u.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=n.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(s,i,r){if(this.isFinished){console.error(`Trailing ignored data: ${s.length} bytes`);return}this.handleData(s).then(r).catch(r)}async handleData(s){let i=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,e.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const r=Math.min(this.ignoreByteCount,s.length);this.ignoreByteCount-=r,i=r}else if(this.remainingPartDataCount>0){const r=Math.min(this.remainingPartDataCount,s.length);this.remainingPartDataCount-=r,await this.processPartData(s,0,r),i=r}if(i!==s.length){if(this.readState===u.HEADER){const r=this.searchHeaderListEnd(s,i);if(r===-1)return;i=r,this.readState=u.BODY,this.headerListBuffer=null}for(;;){if(this.readState===u.BODY)this.readState=u.INIT;else{this.partIndex++;let g=this.partIndexToTaskIndex.get(this.partIndex);if(g==null)if(this.isFinished)g=this.options.end;else throw(0,e.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const y=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(y<g)await this.copyExistingData(y,g);else if(y>g)throw(0,e.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(i=this.searchHeaderListEnd(s,i),i===-1){this.readState=u.HEADER;return}}const r=this.partIndexToLength[this.partIndex],n=i+r,p=Math.min(n,s.length);if(await this.processPartStarted(s,i,p),this.remainingPartDataCount=r-(p-i),this.remainingPartDataCount>0)return;if(i=n+this.boundaryLength,i>=s.length){this.ignoreByteCount=this.boundaryLength-(s.length-n);return}}}}copyExistingData(s,i){return new Promise((r,n)=>{const p=()=>{if(s===i){r();return}const g=this.options.tasks[s];if(g.kind!==c.OperationKind.COPY){n(new Error("Task kind must be COPY"));return}a(g,this.out,this.options.oldFileFd,n,()=>{s++,p()})};p()})}searchHeaderListEnd(s,i){const r=s.indexOf(f,i);if(r!==-1)return r+f.length;const n=i===0?s:s.slice(i);return this.headerListBuffer==null?this.headerListBuffer=n:this.headerListBuffer=Buffer.concat([this.headerListBuffer,n]),-1}onPartEnd(){const s=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==s)throw(0,e.newError)(`Expected length: ${s} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(s,i,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(s,i,r)}processPartData(s,i,r){this.actualPartLength+=r-i;const n=this.out;return n.write(i===0&&s.length===r?s:s.slice(i,r))?Promise.resolve():new Promise((p,g)=>{n.on("error",g),n.once("drain",()=>{n.removeListener("error",g),p()})})}};return $t.DataSplitter=l,$t}var ar={},cl;function qf(){if(cl)return ar;cl=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.executeTasksUsingMultipleRangeRequests=c,ar.checkIsRangesSupported=u;const e=ke(),d=du(),h=pa();function c(a,l,o,s,i){const r=n=>{if(n>=l.length){a.fileMetadataBuffer!=null&&o.write(a.fileMetadataBuffer),o.end();return}const p=n+1e3;f(a,{tasks:l,start:n,end:Math.min(l.length,p),oldFileFd:s},o,()=>r(p),i)};return r}function f(a,l,o,s,i){let r="bytes=",n=0;const p=new Map,g=[];for(let w=l.start;w<l.end;w++){const T=l.tasks[w];T.kind===h.OperationKind.DOWNLOAD&&(r+=`${T.start}-${T.end-1}, `,p.set(n,w),n++,g.push(T.end-T.start))}if(n<=1){const w=T=>{if(T>=l.end){s();return}const P=l.tasks[T++];if(P.kind===h.OperationKind.COPY)(0,d.copyData)(P,o,l.oldFileFd,i,()=>w(T));else{const I=a.createRequestOptions();I.headers.Range=`bytes=${P.start}-${P.end-1}`;const b=a.httpExecutor.createRequest(I,O=>{O.on("error",i),u(O,i)&&(O.pipe(o,{end:!1}),O.once("end",()=>w(T)))});a.httpExecutor.addErrorAndTimeoutHandlers(b,i),b.end()}};w(l.start);return}const y=a.createRequestOptions();y.headers.Range=r.substring(0,r.length-2);const m=a.httpExecutor.createRequest(y,w=>{if(!u(w,i))return;const T=(0,e.safeGetHeader)(w,"content-type"),P=/^multipart\/.+?\s*;\s*boundary=(?:"([^"]+)"|([^\s";]+))\s*$/i.exec(T);if(P==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${T}"`));return}const I=new d.DataSplitter(o,l,p,P[1]||P[2],g,s);I.on("error",i),w.pipe(I),w.on("end",()=>{setTimeout(()=>{m.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});a.httpExecutor.addErrorAndTimeoutHandlers(m,i),m.end()}function u(a,l){if(a.statusCode>=400)return l((0,e.createHttpError)(a)),!1;if(a.statusCode!==206){const o=(0,e.safeGetHeader)(a,"accept-ranges");if(o==null||o==="none")return l(new Error(`Server doesn't support Accept-Ranges (response code ${a.statusCode})`)),!1}return!0}return ar}var or={},fl;function $f(){if(fl)return or;fl=1,Object.defineProperty(or,"__esModule",{value:!0}),or.ProgressDifferentialDownloadCallbackTransform=void 0;const e=gr;var d;(function(c){c[c.COPY=0]="COPY",c[c.DOWNLOAD=1]="DOWNLOAD"})(d||(d={}));let h=class extends e.Transform{constructor(f,u,a){super(),this.progressDifferentialDownloadInfo=f,this.cancellationToken=u,this.onProgress=a,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=d.COPY,this.nextUpdate=this.start+1e3}_transform(f,u,a){if(this.cancellationToken.cancelled){a(new Error("cancelled"),null);return}if(this.operationType==d.COPY){a(null,f);return}this.transferred+=f.length,this.delta+=f.length;const l=Date.now();l>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=l+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((l-this.start)/1e3))}),this.delta=0),a(null,f)}beginFileCopy(){this.operationType=d.COPY}beginRangeDownload(){this.operationType=d.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(f){if(this.cancellationToken.cancelled){f(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,f(null)}};return or.ProgressDifferentialDownloadCallbackTransform=h,or}var dl;function hu(){if(dl)return ir;dl=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.DifferentialDownloader=void 0;const e=ke(),d=yt(),h=vt,c=du(),f=Et,u=pa(),a=qf(),l=$f();let o=class{constructor(n,p,g){this.blockAwareFileInfo=n,this.httpExecutor=p,this.options=g,this.fileMetadataBuffer=null,this.logger=g.logger}createRequestOptions(){const n={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,e.configureRequestUrl)(this.options.newUrl,n),(0,e.configureRequestOptions)(n),n}doDownload(n,p){if(n.version!==p.version)throw new Error(`version is different (${n.version} - ${p.version}), full download is required`);const g=this.logger,y=(0,u.computeOperations)(n,p,g);g.debug!=null&&g.debug(JSON.stringify(y,null,2));let m=0,w=0;for(const P of y){const I=P.end-P.start;P.kind===u.OperationKind.DOWNLOAD?m+=I:w+=I}const T=this.blockAwareFileInfo.size;if(m+w+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==T)throw new Error(`Internal error, size mismatch: downloadSize: ${m}, copySize: ${w}, newSize: ${T}`);return g.info(`Full: ${s(T)}, To download: ${s(m)} (${Math.round(m/(T/100))}%)`),this.downloadFile(y)}downloadFile(n){const p=[],g=()=>Promise.all(p.map(y=>(0,d.close)(y.descriptor).catch(m=>{this.logger.error(`cannot close file "${y.path}": ${m}`)})));return this.doDownloadFile(n,p).then(g).catch(y=>g().catch(m=>{try{this.logger.error(`cannot close files: ${m}`)}catch(w){try{console.error(w)}catch{}}throw y}).then(()=>{throw y}))}async doDownloadFile(n,p){const g=await(0,d.open)(this.options.oldFile,"r");p.push({descriptor:g,path:this.options.oldFile});const y=await(0,d.open)(this.options.newFile,"w");p.push({descriptor:y,path:this.options.newFile});const m=(0,h.createWriteStream)(this.options.newFile,{fd:y});await new Promise((w,T)=>{const P=[];let I;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const L=[];let $=0;for(const N of n)N.kind===u.OperationKind.DOWNLOAD&&(L.push(N.end-N.start),$+=N.end-N.start);const x={expectedByteCounts:L,grandTotal:$};I=new l.ProgressDifferentialDownloadCallbackTransform(x,this.options.cancellationToken,this.options.onProgress),P.push(I)}const b=new e.DigestTransform(this.blockAwareFileInfo.sha512);b.isValidateOnEnd=!1,P.push(b),m.on("finish",()=>{m.close(()=>{p.splice(1,1);try{b.validate()}catch(L){T(L);return}w(void 0)})}),P.push(m);let O=null;for(const L of P)L.on("error",T),O==null?O=L:O=O.pipe(L);const S=P[0];let R;if(this.options.isUseMultipleRangeRequest){R=(0,a.executeTasksUsingMultipleRangeRequests)(this,n,S,g,T),R(0);return}let v=0,k=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const q=this.createRequestOptions();q.redirect="manual",R=L=>{var $,x;if(L>=n.length){this.fileMetadataBuffer!=null&&S.write(this.fileMetadataBuffer),S.end();return}const N=n[L++];if(N.kind===u.OperationKind.COPY){I&&I.beginFileCopy(),(0,c.copyData)(N,S,g,T,()=>R(L));return}const j=`bytes=${N.start}-${N.end-1}`;q.headers.range=j,(x=($=this.logger)===null||$===void 0?void 0:$.debug)===null||x===void 0||x.call($,`download range: ${j}`),I&&I.beginRangeDownload();const D=this.httpExecutor.createRequest(q,G=>{G.on("error",T),G.on("aborted",()=>{T(new Error("response has been aborted by the server"))}),G.statusCode>=400&&T((0,e.createHttpError)(G)),G.pipe(S,{end:!1}),G.once("end",()=>{I&&I.endRangeDownload(),++v===100?(v=0,setTimeout(()=>R(L),1e3)):R(L)})});D.on("redirect",(G,V,te)=>{this.logger.info(`Redirect to ${i(te)}`),k=te,(0,e.configureRequestUrl)(new f.URL(k),q),D.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(D,T),D.end()},R(0)})}async readRemoteBytes(n,p){const g=Buffer.allocUnsafe(p+1-n),y=this.createRequestOptions();y.headers.range=`bytes=${n}-${p}`;let m=0;if(await this.request(y,w=>{w.copy(g,m),m+=w.length}),m!==g.length)throw new Error(`Received data length ${m} is not equal to expected ${g.length}`);return g}request(n,p){return new Promise((g,y)=>{const m=this.httpExecutor.createRequest(n,w=>{(0,a.checkIsRangesSupported)(w,y)&&(w.on("error",y),w.on("aborted",()=>{y(new Error("response has been aborted by the server"))}),w.on("data",p),w.on("end",()=>g()))});this.httpExecutor.addErrorAndTimeoutHandlers(m,y),m.end()})}};ir.DifferentialDownloader=o;function s(r,n=" KB"){return new Intl.NumberFormat("en").format((r/1024).toFixed(2))+n}function i(r){const n=r.indexOf("?");return n<0?r:r.substring(0,n)}return ir}var hl;function Mf(){if(hl)return nr;hl=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.GenericDifferentialDownloader=void 0;const e=hu();let d=class extends e.DifferentialDownloader{download(c,f){return this.doDownload(c,f)}};return nr.GenericDifferentialDownloader=d,nr}var Ji={},pl;function Nt(){return pl||(pl=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.CancellationToken=void 0,e.addHandler=c;const d=ke();Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class h{constructor(u){this.emitter=u}login(u){c(this.emitter,"login",u)}progress(u){c(this.emitter,e.DOWNLOAD_PROGRESS,u)}updateDownloaded(u){c(this.emitter,e.UPDATE_DOWNLOADED,u)}updateCancelled(u){c(this.emitter,"update-cancelled",u)}}e.UpdaterSignal=h;function c(f,u,a){f.on(u,a)}})(Ji)),Ji}var ml;function ma(){if(ml)return Ct;ml=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.NoOpLogger=Ct.AppUpdater=void 0;const e=ke(),d=vr,h=Br,c=Ll,f=yt(),u=sa(),a=rf(),l=be,o=lu(),s=Of(),i=Df(),r=Nf(),n=cu(),p=kf(),g=kl,y=Mf(),m=Nt();let w=class pu extends c.EventEmitter{get channel(){return this._channel}set channel(b){if(this._channel!=null){if(typeof b!="string")throw(0,e.newError)(`Channel must be a string, but got: ${b}`,"ERR_UPDATER_INVALID_CHANNEL");if(b.length===0)throw(0,e.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=b,this.allowDowngrade=!0}addAuthHeader(b){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:b})}get netSession(){return(0,r.getNetSession)()}get logger(){return this._logger}set logger(b){this._logger=b??new P}set updateConfigPath(b){this.clientPromise=null,this._appUpdateConfigPath=b,this.configOnDisk=new a.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(b){b&&(this._isUpdateSupported=b)}get isUserWithinRollout(){return this._isUserWithinRollout}set isUserWithinRollout(b){b&&(this._isUserWithinRollout=b)}constructor(b,O){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this.previousBlockmapBaseUrlOverride=null,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new m.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=v=>this.checkIfUpdateSupported(v),this._isUserWithinRollout=v=>this.isStagingMatch(v),this.clientPromise=null,this.stagingUserIdPromise=new a.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new a.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",v=>{this._logger.error(`Error: ${v.stack||v.message}`)}),O==null?(this.app=new i.ElectronAppAdapter,this.httpExecutor=new r.ElectronHttpExecutor((v,k)=>this.emit("login",v,k))):(this.app=O,this.httpExecutor=null);const S=this.app.version,R=(0,o.parse)(S);if(R==null)throw(0,e.newError)(`App version is not a valid semver version: "${S}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=R,this.allowPrerelease=T(R),b!=null&&(this.setFeedURL(b),typeof b!="string"&&b.requestHeaders&&(this.requestHeaders=b.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(b){const O=this.createProviderRuntimeOptions();let S;typeof b=="string"?S=new n.GenericProvider({provider:"generic",url:b},this,{...O,isUseMultipleRangeRequest:(0,p.isUrlProbablySupportMultiRangeRequests)(b)}):S=(0,p.createClient)(b,this,O),this.clientPromise=Promise.resolve(S)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let b=this.checkForUpdatesPromise;if(b!=null)return this._logger.info("Checking for update (already in progress)"),b;const O=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),b=this.doCheckForUpdates().then(S=>(O(),S)).catch(S=>{throw O(),this.emit("error",S,`Cannot check for updates: ${(S.stack||S).toString()}`),S}),this.checkForUpdatesPromise=b,b}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(b){return this.checkForUpdates().then(O=>O!=null&&O.downloadPromise?(O.downloadPromise.then(()=>{const S=pu.formatDownloadNotification(O.updateInfo.version,this.app.name,b);new ge.Notification(S).show()}),O):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),O))}static formatDownloadNotification(b,O,S){return S==null&&(S={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),S={title:S.title.replace("{appName}",O).replace("{version}",b),body:S.body.replace("{appName}",O).replace("{version}",b)},S}async isStagingMatch(b){const O=b.stagingPercentage;let S=O;if(S==null)return!0;if(S=parseInt(S,10),isNaN(S))return this._logger.warn(`Staging percentage is NaN: ${O}`),!0;S=S/100;const R=await this.stagingUserIdPromise.value,k=e.UUID.parse(R).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${S}, percentage: ${k}, user id: ${R}`),k<S}computeFinalHeaders(b){return this.requestHeaders!=null&&Object.assign(b,this.requestHeaders),b}async isUpdateAvailable(b){const O=(0,o.parse)(b.version);if(O==null)throw(0,e.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${b.version}"`,"ERR_UPDATER_INVALID_VERSION");const S=this.currentVersion;if((0,o.eq)(O,S)||!await Promise.resolve(this.isUpdateSupported(b))||!await Promise.resolve(this.isUserWithinRollout(b)))return!1;const v=(0,o.gt)(O,S),k=(0,o.lt)(O,S);return v?!0:this.allowDowngrade&&k}checkIfUpdateSupported(b){const O=b==null?void 0:b.minimumSystemVersion,S=(0,h.release)();if(O)try{if((0,o.lt)(S,O))return this._logger.info(`Current OS version ${S} is less than the minimum OS version required ${O} for version ${S}`),!1}catch(R){this._logger.warn(`Failed to compare current OS version(${S}) with minimum OS version(${O}): ${(R.message||R).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(S=>(0,p.createClient)(S,this,this.createProviderRuntimeOptions())));const b=await this.clientPromise,O=await this.stagingUserIdPromise.value;return b.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":O})),{info:await b.getLatestVersion(),provider:b}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const b=await this.getUpdateInfoAndProvider(),O=b.info;if(!await this.isUpdateAvailable(O))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${O.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",O),{isUpdateAvailable:!1,versionInfo:O,updateInfo:O};this.updateInfoAndProvider=b,this.onUpdateAvailable(O);const S=new e.CancellationToken;return{isUpdateAvailable:!0,versionInfo:O,updateInfo:O,cancellationToken:S,downloadPromise:this.autoDownload?this.downloadUpdate(S):null}}onUpdateAvailable(b){this._logger.info(`Found version ${b.version} (url: ${(0,e.asArray)(b.files).map(O=>O.url).join(", ")})`),this.emit("update-available",b)}downloadUpdate(b=new e.CancellationToken){const O=this.updateInfoAndProvider;if(O==null){const R=new Error("Please check update first");return this.dispatchError(R),Promise.reject(R)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,e.asArray)(O.info.files).map(R=>R.url).join(", ")}`);const S=R=>{if(!(R instanceof e.CancellationError))try{this.dispatchError(R)}catch(v){this._logger.warn(`Cannot dispatch error event: ${v.stack||v}`)}return R};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:O,requestHeaders:this.computeRequestHeaders(O.provider),cancellationToken:b,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(R=>{throw S(R)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(b){this.emit("error",b,(b.stack||b).toString())}dispatchUpdateDownloaded(b){this.emit(m.UPDATE_DOWNLOADED,b)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,u.load)(await(0,f.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(b){const O=b.fileExtraDownloadHeaders;if(O!=null){const S=this.requestHeaders;return S==null?O:{...O,...S}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const b=l.join(this.app.userDataPath,".updaterId");try{const S=await(0,f.readFile)(b,"utf-8");if(e.UUID.check(S))return S;this._logger.warn(`Staging user id file exists, but content was invalid: ${S}`)}catch(S){S.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${S}`)}const O=e.UUID.v5((0,d.randomBytes)(4096),e.UUID.OID);this._logger.info(`Generated new staging user ID: ${O}`);try{await(0,f.outputFile)(b,O)}catch(S){this._logger.warn(`Couldn't write out staging user ID: ${S}`)}return O}get isAddNoCacheQuery(){const b=this.requestHeaders;if(b==null)return!0;for(const O of Object.keys(b)){const S=O.toLowerCase();if(S==="authorization"||S==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let b=this.downloadedUpdateHelper;if(b==null){const O=(await this.configOnDisk.value).updaterCacheDirName,S=this._logger;O==null&&S.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const R=l.join(this.app.baseCachePath,O||this.app.name);S.debug!=null&&S.debug(`updater cache dir: ${R}`),b=new s.DownloadedUpdateHelper(R),this.downloadedUpdateHelper=b}return b}async executeDownload(b){const O=b.fileInfo,S={headers:b.downloadUpdateOptions.requestHeaders,cancellationToken:b.downloadUpdateOptions.cancellationToken,sha2:O.info.sha2,sha512:O.info.sha512};this.listenerCount(m.DOWNLOAD_PROGRESS)>0&&(S.onProgress=ie=>this.emit(m.DOWNLOAD_PROGRESS,ie));const R=b.downloadUpdateOptions.updateInfoAndProvider.info,v=R.version,k=O.packageInfo;function q(){const ie=decodeURIComponent(b.fileInfo.url.pathname);return ie.toLowerCase().endsWith(`.${b.fileExtension.toLowerCase()}`)?l.basename(ie):b.fileInfo.info.url}const L=await this.getOrCreateDownloadHelper(),$=L.cacheDirForPendingUpdate;await(0,f.mkdir)($,{recursive:!0});const x=q();let N=l.join($,x);const j=k==null?null:l.join($,`package-${v}${l.extname(k.path)||".7z"}`),D=async ie=>{await L.setDownloadedFile(N,j,R,O,x,ie),await b.done({...R,downloadedFile:N});const _e=l.join($,"current.blockmap");return await(0,f.pathExists)(_e)&&await(0,f.copyFile)(_e,l.join(L.cacheDir,"current.blockmap")),j==null?[N]:[N,j]},G=this._logger,V=await L.validateDownloadedPath(N,R,O,G);if(V!=null)return N=V,await D(!1);const te=async()=>(await L.clear().catch(()=>{}),await(0,f.unlink)(N).catch(()=>{})),de=await(0,s.createTempUpdateFile)(`temp-${x}`,$,G);try{await b.task(de,S,j,te),await(0,e.retry)(()=>(0,f.rename)(de,N),{retries:60,interval:500,shouldRetry:ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message)?!0:(G.warn(`Cannot rename temp file to final file: ${ie.message||ie.stack}`),!1)})}catch(ie){throw await te(),ie instanceof e.CancellationError&&(G.info("cancelled"),this.emit("update-cancelled",R)),ie}return G.info(`New version ${v} has been downloaded to ${N}`),await D(!0)}async differentialDownloadInstaller(b,O,S,R,v){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const k=O.updateInfoAndProvider.provider,q=await k.getBlockMapFiles(b.url,this.app.version,O.updateInfoAndProvider.info.version,this.previousBlockmapBaseUrlOverride);this._logger.info(`Download block maps (old: "${q[0]}", new: ${q[1]})`);const L=async G=>{const V=await this.httpExecutor.downloadToBuffer(G,{headers:O.requestHeaders,cancellationToken:O.cancellationToken});if(V==null||V.length===0)throw new Error(`Blockmap "${G.href}" is empty`);try{return JSON.parse((0,g.gunzipSync)(V).toString())}catch(te){throw new Error(`Cannot parse blockmap "${G.href}", error: ${te}`)}},$={newUrl:b.url,oldFile:l.join(this.downloadedUpdateHelper.cacheDir,v),logger:this._logger,newFile:S,isUseMultipleRangeRequest:k.isUseMultipleRangeRequest,requestHeaders:O.requestHeaders,cancellationToken:O.cancellationToken};this.listenerCount(m.DOWNLOAD_PROGRESS)>0&&($.onProgress=G=>this.emit(m.DOWNLOAD_PROGRESS,G));const x=async(G,V)=>{const te=l.join(V,"current.blockmap");await(0,f.outputFile)(te,(0,g.gzipSync)(JSON.stringify(G)))},N=async G=>{const V=l.join(G,"current.blockmap");try{if(await(0,f.pathExists)(V))return JSON.parse((0,g.gunzipSync)(await(0,f.readFile)(V)).toString())}catch(te){this._logger.warn(`Cannot parse blockmap "${V}", error: ${te}`)}return null},j=await L(q[1]);await x(j,this.downloadedUpdateHelper.cacheDirForPendingUpdate);let D=await N(this.downloadedUpdateHelper.cacheDir);return D==null&&(D=await L(q[0])),await new y.GenericDifferentialDownloader(b.info,this.httpExecutor,$).download(D,j),!1}catch(k){if(this._logger.error(`Cannot download differentially, fallback to full download: ${k.stack||k}`),this._testOnlyOptions!=null)throw k;return!0}}};Ct.AppUpdater=w;function T(I){const b=(0,o.prerelease)(I);return b!=null&&b.length>0}class P{info(b){}warn(b){}error(b){}}return Ct.NoOpLogger=P,Ct}var gl;function Xr(){if(gl)return Vt;gl=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.BaseUpdater=void 0;const e=Mr,d=ma();let h=class extends d.AppUpdater{constructor(f,u){super(f,u),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(f=!1,u=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(f,f?u:this.autoRunAppAfterInstall)?setImmediate(()=>{ge.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(f){return super.executeDownload({...f,done:u=>(this.dispatchUpdateDownloaded(u),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(f=!1,u=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const a=this.downloadedUpdateHelper,l=this.installerPath,o=a==null?null:a.downloadedFileInfo;if(l==null||o==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${f}, isForceRunAfter: ${u}`),this.doInstall({isSilent:f,isForceRunAfter:u,isAdminRightsRequired:o.isAdminRightsRequired})}catch(s){return this.dispatchError(s),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(f=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(f!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${f}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}spawnSyncLog(f,u=[],a={}){this._logger.info(`Executing: ${f} with args: ${u}`);const l=(0,e.spawnSync)(f,u,{env:{...process.env,...a},encoding:"utf-8",shell:!0}),{error:o,status:s,stdout:i,stderr:r}=l;if(o!=null)throw this._logger.error(r),o;if(s!=null&&s!==0)throw this._logger.error(r),new Error(`Command ${f} exited with code ${s}`);return i.trim()}async spawnLog(f,u=[],a=void 0,l="ignore"){return this._logger.info(`Executing: ${f} with args: ${u}`),new Promise((o,s)=>{try{const i={stdio:l,env:a,detached:!0},r=(0,e.spawn)(f,u,i);r.on("error",n=>{s(n)}),r.unref(),r.pid!==void 0&&o(!0)}catch(i){s(i)}})}};return Vt.BaseUpdater=h,Vt}var sr={},lr={},vl;function mu(){if(vl)return lr;vl=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const e=yt(),d=hu(),h=kl;let c=class extends d.DifferentialDownloader{async download(){const l=this.blockAwareFileInfo,o=l.size,s=o-(l.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(s,o-1);const i=f(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await u(this.options.oldFile),i)}};lr.FileWithEmbeddedBlockMapDifferentialDownloader=c;function f(a){return JSON.parse((0,h.inflateRawSync)(a).toString())}async function u(a){const l=await(0,e.open)(a,"r");try{const o=(await(0,e.fstat)(l)).size,s=Buffer.allocUnsafe(4);await(0,e.read)(l,s,0,s.length,o-s.length);const i=Buffer.allocUnsafe(s.readUInt32BE(0));return await(0,e.read)(l,i,0,i.length,o-s.length-i.length),await(0,e.close)(l),f(i)}catch(o){throw await(0,e.close)(l),o}}return lr}var El;function yl(){if(El)return sr;El=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.AppImageUpdater=void 0;const e=ke(),d=Mr,h=yt(),c=vt,f=be,u=Xr(),a=mu(),l=Xe(),o=Nt();let s=class extends u.BaseUpdater{constructor(r,n){super(r,n)}isUpdaterActive(){return process.env.APPIMAGE==null&&!this.forceDevUpdateConfig?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(r){const n=r.updateInfoAndProvider.provider,p=(0,l.findFile)(n.resolveFiles(r.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:p,downloadUpdateOptions:r,task:async(g,y)=>{const m=process.env.APPIMAGE;if(m==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(r.disableDifferentialDownload||await this.downloadDifferential(p,m,g,n,r))&&await this.httpExecutor.download(p.url,g,y),await(0,h.chmod)(g,493)}})}async downloadDifferential(r,n,p,g,y){try{const m={newUrl:r.url,oldFile:n,logger:this._logger,newFile:p,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,requestHeaders:y.requestHeaders,cancellationToken:y.cancellationToken};return this.listenerCount(o.DOWNLOAD_PROGRESS)>0&&(m.onProgress=w=>this.emit(o.DOWNLOAD_PROGRESS,w)),await new a.FileWithEmbeddedBlockMapDifferentialDownloader(r.info,this.httpExecutor,m).download(),!1}catch(m){return this._logger.error(`Cannot download differentially, fallback to full download: ${m.stack||m}`),process.platform==="linux"}}doInstall(r){const n=process.env.APPIMAGE;if(n==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,c.unlinkSync)(n);let p;const g=f.basename(n),y=this.installerPath;if(y==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;f.basename(y)===g||!/\d+\.\d+\.\d+/.test(g)?p=n:p=f.join(f.dirname(n),f.basename(y)),(0,d.execFileSync)("mv",["-f",y,p]),p!==n&&this.emit("appimage-filename-updated",p);const m={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return r.isForceRunAfter?this.spawnLog(p,[],m):(m.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,d.execFileSync)(p,[],{env:m})),!0}};return sr.AppImageUpdater=s,sr}var ur={},cr={},wl;function ga(){if(wl)return cr;wl=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.LinuxUpdater=void 0;const e=Xr();let d=class extends e.BaseUpdater{constructor(c,f){super(c,f)}isRunningAsRoot(){var c;return((c=process.getuid)===null||c===void 0?void 0:c.call(process))===0}get installerPath(){var c,f;return(f=(c=super.installerPath)===null||c===void 0?void 0:c.replace(/\\/g,"\\\\").replace(/ /g,"\\ "))!==null&&f!==void 0?f:null}runCommandWithSudoIfNeeded(c){if(this.isRunningAsRoot())return this._logger.info("Running as root, no need to use sudo"),this.spawnSyncLog(c[0],c.slice(1));const{name:f}=this.app,u=`"${f} would like to update"`,a=this.sudoWithArgs(u);this._logger.info(`Running as non-root user, using sudo to install: ${a}`);let l='"';return(/pkexec/i.test(a[0])||a[0]==="sudo")&&(l=""),this.spawnSyncLog(a[0],[...a.length>1?a.slice(1):[],`${l}/bin/bash`,"-c",`'${c.join(" ")}'${l}`])}sudoWithArgs(c){const f=this.determineSudoCommand(),u=[f];return/kdesudo/i.test(f)?(u.push("--comment",c),u.push("-c")):/gksudo/i.test(f)?u.push("--message",c):/pkexec/i.test(f)&&u.push("--disable-internal-agent"),u}hasCommand(c){try{return this.spawnSyncLog("command",["-v",c]),!0}catch{return!1}}determineSudoCommand(){const c=["gksudo","kdesudo","pkexec","beesu"];for(const f of c)if(this.hasCommand(f))return f;return"sudo"}detectPackageManager(c){var f;const u=(f=process.env.ELECTRON_BUILDER_LINUX_PACKAGE_MANAGER)===null||f===void 0?void 0:f.trim();if(u)return u;for(const a of c)if(this.hasCommand(a))return a;return this._logger.warn(`No package manager found in the list: ${c.join(", ")}. Defaulting to the first one: ${c[0]}`),c[0]}};return cr.LinuxUpdater=d,cr}var _l;function Al(){if(_l)return ur;_l=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.DebUpdater=void 0;const e=Xe(),d=Nt(),h=ga();let c=class gu extends h.LinuxUpdater{constructor(u,a){super(u,a)}doDownloadUpdate(u){const a=u.updateInfoAndProvider.provider,l=(0,e.findFile)(a.resolveFiles(u.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:l,downloadUpdateOptions:u,task:async(o,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=i=>this.emit(d.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(l.url,o,s)}})}doInstall(u){const a=this.installerPath;if(a==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;if(!this.hasCommand("dpkg")&&!this.hasCommand("apt"))return this.dispatchError(new Error("Neither dpkg nor apt command found. Cannot install .deb package.")),!1;const l=["dpkg","apt"],o=this.detectPackageManager(l);try{gu.installWithCommandRunner(o,a,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(s){return this.dispatchError(s),!1}return u.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(u,a,l,o){var s;if(u==="dpkg")try{l(["dpkg","-i",a])}catch(i){o.warn((s=i.message)!==null&&s!==void 0?s:i),o.warn("dpkg installation failed, trying to fix broken dependencies with apt-get"),l(["apt-get","install","-f","-y"])}else if(u==="apt")o.warn("Using apt to install a local .deb. This may fail for unsigned packages unless properly configured."),l(["apt","install","-y","--allow-unauthenticated","--allow-downgrades","--allow-change-held-packages",a]);else throw new Error(`Package manager ${u} not supported`)}};return ur.DebUpdater=c,ur}var fr={},Rl;function Tl(){if(Rl)return fr;Rl=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.PacmanUpdater=void 0;const e=Nt(),d=Xe(),h=ga();let c=class vu extends h.LinuxUpdater{constructor(u,a){super(u,a)}doDownloadUpdate(u){const a=u.updateInfoAndProvider.provider,l=(0,d.findFile)(a.resolveFiles(u.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:l,downloadUpdateOptions:u,task:async(o,s)=>{this.listenerCount(e.DOWNLOAD_PROGRESS)>0&&(s.onProgress=i=>this.emit(e.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(l.url,o,s)}})}doInstall(u){const a=this.installerPath;if(a==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;try{vu.installWithCommandRunner(a,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(l){return this.dispatchError(l),!1}return u.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(u,a,l){var o;try{a(["pacman","-U","--noconfirm",u])}catch(s){l.warn((o=s.message)!==null&&o!==void 0?o:s),l.warn("pacman installation failed, attempting to update package database and retry");try{a(["pacman","-Sy","--noconfirm"]),a(["pacman","-U","--noconfirm",u])}catch(i){throw l.error("Retry after pacman -Sy failed"),i}}}};return fr.PacmanUpdater=c,fr}var dr={},Sl;function Cl(){if(Sl)return dr;Sl=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.RpmUpdater=void 0;const e=Nt(),d=Xe(),h=ga();let c=class Eu extends h.LinuxUpdater{constructor(u,a){super(u,a)}doDownloadUpdate(u){const a=u.updateInfoAndProvider.provider,l=(0,d.findFile)(a.resolveFiles(u.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:l,downloadUpdateOptions:u,task:async(o,s)=>{this.listenerCount(e.DOWNLOAD_PROGRESS)>0&&(s.onProgress=i=>this.emit(e.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(l.url,o,s)}})}doInstall(u){const a=this.installerPath;if(a==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const l=["zypper","dnf","yum","rpm"],o=this.detectPackageManager(l);try{Eu.installWithCommandRunner(o,a,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(s){return this.dispatchError(s),!1}return u.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(u,a,l,o){if(u==="zypper")return l(["zypper","--non-interactive","--no-refresh","install","--allow-unsigned-rpm","-f",a]);if(u==="dnf")return l(["dnf","install","--nogpgcheck","-y",a]);if(u==="yum")return l(["yum","install","--nogpgcheck","-y",a]);if(u==="rpm")return o.warn("Installing with rpm only (no dependency resolution)."),l(["rpm","-Uvh","--replacepkgs","--replacefiles","--nodeps",a]);throw new Error(`Package manager ${u} not supported`)}};return dr.RpmUpdater=c,dr}var hr={},bl;function Pl(){if(bl)return hr;bl=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.MacUpdater=void 0;const e=ke(),d=yt(),h=vt,c=be,f=mc,u=ma(),a=Xe(),l=Mr,o=vr;let s=class extends u.AppUpdater{constructor(r,n){super(r,n),this.nativeUpdater=ge.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",p=>{this._logger.warn(p),this.emit("error",p)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(r){this._logger.debug!=null&&this._logger.debug(r)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(r=>{r&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(r){let n=r.updateInfoAndProvider.provider.resolveFiles(r.updateInfoAndProvider.info);const p=this._logger,g="sysctl.proc_translated";let y=!1;try{this.debug("Checking for macOS Rosetta environment"),y=(0,l.execFileSync)("sysctl",[g],{encoding:"utf8"}).includes(`${g}: 1`),p.info(`Checked for macOS Rosetta environment (isRosetta=${y})`)}catch(b){p.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${b}`)}let m=!1;try{this.debug("Checking for arm64 in uname");const O=(0,l.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");p.info(`Checked 'uname -a': arm64=${O}`),m=m||O}catch(b){p.warn(`uname shell command to check for arm64 failed: ${b}`)}m=m||process.arch==="arm64"||y;const w=b=>{var O;return b.url.pathname.includes("arm64")||((O=b.info.url)===null||O===void 0?void 0:O.includes("arm64"))};m&&n.some(w)?n=n.filter(b=>m===w(b)):n=n.filter(b=>!w(b));const T=(0,a.findFile)(n,"zip",["pkg","dmg"]);if(T==null)throw(0,e.newError)(`ZIP file not provided: ${(0,e.safeStringifyJson)(n)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const P=r.updateInfoAndProvider.provider,I="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:T,downloadUpdateOptions:r,task:async(b,O)=>{const S=c.join(this.downloadedUpdateHelper.cacheDir,I),R=()=>(0,d.pathExistsSync)(S)?!r.disableDifferentialDownload:(p.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let v=!0;R()&&(v=await this.differentialDownloadInstaller(T,r,b,P,I)),v&&await this.httpExecutor.download(T.url,b,O)},done:async b=>{if(!r.disableDifferentialDownload)try{const O=c.join(this.downloadedUpdateHelper.cacheDir,I);await(0,d.copyFile)(b.downloadedFile,O)}catch(O){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${O.message}`)}return this.updateDownloaded(T,b)}})}async updateDownloaded(r,n){var p;const g=n.downloadedFile,y=(p=r.info.size)!==null&&p!==void 0?p:(await(0,d.stat)(g)).size,m=this._logger,w=`fileToProxy=${r.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${w})`),this.server=(0,f.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${w})`),this.server.on("close",()=>{m.info(`Proxy server for native Squirrel.Mac is closed (${w})`)});const T=P=>{const I=P.address();return typeof I=="string"?I:`http://127.0.0.1:${I==null?void 0:I.port}`};return await new Promise((P,I)=>{const b=(0,o.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),O=Buffer.from(`autoupdater:${b}`,"ascii"),S=`/${(0,o.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(R,v)=>{const k=R.url;if(m.info(`${k} requested`),k==="/"){if(!R.headers.authorization||R.headers.authorization.indexOf("Basic ")===-1){v.statusCode=401,v.statusMessage="Invalid Authentication Credentials",v.end(),m.warn("No authenthication info");return}const $=R.headers.authorization.split(" ")[1],x=Buffer.from($,"base64").toString("ascii"),[N,j]=x.split(":");if(N!=="autoupdater"||j!==b){v.statusCode=401,v.statusMessage="Invalid Authentication Credentials",v.end(),m.warn("Invalid authenthication credentials");return}const D=Buffer.from(`{ "url": "${T(this.server)}${S}" }`);v.writeHead(200,{"Content-Type":"application/json","Content-Length":D.length}),v.end(D);return}if(!k.startsWith(S)){m.warn(`${k} requested, but not supported`),v.writeHead(404),v.end();return}m.info(`${S} requested by Squirrel.Mac, pipe ${g}`);let q=!1;v.on("finish",()=>{q||(this.nativeUpdater.removeListener("error",I),P([]))});const L=(0,h.createReadStream)(g);L.on("error",$=>{try{v.end()}catch(x){m.warn(`cannot end response: ${x}`)}q=!0,this.nativeUpdater.removeListener("error",I),I(new Error(`Cannot pipe "${g}": ${$}`))}),v.writeHead(200,{"Content-Type":"application/zip","Content-Length":y}),L.pipe(v)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${w})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${T(this.server)}, ${w})`),this.nativeUpdater.setFeedURL({url:T(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${O.toString("base64")}`}}),this.dispatchUpdateDownloaded(n),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",I),this.nativeUpdater.checkForUpdates()):P([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return hr.MacUpdater=s,hr}var pr={},$r={},Ol;function Bf(){if(Ol)return $r;Ol=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.verifySignature=u;const e=ke(),d=Mr,h=Br,c=be;function f(s,i){return['set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",s],{shell:!0,timeout:i}]}function u(s,i,r){return new Promise((n,p)=>{const g=i.replace(/'/g,"''");r.info(`Verifying signature ${g}`),(0,d.execFile)(...f(`"Get-AuthenticodeSignature -LiteralPath '${g}' | ConvertTo-Json -Compress"`,20*1e3),(y,m,w)=>{var T;try{if(y!=null||w){l(r,y,w,p),n(null);return}const P=a(m);if(P.Status===0){try{const S=c.normalize(P.Path),R=c.normalize(i);if(r.info(`LiteralPath: ${S}. Update Path: ${R}`),S!==R){l(r,new Error(`LiteralPath of ${S} is different than ${R}`),w,p),n(null);return}}catch(S){r.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(T=S.message)!==null&&T!==void 0?T:S.stack}`)}const b=(0,e.parseDn)(P.SignerCertificate.Subject);let O=!1;for(const S of s){const R=(0,e.parseDn)(S);if(R.size?O=Array.from(R.keys()).every(k=>R.get(k)===b.get(k)):S===b.get("CN")&&(r.warn(`Signature validated using only CN ${S}. Please add your full Distinguished Name (DN) to publisherNames configuration`),O=!0),O){n(null);return}}}const I=`publisherNames: ${s.join(" | ")}, raw info: `+JSON.stringify(P,(b,O)=>b==="RawData"?void 0:O,2);r.warn(`Sign verification failed, installer signed with incorrect certificate: ${I}`),n(I)}catch(P){l(r,P,null,p),n(null);return}})})}function a(s){const i=JSON.parse(s);delete i.PrivateKey,delete i.IsOSBinary,delete i.SignatureType;const r=i.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),i}function l(s,i,r,n){if(o()){s.warn(`Cannot execute Get-AuthenticodeSignature: ${i||r}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,d.execFileSync)(...f("ConvertTo-Json test",10*1e3))}catch(p){s.warn(`Cannot execute ConvertTo-Json: ${p.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}i!=null&&n(i),r&&n(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${r}. Failing signature validation due to unknown stderr.`))}function o(){const s=h.release();return s.startsWith("6.")&&!s.startsWith("6.3")}return $r}var Il;function Dl(){if(Il)return pr;Il=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.NsisUpdater=void 0;const e=ke(),d=be,h=Xr(),c=mu(),f=Nt(),u=Xe(),a=yt(),l=Bf(),o=Et;let s=class extends h.BaseUpdater{constructor(r,n){super(r,n),this._verifyUpdateCodeSignature=(p,g)=>(0,l.verifySignature)(p,g,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(r){r&&(this._verifyUpdateCodeSignature=r)}doDownloadUpdate(r){const n=r.updateInfoAndProvider.provider,p=(0,u.findFile)(n.resolveFiles(r.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:r,fileInfo:p,task:async(g,y,m,w)=>{const T=p.packageInfo,P=T!=null&&m!=null;if(P&&r.disableWebInstaller)throw(0,e.newError)(`Unable to download new version ${r.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!P&&!r.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(P||r.disableDifferentialDownload||await this.differentialDownloadInstaller(p,r,g,n,e.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(p.url,g,y);const I=await this.verifySignature(g);if(I!=null)throw await w(),(0,e.newError)(`New version ${r.updateInfoAndProvider.info.version} is not signed by the application owner: ${I}`,"ERR_UPDATER_INVALID_SIGNATURE");if(P&&await this.differentialDownloadWebPackage(r,T,m,n))try{await this.httpExecutor.download(new o.URL(T.path),m,{headers:r.requestHeaders,cancellationToken:r.cancellationToken,sha512:T.sha512})}catch(b){try{await(0,a.unlink)(m)}catch{}throw b}}})}async verifySignature(r){let n;try{if(n=(await this.configOnDisk.value).publisherName,n==null)return null}catch(p){if(p.code==="ENOENT")return null;throw p}return await this._verifyUpdateCodeSignature(Array.isArray(n)?n:[n],r)}doInstall(r){const n=this.installerPath;if(n==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const p=["--updated"];r.isSilent&&p.push("/S"),r.isForceRunAfter&&p.push("--force-run"),this.installDirectory&&p.push(`/D=${this.installDirectory}`);const g=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;g!=null&&p.push(`--package-file=${g}`);const y=()=>{this.spawnLog(d.join(process.resourcesPath,"elevate.exe"),[n].concat(p)).catch(m=>this.dispatchError(m))};return r.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),y(),!0):(this.spawnLog(n,p).catch(m=>{const w=m.code;this._logger.info(`Cannot run installer: error code: ${w}, error message: "${m.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),w==="UNKNOWN"||w==="EACCES"?y():w==="ENOENT"?ge.shell.openPath(n).catch(T=>this.dispatchError(T)):this.dispatchError(m)}),!0)}async differentialDownloadWebPackage(r,n,p,g){if(n.blockMapSize==null)return!0;try{const y={newUrl:new o.URL(n.path),oldFile:d.join(this.downloadedUpdateHelper.cacheDir,e.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:p,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,cancellationToken:r.cancellationToken};this.listenerCount(f.DOWNLOAD_PROGRESS)>0&&(y.onProgress=m=>this.emit(f.DOWNLOAD_PROGRESS,m)),await new c.FileWithEmbeddedBlockMapDifferentialDownloader(n,this.httpExecutor,y).download()}catch(y){return this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),process.platform==="win32"}return!1}};return pr.NsisUpdater=s,pr}var Nl;function Hf(){return Nl||(Nl=1,(function(e){var d=St&&St.__createBinding||(Object.create?(function(m,w,T,P){P===void 0&&(P=T);var I=Object.getOwnPropertyDescriptor(w,T);(!I||("get"in I?!w.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return w[T]}}),Object.defineProperty(m,P,I)}):(function(m,w,T,P){P===void 0&&(P=T),m[P]=w[T]})),h=St&&St.__exportStar||function(m,w){for(var T in m)T!=="default"&&!Object.prototype.hasOwnProperty.call(w,T)&&d(w,m,T)};Object.defineProperty(e,"__esModule",{value:!0}),e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.PacmanUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const c=yt(),f=be;var u=Xr();Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return u.BaseUpdater}});var a=ma();Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return a.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return a.NoOpLogger}});var l=Xe();Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return l.Provider}});var o=yl();Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return o.AppImageUpdater}});var s=Al();Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return s.DebUpdater}});var i=Tl();Object.defineProperty(e,"PacmanUpdater",{enumerable:!0,get:function(){return i.PacmanUpdater}});var r=Cl();Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return r.RpmUpdater}});var n=Pl();Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return n.MacUpdater}});var p=Dl();Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return p.NsisUpdater}}),h(Nt(),e);let g;function y(){if(process.platform==="win32")g=new(Dl()).NsisUpdater;else if(process.platform==="darwin")g=new(Pl()).MacUpdater;else{g=new(yl()).AppImageUpdater;try{const m=f.join(process.resourcesPath,"package-type");if(!(0,c.existsSync)(m))return g;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const w=(0,c.readFileSync)(m).toString().trim();switch(console.info("Found package-type:",w),w){case"deb":g=new(Al()).DebUpdater;break;case"rpm":g=new(Cl()).RpmUpdater;break;case"pacman":g=new(Tl()).PacmanUpdater;break;default:break}}catch(m){console.warn("Unable to detect 'package-type' for autoUpdater (rpm/deb/pacman support). If you'd like to expand support, please consider contributing to electron-builder",m.message)}}return g}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>g||y()})})(St)),St}var gt=Hf();if(process.platform==="win32")try{require("electron-squirrel-startup")&&ge.app.quit()}catch{}const Zi="navi";process.defaultApp?process.argv.length>=2&&ge.app.setAsDefaultProtocolClient(Zi,process.execPath,[be.resolve(process.argv[1])]):ge.app.setAsDefaultProtocolClient(Zi);const Ot=process.platform==="darwin",jf=Ot?"Command+`":"Alt+`",Gf=Ot?"Command+.":"Alt+.";let Oe=null,Fe=null,et=null;function Wf(){gt.autoUpdater.autoDownload=!1,gt.autoUpdater.autoInstallOnAppQuit=!0,gt.autoUpdater.on("update-available",e=>{ge.dialog.showMessageBox({type:"info",title:"Update Available",message:`A new version (${e.version}) is available. Would you like to download it now?`,buttons:["Download","Later"]}).then(d=>{d.response===0&&gt.autoUpdater.downloadUpdate()})}),gt.autoUpdater.on("update-downloaded",()=>{ge.dialog.showMessageBox({type:"info",title:"Update Ready",message:"Update downloaded. The app will restart to install the update.",buttons:["Restart Now","Later"]}).then(e=>{e.response===0&&gt.autoUpdater.quitAndInstall()})}),gt.autoUpdater.on("error",e=>{console.error("Auto-update error:",e)}),gt.autoUpdater.checkForUpdates().catch(console.error)}function yu(){const e=ge.screen.getPrimaryDisplay(),{width:d,height:h}=e.workAreaSize,c=new ge.BrowserWindow({width:d,height:h,x:e.workArea.x,y:e.workArea.y,frame:!1,transparent:!0,backgroundColor:"#00000000",hasShadow:!1,alwaysOnTop:!0,skipTaskbar:!0,resizable:!1,movable:!1,show:!1,focusable:!0,vibrancy:void 0,visualEffectState:"active",webPreferences:{preload:be.join(__dirname,"index.js"),contextIsolation:!0,nodeIntegration:!1,sandbox:!1}});return c.setIgnoreMouseEvents(!0,{forward:!0}),c.loadFile(be.join(__dirname,"../renderer/main_window/index.html")),c.on("blur",()=>{setTimeout(()=>{Oe&&!Oe.isFocused()&&va()},100)}),c}function Vf(){const e=new ge.BrowserWindow({width:1200,height:800,resizable:!1,minimizable:!0,maximizable:!1,title:"Navi Settings",titleBarStyle:"hiddenInset",trafficLightPosition:{x:16,y:16},backgroundColor:"#00000000",show:!1,center:!0,webPreferences:{preload:be.join(__dirname,"index.js"),contextIsolation:!0,nodeIntegration:!1,sandbox:!1}});return console.log("[Settings] Dev URL:",void 0),console.log("[Settings] Vite Name:","settings_window"),e.loadFile(be.join(__dirname,"../renderer/settings_window/settings.html")),e.once("ready-to-show",()=>{e.show()}),e.on("closed",()=>{Fe=null}),e}function ea(){Fe?Fe.isVisible()?Fe.hide():(Fe.show(),Fe.focus()):Fe=Vf()}function Fl(){if(!Oe)return;const e=ge.screen.getCursorScreenPoint(),d=ge.screen.getDisplayNearestPoint(e);Oe.setBounds({x:d.workArea.x,y:d.workArea.y,width:d.workArea.width,height:d.workArea.height}),Oe.show(),Oe.focus(),Oe.webContents.send("flow:show")}function va(){Oe!=null&&Oe.isVisible()&&(Oe.hide(),Oe.webContents.send("flow:hide"))}function Qi(){if(!Oe){Oe=yu(),Oe.once("ready-to-show",Fl);return}Oe.isVisible()?va():Fl()}ge.ipcMain.on("flow:hide",va);ge.ipcMain.on("flow:mouseEnter",()=>{Oe&&Oe.setIgnoreMouseEvents(!1)});ge.ipcMain.on("flow:mouseLeave",()=>{Oe&&Oe.setIgnoreMouseEvents(!0,{forward:!0})});ge.ipcMain.on("shell:openExternal",(e,d)=>{ge.shell.openExternal(d)});ge.ipcMain.handle("theme:get",()=>ge.nativeTheme.shouldUseDarkColors);ge.ipcMain.on("settings:setTheme",(e,d)=>{Oe&&Oe.webContents.send("settings:themeChanged",d),Fe&&Fe.webContents.send("settings:themeChanged",d)});ge.ipcMain.on("settings:open",ea);function wu(e){console.log("[DeepLink] Received:",e);try{const d=new URL(e),h=d.pathname.replace(/^\/+/,"");if(d.host==="auth"||h.startsWith("auth")){const c=h.replace(/^auth\/?/,"");if(c==="callback"||c===""){const f=d.searchParams.get("access_token"),u=d.searchParams.get("refresh_token"),a=d.searchParams.get("user_id");if(f&&u&&a){const l={accessToken:f,refreshToken:u,userId:a};Oe&&Oe.webContents.send("auth:callback",l),Fe&&(Fe.webContents.send("auth:callback",l),Fe.show(),Fe.focus()),console.log("[DeepLink] Auth successful for user:",a)}}else if(c==="error"){const f=d.searchParams.get("error"),u=d.searchParams.get("description");Fe&&(Fe.webContents.send("auth:error",{error:f,description:u}),Fe.show(),Fe.focus()),console.error("[DeepLink] Auth error:",f,u)}}}catch(d){console.error("[DeepLink] Failed to parse URL:",d)}}ge.app.on("open-url",(e,d)=>{e.preventDefault(),wu(d)});const Yf=ge.app.requestSingleInstanceLock();Yf?ge.app.on("second-instance",(e,d)=>{const h=d.find(c=>c.startsWith(`${Zi}://`));h&&wu(h),Fe&&(Fe.isMinimized()&&Fe.restore(),Fe.focus())}):ge.app.quit();ge.ipcMain.on("auth:login",()=>{const e=process.env.NAVI_API_URL||"https://navi-search.vercel.app";ge.shell.openExternal(`${e}/api/auth/login`)});ge.ipcMain.on("auth:logout",()=>{Oe&&Oe.webContents.send("auth:logout"),Fe&&Fe.webContents.send("auth:logout")});ge.app.whenReady().then(()=>{console.log("[Navi] App ready, initializing..."),Ot&&ge.app.dock.hide();function e(){const h=ge.app.isPackaged?be.join(process.resourcesPath,"assets"):be.join(__dirname,"../../assets");if(console.log("[Navi] Assets path:",h),Ot)return be.join(h,"trayIconTemplate.png");{const c=ge.nativeTheme.shouldUseDarkColors?"trayIcon-light.png":"trayIcon-dark.png",f=be.join(h,c);return console.log("[Navi] Tray icon path:",f),f}}try{const h=e();console.log("[Navi] Creating tray with icon:",h),et=new ge.Tray(h),et.setToolTip("Navi - Press Alt+` to show"),console.log("[Navi] Tray created successfully"),process.platform==="win32"&&ge.app.isPackaged&&et.displayBalloon({iconType:"info",title:"Navi is running!",content:"Press Alt+` to open Navi. Right-click this icon for options."})}catch(h){console.error("[Navi] Failed to create tray:",h),ge.dialog.showErrorBox("Navi Error",`Failed to create system tray icon: ${h}`)}!Ot&&et&&ge.nativeTheme.on("updated",()=>{if(et)try{et.setImage(e())}catch(h){console.error("[Navi] Failed to update tray icon:",h)}}),ge.app.isPackaged&&(ge.app.getLoginItemSettings().wasOpenedAtLogin||ge.app.setLoginItemSettings({openAtLogin:!0,openAsHidden:!0}));function d(){const h=ge.app.getLoginItemSettings();return ge.Menu.buildFromTemplate([{label:"Toggle Navi",accelerator:Ot?"Cmd+`":"Alt+`",click:Qi},{label:"Settings",accelerator:Ot?"Cmd+.":"Alt+.",click:ea},{type:"separator"},{label:"Launch at Startup",type:"checkbox",checked:h.openAtLogin,click:c=>{ge.app.setLoginItemSettings({openAtLogin:c.checked,openAsHidden:!0}),et&&et.setContextMenu(d())}},{type:"separator"},{label:"Quit",click:()=>ge.app.quit()}])}et&&(et.setContextMenu(d()),et.on("click",Qi)),ge.globalShortcut.register(jf,Qi),ge.globalShortcut.register(Gf,ea),Oe=yu(),console.log("[Navi] Flow window created"),Wf(),console.log("[Navi] Initialization complete. Press Alt+` to show.")});ge.app.on("will-quit",()=>ge.globalShortcut.unregisterAll());ge.app.on("window-all-closed",()=>{});
